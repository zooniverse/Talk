var base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=base64._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+base64._keyStr.charAt(s)+base64._keyStr.charAt(o)+base64._keyStr.charAt(u)+base64._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=base64._keyStr.indexOf(e.charAt(f++)),o=base64._keyStr.indexOf(e.charAt(f++)),u=base64._keyStr.indexOf(e.charAt(f++)),a=base64._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=base64._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=0,i=0,s=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|i&63),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63),n+=3);return t}};(function(){if(!this.require){var e={},t={},n=function(s,o){var u=r(o,s),a=r(u,"./index"),f,l;f=t[u]||t[a];if(f)return f;if(l=e[u]||e[u=a])return f={id:u,exports:{}},t[u]=f.exports,l(f.exports,function(e){return n(e,i(u))},f),t[u]=f.exports;throw"module "+s+" not found"},r=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i==".."?n.pop():i!="."&&i!=""&&n.push(i);return n.join("/")},i=function(e){return e.split("/").slice(0,-1).join("/")};this.require=function(e){return n(e,"")},this.require.define=function(t){for(var n in t)e[n]=t[n]},this.require.modules=e,this.require.cache=t}return this.require.define}).call(this)({"es5-shimify/index":function(e,t,n){(function(e){typeof define=="function"?define(function(){e()}):e()})(function(e){if(!Function.prototype.bind){var t=Array.prototype.slice;Function.prototype.bind=function(n){function s(){if(this instanceof s){var e=Object.create(r.prototype);return r.apply(e,i.concat(t.call(arguments))),e}return r.call.apply(r,i.concat(t.call(arguments)))}var r=this;if(typeof r.apply!="function"||typeof r.call!="function")return new TypeError;var i=t.call(arguments);return s.length=typeof r=="function"?Math.max(r.length-i.length,0):0,s}}var n=Function.prototype.call,r=Array.prototype,i=Object.prototype,s=n.bind(i.hasOwnProperty),o,u,a,f,l;if(l=s(i,"__defineGetter__"))o=n.bind(i.__defineGetter__),u=n.bind(i.__defineSetter__),a=n.bind(i.__lookupGetter__),f=n.bind(i.__lookupSetter__);Array.isArray||(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),Array.prototype.forEach||(Array.prototype.forEach=function(t,n){var r=+this.length;for(var i=0;i<r;i++)i in this&&t.call(n,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t){var n=+this.length;if(typeof t!="function")throw new TypeError;var r=new Array(n),i=arguments[1];for(var s=0;s<n;s++)s in this&&(r[s]=t.call(i,this[s],s,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(t){var n=[],r=arguments[1];for(var i=0;i<this.length;i++)t.call(r,this[i])&&n.push(this[i]);return n}),Array.prototype.every||(Array.prototype.every=function(t){var n=arguments[1];for(var r=0;r<this.length;r++)if(!t.call(n,this[r]))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=arguments[1];for(var r=0;r<this.length;r++)if(t.call(n,this[r]))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=+this.length;if(typeof t!="function")throw new TypeError;if(n===0&&arguments.length===1)throw new TypeError;var r=0;if(arguments.length>=2)var i=arguments[1];else do{if(r in this){i=this[r++];break}if(++r>=n)throw new TypeError}while(!0);for(;r<n;r++)r in this&&(i=t.call(null,i,this[r],r,this));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=+this.length;if(typeof t!="function")throw new TypeError;if(n===0&&arguments.length===1)throw new TypeError;var r,i=n-1;if(arguments.length>=2)r=arguments[1];else do{if(i in this){r=this[i--];break}if(--i<0)throw new TypeError}while(!0);for(;i>=0;i--)i in this&&(r=t.call(null,r,this[i],i,this));return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var n=this.length;if(!n)return-1;var r=arguments[1]||0;if(r>=n)return-1;r<0&&(r+=n);for(;r<n;r++){if(!(r in this))continue;if(t===this[r])return r}return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){var n=this.length;if(!n)return-1;var r=arguments[1]||n;r<0&&(r+=n),r=Math.min(r,n-1);for(;r>=0;r--){if(!(r in this))continue;if(t===this[r])return r}return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||t.constructor.prototype});if(!Object.getOwnPropertyDescriptor){var c="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(n,r){if(typeof n!="object"&&typeof n!="function"||n===null)throw new TypeError(c+n);if(!s(n,r))return e;var o,u,h;o={enumerable:!0,configurable:!0};if(l){var p=n.__proto__;n.__proto__=i;var u=a(n,r),h=f(n,r);n.__proto__=p;if(u||h)return u&&(o.get=u),h&&(o.set=h),o}return o.value=n[r],o}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create||(Object.create=function(t,n){var r;if(t===null)r={__proto__:null};else{if(typeof t!="object")throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return typeof n!="undefined"&&Object.defineProperties(r,n),r});if(!Object.defineProperty){var h="Property description must be an object: ",p="Object.defineProperty called on non-object: ",d="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,n,r){if(typeof t!="object"&&typeof t!="function")throw new TypeError(p+t);if(typeof r!="object"||r===null)throw new TypeError(h+r);if(s(r,"value"))if(l&&(a(t,n)||f(t,n))){var c=t.__proto__;t.__proto__=i,delete t[n],t[n]=r.value,t.__proto__=c}else t[n]=r.value;else{if(!l)throw new TypeError(d);s(r,"get")&&o(t,n,r.get),s(r,"set")&&u(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)s(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(v){Object.freeze=function(t){return function(n){return typeof n=="function"?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){return!0});if(!Object.keys){var m=!0,g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],y=g.length;for(var b in{toString:null})m=!1;Object.keys=function S(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on a non-object");var S=[];for(var t in e)s(e,t)&&S.push(t);if(m)for(var n=0,r=y;n<r;n++){var i=g[n];s(e,i)&&S.push(i)}return S}}Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1)+"-"+this.getUTCDate()+"T"+this.getUTCHours()+":"+this.getUTCMinutes()+":"+this.getUTCSeconds()+"Z"}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(t){if(typeof this.toISOString!="function")throw new TypeError;return this.toISOString()}),isNaN(Date.parse("T00:00"))&&(Date=function(t){var n=function(e,r,i,s,o,u,a){var f=arguments.length;if(this instanceof t){var l=f===1&&String(e)===e?new t(n.parse(e)):f>=7?new t(e,r,i,s,o,u,a):f>=6?new t(e,r,i,s,o,u):f>=5?new t(e,r,i,s,o):f>=4?new t(e,r,i,s):f>=3?new t(e,r,i):f>=2?new t(e,r):f>=1?new t(e):new t;return l.constructor=n,l}return t.apply(this,arguments)},r=new RegExp("^(?:((?:[+-]\\d\\d)?\\d\\d\\d\\d)(?:-(\\d\\d)(?:-(\\d\\d))?)?)?(?:T(\\d\\d):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?)?(?:Z|([+-])(\\d\\d):(\\d\\d))?$");for(var i in t)n[i]=t[i];return n.now=t.now,n.UTC=t.UTC,n.prototype=t.prototype,n.prototype.constructor=n,n.parse=function(i){var s=r.exec(i);if(s){s.shift();var o=s[0]===e;for(var u=0;u<10;u++){if(u===7)continue;s[u]=+(s[u]||(u<3?1:0)),u===1&&s[u]--}if(o)return((s[3]*60+s[4])*60+s[5])*1e3+s[6];var a=(s[8]*60+s[9])*60*1e3;return s[6]==="-"&&(a=-a),t.UTC.apply(this,s.slice(0,7))+a}return t.parse.apply(this,arguments)},n}(Date));if(!String.prototype.trim){var w=/^\s\s*/,E=/\s\s*$/;String.prototype.trim=function(){return String(this).replace(w,"").replace(E,"")}}})},"json2ify/index":function(exports,require,module){typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;typeof JSON.stringify!="function"&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},"jqueryify/index":function(e,t,n){(function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?parseFloat(r):f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n+(a[n][r].namespace?".":"")+a[n][r].namespace,a[n][r],a[n][r].data)}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(s.expando)}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function vt(e,t){t.src?s.ajax({url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function Lt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?xt:Tt,o=0,u=i.length;if(r>0){if(n!=="border")for(;o<u;o++)n||(r-=parseFloat(s.css(e,"padding"+i[o]))||0),n==="margin"?r+=parseFloat(s.css(e,n+i[o]))||0:r-=parseFloat(s.css(e,"border"+i[o]+"Width"))||0;return r+"px"}r=Nt(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;o<u;o++)r+=parseFloat(s.css(e,"padding"+i[o]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+i[o]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+i[o]))||0);return r+"px"}function Gt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(Rt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Yt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Xt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Yt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Yt(e,n,r,i,"*",o)),c}function Zt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function en(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||Ot.test(e)?r(e,i):en(e+"["+(typeof i=="object"||s.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)en(e+"["+i+"]",t[i],n,r);else r(e,t)}function tn(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function nn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function fn(){try{return new e.XMLHttpRequest}catch(t){}}function ln(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function bn(){return setTimeout(wn,0),yn=s.now()}function wn(){yn=t}function En(e,t){var n={};return s.each(gn.concat.apply([],gn.slice(0,t)),function(){n[this]=e}),n}function Sn(e){if(!cn[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){hn||(hn=n.createElement("iframe"),hn.frameBorder=hn.width=hn.height=0),t.appendChild(hn);if(!pn||!hn.createElement)pn=(hn.contentWindow||hn.contentDocument).document,pn.write((n.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),pn.close();r=pn.createElement(e),pn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(hn)}cn[e]=i}return cn[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)i.access(e,f,n[f],s,o,r);return e}if(r!==t){s=!u&&s&&i.isFunction(r);for(var l=0;l<a;l++)o(e[l],n,s?r.call(e[l],l,o(e[l],n)):r,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test(" ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?h(o):u==="function"&&(!e.unique||!d.has(o))&&n.push(o)},p=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,c=f||0,f=0,l=n.length;for(;n&&c<l;c++)if(n[c].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}a=!1,n&&(e.once?i===!0?d.disable():n=[]:r&&r.length&&(i=r.shift(),d.fireWith(i[0],i[1])))},d={add:function(){if(n){var e=n.length;h(arguments),a?l=n.length:i&&i!==!0&&(f=e,p(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){a&&s<=l&&(l--,s<=c&&c--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&d.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(a?e.once||r.push([t,n]):(!e.once||!i)&&p(t,n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v,m=n.createElement("div"),g=n.documentElement;m.setAttribute("className","t"),m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=m.getElementsByTagName("*"),i=m.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=m.getElementsByTagName("input")[0],t={leadingWhitespace:m.firstChild.nodeType===3,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:m.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete m.test}catch(y){t.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){t.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),m.appendChild(a),l=n.createDocumentFragment(),l.appendChild(m.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,l.removeChild(a),l.appendChild(m),m.innerHTML="",e.getComputedStyle&&(f=n.createElement("div"),f.style.width="0",f.style.marginRight="0",m.style.width="2px",m.appendChild(f),t.reliableMarginRight=(parseInt((e.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0);if(m.attachEvent)for(d in{submit:1,change:1,focusin:1})p="on"+d,v=p in m,v||(m.setAttribute(p,"return;"),v=typeof m[p]=="function"),t[d+"Bubbles"]=v;return l.removeChild(m),l=o=u=f=m=a=null,s(function(){var e,r,i,o,u,a,f,l,h,p,d,g=n.getElementsByTagName("body")[0];if(!g)return;f=1,l="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",h="visibility:hidden;border:0;",p="style='"+l+"border:5px solid #000;padding:0;'",d="<div "+p+"><div></div></div>"+"<table "+p+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=n.createElement("div"),e.style.cssText=h+"width:0;height:0;position:static;top:0;margin-top:"+f+"px",g.insertBefore(e,g.firstChild),m=n.createElement("div"),e.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=m.getElementsByTagName("td"),v=c[0].offsetHeight===0,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=v&&c[0].offsetHeight===0,m.innerHTML="",m.style.width=m.style.paddingLeft="1px",s.boxModel=t.boxModel=m.offsetWidth===2,typeof m.style.zoom!="undefined"&&(m.style.display="inline",m.style.zoom=1,t.inlineBlockNeedsLayout=m.offsetWidth===2,m.style.display="",m.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=m.offsetWidth!==2),m.style.cssText=l+h,m.innerHTML=d,r=m.firstChild,i=r.firstChild,u=r.nextSibling.firstChild.firstChild,a={doesNotAddBorder:i.offsetTop!==5,doesAddBorderForTableAndCells:u.offsetTop===5},i.style.position="fixed",i.style.top="20px",a.fixedPosition=i.offsetTop===20||i.offsetTop===15,i.style.position=i.style.top="",r.style.overflow="hidden",r.style.position="relative",a.subtractsBorderForOverflowNotVisible=i.offsetTop===-5,a.doesNotIncludeMarginInBodyOffset=g.offsetTop!==f,g.removeChild(e),m=e=null,s.extend(t,a)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u=null;if(typeof e=="undefined"){if(this.length){u=s.data(this[0]);if(this[0].nodeType===1&&!s._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var a=0,f=i.length;a<f;a++)o=i[a].name,o.indexOf("data-")===0&&(o=s.camelCase(o.substring(5)),c(this[0],o,u[o]));s._data(this[0],"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(u=this.triggerHandler("getData"+r[1]+"!",[r[0]]),u===t&&this.length&&(u=s.data(this[0],e),u=c(this[0],e,u)),u===t&&r[1]?this.data(r[0]):u):this.each(function(){var t=s(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),s.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?s.queue(this[0],e):this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise()}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,e,t,!0,s.attr)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,e,t,!0,s.prop)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.nodeName.toLowerCase()]||s.valHooks[o.type],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.nodeName.toLowerCase()]||s.valHooks[this.type];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;u<o;u++)i=r[u],i&&(n=s.propFix[i]||i,s.attr(e,i,""),e.removeAttribute(E?i:n),w.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/\bhover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=[],f,l,c,h,p,d,v,m,g,y,b;o[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){h=s(this),h.context=this.ownerDocument||this;for(c=n.target;c!=this;c=c.parentNode||this){d={},m=[],h[0]=c;for(f=0;f<i;f++)g=r[f],y=g.selector,d[y]===t&&(d[y]=g.quick?D(c,g.quick):h.is(y)),d[y]&&m.push(g);m.length&&a.push({elem:c,matches:m})}}r.length>i&&a.push({elem:this,matches:r.slice(i)});for(f=0;f<a.length&&!n.isPropagationStopped();f++){v=a[f],n.currentTarget=v.elem;for(l=0;l<v.matches.length&&!n.isImmediatePropagationStopped();l++){g=v.matches[l];if(u||!n.namespace&&!g.namespace||n.namespace_re&&n.namespace_re.test(g.namespace))n.data=g.data,n.handleObj=g,p=((s.event.special[g.origType]||{}).handle||g.handler).apply(v.elem,o),p!==t&&(n.result=p,p===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.POS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling(e.parentNode.firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.isFunction(e)?this.each(function(t){var n=s(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e)):s.text(this)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(s.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else s.isFunction(e)?this.each(function(t){var n=s(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,vt)}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||!nt.test("<"+e.nodeName)?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o;t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);var u=[],a;for(var f=0,l;(l=e[f])!=null;f++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!Z.test(l))l=t.createTextNode(l);else{l=l.replace(Q,"<$1></$2>");var c=(G.exec(l)||["",""])[1].toLowerCase(),h=ot[c]||ot._default,p=h[0],d=t.createElement("div");t===n?ut.appendChild(d):V(t).appendChild(d),d.innerHTML=h[1]+l+h[2];while(p--)d=d.lastChild;if(!s.support.tbody){var v=Y.test(l),m=c==="table"&&!v?d.firstChild&&d.firstChild.childNodes:h[1]==="<table>"&&!v?d.childNodes:[];for(a=m.length-1;a>=0;--a)s.nodeName(m[a],"tbody")&&!m[a].childNodes.length&&m[a].parentNode.removeChild(m[a])}!s.support.leadingWhitespace&&K.test(l)&&d.insertBefore(t.createTextNode(K.exec(l)[0]),d.firstChild),l=d.childNodes}var g;if(!s.support.appendChecked)if(l[0]&&typeof (g=l.length)=="number")for(a=0;a<g;a++)pt(l[a]);else pt(l);l.nodeType?u.push(l):u=s.merge(u,l)}if(r){o=function(e){return!e.type||it.test(e.type)};for(f=0;u[f];f++)if(i&&s.nodeName(u[f],"script")&&(!u[f].type||u[f].type.toLowerCase()==="text/javascript"))i.push(u[f].parentNode?u[f].parentNode.removeChild(u[f]):u[f]);else{if(u[f].nodeType===1){var y=s.grep(u[f].getElementsByTagName("script"),o);u.splice.apply(u,[f+1,0].concat(y))}r.appendChild(u[f])}}return u},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var mt=/alpha\([^)]*\)/i,gt=/opacity=([^)]*)/,yt=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,wt=/^-?\d/,Et=/^([\-+])=([\-+.\de]+)/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Left","Right"],Tt=["Top","Bottom"],Nt,Ct,kt;s.fn.css=function(e,n){return arguments.length===2&&n===t?this:s.access(this,e,n,!0,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)})},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Nt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=Et.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Nt)return Nt(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),s.curCSS=s.css,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?Lt(e,t,r):(s.swap(e,St,function(){i=Lt(e,t,r)}),i)},set:function(e,t){if(!bt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return gt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(mt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=mt.test(o)?o.replace(mt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){var n;return s.swap(e,{display:"inline-block"},function(){t?n=Nt(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),n.defaultView&&n.defaultView.getComputedStyle&&(Ct=function(e,t){var n,r,i;return t=t.replace(yt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),n}),n.documentElement.currentStyle&&(kt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!bt.test(s)&&wt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Nt=Ct||kt,s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)});var At=/%20/g,Ot=/\[\]$/,Mt=/\r?\n/g,_t=/#.*$/,Dt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Pt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ht=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,jt=/^\/\//,Ft=/\?/,It=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,qt=/^(?:select|textarea)/i,Rt=/\s+/,Ut=/([?&])_=[^&]*/,zt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Wt=s.fn.load,Xt={},Vt={},$t,Jt,Kt=["*/"]+["*"];try{$t=i.href}catch(Qt){$t=n.createElement("a"),$t.href="",$t=$t.href}Jt=zt.exec($t.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&Wt)return Wt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(It,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||qt.test(this.nodeName)||Pt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Zt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Zt(e,t),e},ajaxSettings:{url:$t,isLocal:Ht.test(Jt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Kt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Gt(Xt),ajaxTransport:Gt(Vt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?tn(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=nn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=Dt.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(_t,"").replace(jt,Jt[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(Rt),r.crossDomain==null&&(g=zt.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==Jt[1]&&g[2]==Jt[2]&&(g[3]||(g[1]==="http:"?80:443))==(Jt[3]||(Jt[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Yt(Xt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Bt.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(Ft.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Ut,"$1_="+x);r.url=T+(T===r.url?(Ft.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Kt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Yt(Vt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)en(o,e[o],n,i);return r.join("&").replace(At,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var rn=s.now(),sn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+rn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(sn.test(t.url)||i&&sn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(sn,c),t.url===f&&(i&&(l=l.replace(sn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var on=e.ActiveXObject?function(){for(var e in an)an[e](0,1)}:!1,un=0,an;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&fn()||ln()}:fn,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,on&&delete an[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p),h.text=u.responseText;try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++un,on&&(an||(an={},s(e).unload(on)),an[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var cn={},hn,pn,dn=/^(?:toggle|show|hide)$/,vn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,mn,gn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],yn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(En("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),i===""&&s.css(r,"display")==="none"&&s._data(r,"olddisplay",Sn(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(En("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(En("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]),u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||Sn(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],dn.test(u)?(d=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),d?(s._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=vn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(s.cssNumber[a]?"":"px"),p!=="px"&&(s.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,s.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:En("show",1),slideUp:En("hide",1),slideToggle:En("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=yn||bn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){i.options.hide&&s._data(i.elem,"fxshow"+i.prop)===t&&s._data(i.elem,"fxshow"+i.prop,i.start)},u()&&s.timers.push(u)&&!mn&&(mn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=yn||bn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(mn),mn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(["width","height"],function(e,t){s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?s.fn.offset=function(e){var t=this[0],n;if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);try{n=t.getBoundingClientRect()}catch(r){}var i=t.ownerDocument,o=i.documentElement;if(!n||!s.contains(o,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var u=i.body,a=Nn(i),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||s.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||s.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}:s.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(s.support.fixedPosition&&l.position==="fixed")break;n=f?f.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,h-=t.scrollLeft,t===r&&(c+=t.offsetTop,h+=t.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n}if(l.position==="relative"||l.position==="static")c+=a.offsetTop,h+=a.offsetLeft;return s.support.fixedPosition&&l.position==="fixed"&&(c+=Math.max(u.scrollTop,a.scrollTop),h+=Math.max(u.scrollLeft,a.scrollLeft)),{top:c,left:h}},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each(["Left","Top"],function(e,n){var r="scroll"+n;s.fn[r]=function(n){var i,o;return n===t?(i=this[0],i?(o=Nn(i),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:s.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:i[r]):null):this.each(function(){o=Nn(this),o?o.scrollTo(e?s(o).scrollLeft():n,e?n:s(o).scrollTop()):this[r]=n})}}),s.each(["Height","Width"],function(e,n){var r=n.toLowerCase();s.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,r,"padding")):this[r]():null},s.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,r,e?"margin":"border")):this[r]():null},s.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(s.isFunction(e))return this.each(function(t){var n=s(this);n[r](e.call(this,t,n[r]()))});if(s.isWindow(i)){var o=i.document.documentElement["client"+n],u=i.document.body;return i.document.compatMode==="CSS1Compat"&&o||u&&u["client"+n]||o}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var a=s.css(i,r),f=parseFloat(a);return s.isNumeric(f)?f:a}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})})(window),n.exports=jQuery},"spine/index":function(e,t,n){n.exports=t("./lib/spine")},"spine/lib/spine":function(e,t,n){(function(){var e,t,r,i,s,o,u,a,f,l,c,h,p=[].slice,d=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},v={}.hasOwnProperty,m=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g=function(e,t){return function(){return e.apply(t,arguments)}};r={bind:function(e,t){var n,r,i,s,o;r=e.split(" "),n=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={});for(s=0,o=r.length;s<o;s++)i=r[s],n[i]||(n[i]=[]),n[i].push(t);return this},one:function(e,t){return this.bind(e,function(){return this.unbind(e,arguments.callee),t.apply(this,arguments)})},trigger:function(){var e,t,n,r,i,s,o;e=1<=arguments.length?p.call(arguments,0):[],n=e.shift(),r=this.hasOwnProperty("_callbacks")&&((o=this._callbacks)!=null?o[n]:void 0);if(!r)return;for(i=0,s=r.length;i<s;i++){t=r[i];if(t.apply(this,e)===!1)break}return!0},unbind:function(e,t){var n,r,i,s,o,u;if(!e)return this._callbacks={},this;i=(u=this._callbacks)!=null?u[e]:void 0;if(!i)return this;if(!t)return delete this._callbacks[e],this;for(r=s=0,o=i.length;s<o;r=++s){n=i[r];if(n!==t)continue;i=i.slice(),i.splice(r,1),this._callbacks[e]=i;break}return this}},i={trace:!0,logPrefix:"(App)",log:function(){var e;e=1<=arguments.length?p.call(arguments,0):[];if(!this.trace)return;return this.logPrefix&&e.unshift(this.logPrefix),typeof console!="undefined"&&console!==null&&typeof console.log=="function"&&console.log.apply(console,e),this}},h=["included","extended"],o=function(){function e(){typeof this.init=="function"&&this.init.apply(this,arguments)}return e.include=function(e){var t,n,r;if(!e)throw new Error("include(obj) requires obj");for(t in e)n=e[t],d.call(h,t)<0&&(this.prototype[t]=n);return(r=e.included)!=null&&r.apply(this),this},e.extend=function(e){var t,n,r;if(!e)throw new Error("extend(obj) requires obj");for(t in e)n=e[t],d.call(h,t)<0&&(this[t]=n);return(r=e.extended)!=null&&r.apply(this),this},e.proxy=function(e){var t=this;return function(){return e.apply(t,arguments)}},e.prototype.proxy=function(e){var t=this;return function(){return e.apply(t,arguments)}},e}(),s=function(t){function n(e){n.__super__.constructor.apply(this,arguments),e&&this.load(e),this.cid=this.constructor.uid("c-")}return m(n,t),n.extend(r),n.records={},n.crecords={},n.attributes=[],n.configure=function(){var e,t;return t=arguments[0],e=2<=arguments.length?p.call(arguments,1):[],this.className=t,this.records={},this.crecords={},e.length&&(this.attributes=e),this.attributes&&(this.attributes=c(this.attributes)),this.attributes||(this.attributes=[]),this.unbind(),this},n.toString=function(){return""+this.className+"("+this.attributes.join(", ")+")"},n.find=function(e){var t;t=this.records[e];if(!t&&(""+e).match(/c-\d+/))return this.findCID(e);if(!t)throw new Error("Unknown record");return t.clone()},n.findCID=function(e){var t;t=this.crecords[e];if(!t)throw new Error("Unknown record");return t.clone()},n.exists=function(e){try{return this.find(e)}catch(t){return!1}},n.refresh=function(e,t){var n,r,i,s;t==null&&(t={}),t.clear&&(this.records={},this.crecords={}),r=this.fromJSON(e),f(r)||(r=[r]);for(i=0,s=r.length;i<s;i++)n=r[i],n.id||(n.id=n.cid),this.records[n.id]=n,this.crecords[n.cid]=n;return this.trigger("refresh",this.cloneArray(r)),this},n.select=function(e){var t,n,r;return r=function(){var r,i;r=this.records,i=[];for(t in r)n=r[t],e(n)&&i.push(n);return i}.call(this),this.cloneArray(r)},n.findByAttribute=function(e,t){var n,r,i;i=this.records;for(n in i){r=i[n];if(r[e]===t)return r.clone()}return null},n.findAllByAttribute=function(e,t){return this.select(function(n){return n[e]===t})},n.each=function(e){var t,n,r,i;r=this.records,i=[];for(t in r)n=r[t],i.push(e(n.clone()));return i},n.all=function(){return this.cloneArray(this.recordsValues())},n.first=function(){var e;return e=this.recordsValues()[0],e!=null?e.clone():void 0},n.last=function(){var e,t;return t=this.recordsValues(),e=t[t.length-1],e!=null?e.clone():void 0},n.count=function(){return this.recordsValues().length},n.deleteAll=function(){var e,t,n,r;n=this.records,r=[];for(e in n)t=n[e],r.push(delete this.records[e]);return r},n.destroyAll=function(){var e,t,n,r;n=this.records,r=[];for(e in n)t=n[e],r.push(this.records[e].destroy());return r},n.update=function(e,t,n){return this.find(e).updateAttributes(t,n)},n.create=function(e,t){var n;return n=new this(e),n.save(t)},n.destroy=function(e,t){return this.find(e).destroy(t)},n.change=function(e){return typeof e=="function"?this.bind("change",e):this.trigger("change",e)},n.fetch=function(e){return typeof e=="function"?this.bind("fetch",e):this.trigger("fetch",e)},n.toJSON=function(){return this.recordsValues()},n.fromJSON=function(e){var t,n,r,i;if(!e)return;typeof e=="string"&&(e=JSON.parse(e));if(f(e)){i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(new this(t));return i}return new this(e)},n.fromForm=function(){var e;return(e=new this).fromForm.apply(e,arguments)},n.recordsValues=function(){var e,t,n,r;t=[],r=this.records;for(e in r)n=r[e],t.push(n);return t},n.cloneArray=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(t.clone());return i},n.idCounter=0,n.uid=function(e){var t;return e==null&&(e=""),t=e+this.idCounter++,this.exists(t)&&(t=this.uid(e)),t},n.prototype.isNew=function(){return!this.exists()},n.prototype.isValid=function(){return!this.validate()},n.prototype.validate=function(){},n.prototype.load=function(e){var t,n;for(t in e)n=e[t],typeof this[t]=="function"?this[t](n):this[t]=n;return this},n.prototype.attributes=function(){var e,t,n,r,i;t={},i=this.constructor.attributes;for(n=0,r=i.length;n<r;n++)e=i[n],e in this&&(typeof this[e]=="function"?t[e]=this[e]():t[e]=this[e]);return this.id&&(t.id=this.id),t},n.prototype.eql=function(e){return!!(e&&e.constructor===this.constructor&&e.cid===this.cid||e.id&&e.id===this.id)},n.prototype.save=function(e){var t,n;e==null&&(e={});if(e.validate!==!1){t=this.validate();if(t)return this.trigger("error",t),!1}return this.trigger("beforeSave",e),n=this.isNew()?this.create(e):this.update(e),this.trigger("save",e),n},n.prototype.updateAttribute=function(e,t,n){return this[e]=t,this.save(n)},n.prototype.updateAttributes=function(e,t){return this.load(e),this.save(t)},n.prototype.changeID=function(e){var t;return t=this.constructor.records,t[e]=t[this.id],delete t[this.id],this.id=e,this.save()},n.prototype.destroy=function(e){return e==null&&(e={}),this.trigger("beforeDestroy",e),delete this.constructor.records[this.id],delete this.constructor.crecords[this.cid],this.destroyed=!0,this.trigger("destroy",e),this.trigger("change","destroy",e),this.unbind(),this},n.prototype.dup=function(e){var t;return t=new this.constructor(this.attributes()),e===!1?t.cid=this.cid:delete t.id,t},n.prototype.clone=function(){return a(this)},n.prototype.reload=function(){var e;return this.isNew()?this:(e=this.constructor.find(this.id),this.load(e.attributes()),e)},n.prototype.toJSON=function(){return this.attributes()},n.prototype.toString=function(){return"<"+this.constructor.className+" ("+JSON.stringify(this)+")>"},n.prototype.fromForm=function(t){var n,r,i,s,o;r={},o=e(t).serializeArray();for(i=0,s=o.length;i<s;i++)n=o[i],r[n.name]=n.value;return this.load(r)},n.prototype.exists=function(){return this.id&&this.id in this.constructor.records},n.prototype.update=function(e){var t,n;return this.trigger("beforeUpdate",e),n=this.constructor.records,n[this.id].load(this.attributes()),t=n[this.id].clone(),t.trigger("update",e),t.trigger("change","update",e),t},n.prototype.create=function(e){var t,n;return this.trigger("beforeCreate",e),this.id||(this.id=this.cid),n=this.dup(!1),this.constructor.records[this.id]=n,this.constructor.crecords[this.cid]=n,t=n.clone(),t.trigger("create",e),t.trigger("change","create",e),t},n.prototype.bind=function(e,t){var n,r,i=this;return this.constructor.bind(e,n=function(e){if(e&&i.eql(e))return t.apply(i,arguments)}),this.constructor.bind("unbind",r=function(t){if(t&&i.eql(t))return i.constructor.unbind(e,n),i.constructor.unbind("unbind",r)}),n},n.prototype.one=function(e,t){var n,r=this;return n=this.bind(e,function(){return r.constructor.unbind(e,n),t.apply(r,arguments)})},n.prototype.trigger=function(){var e,t;return e=1<=arguments.length?p.call(arguments,0):[],e.splice(1,0,this),(t=this.constructor).trigger.apply(t,e)},n.prototype.unbind=function(){return this.trigger("unbind")},n}(o),t=function(t){function n(t){this.release=g(this.release,this);var r,i,s;this.options=t,s=this.options;for(r in s)i=s[r],this[r]=i;this.el||(this.el=document.createElement(this.tag)),this.el=e(this.el),this.$el=this.el,this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),this.events&&this.delegateEvents(this.events),this.elements&&this.refreshElements(),n.__super__.constructor.apply(this,arguments)}return m(n,t),n.include(r),n.include(i),n.prototype.eventSplitter=/^(\S+)\s*(.*)$/,n.prototype.tag="div",n.prototype.release=function(){return this.trigger("release"),this.el.remove(),this.unbind()},n.prototype.$=function(t){return e(t,this.el)},n.prototype.delegateEvents=function(e){var t,n,r,i,s,o,u=this;o=[];for(n in e){i=e[n];if(typeof i=="function")i=function(e){return function(){return e.apply(u,arguments),!0}}(i);else{if(!this[i])throw new Error(""+i+" doesn't exist");i=function(e){return function(){return u[e].apply(u,arguments),!0}}(i)}r=n.match(this.eventSplitter),t=r[1],s=r[2],s===""?o.push(this.el.bind(t,i)):o.push(this.el.delegate(s,t,i))}return o},n.prototype.refreshElements=function(){var e,t,n,r;n=this.elements,r=[];for(e in n)t=n[e],r.push(this[t]=this.$(e));return r},n.prototype.delay=function(e,t){return setTimeout(this.proxy(e),t||0)},n.prototype.html=function(e){return this.el.html(e.el||e),this.refreshElements(),this.el},n.prototype.append=function(){var e,t,n;return t=1<=arguments.length?p.call(arguments,0):[],t=function(){var n,r,i;i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(e.el||e);return i}(),(n=this.el).append.apply(n,t),this.refreshElements(),this.el},n.prototype.appendTo=function(e){return this.el.appendTo(e.el||e),this.refreshElements(),this.el},n.prototype.prepend=function(){var e,t,n;return t=1<=arguments.length?p.call(arguments,0):[],t=function(){var n,r,i;i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(e.el||e);return i}(),(n=this.el).prepend.apply(n,t),this.refreshElements(),this.el},n.prototype.replace=function(t){var n,r;return r=[this.el,e(t.el||t)],n=r[0],this.el=r[1],n.replaceWith(this.el),this.delegateEvents(this.events),this.refreshElements(),this.el},n}(o),e=(typeof window!="undefined"&&window!==null?window.jQuery:void 0)||(typeof window!="undefined"&&window!==null?window.Zepto:void 0)||function(e){return e},a=Object.create||function(e){var t;return t=function(){},t.prototype=e,new t},f=function(e){return Object.prototype.toString.call(e)==="[object Array]"},l=function(e){var t;if(!e)return!0;for(t in e)return!1;return!0},c=function(e){return Array.prototype.slice.call(e,0)},u=this.Spine={},typeof n!="undefined"&&n!==null&&(n.exports=u),u.version="1.0.8",u.isArray=f,u.isBlank=l,u.$=e,u.Events=r,u.Log=i,u.Module=o,u.Controller=t,u.Model=s,o.extend.call(u,r),o.create=o.sub=t.create=t.sub=s.sub=function(e,t){var n;return n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t}(this),e&&n.include(e),t&&n.extend(t),typeof n.unbind=="function"&&n.unbind(),n},s.setup=function(e,t){var n;return t==null&&(t=[]),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t}(this),n.configure.apply(n,[e].concat(p.call(t))),n},u.Class=o}).call(this)},"spine/lib/local":function(e,t,n){(function(){var e;e=this.Spine||t("spine"),e.Model.Local={extended:function(){return this.change(this.saveLocal),this.fetch(this.loadLocal)},saveLocal:function(){var e;return e=JSON.stringify(this),localStorage[this.className]=e},loadLocal:function(){var e;return e=localStorage[this.className],this.refresh(e||[],{clear:!0})}},typeof n!="undefined"&&n!==null&&(n.exports=e.Model.Local)}).call(this)},"spine/lib/ajax":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c=function(e,t){return function(){return e.apply(t,arguments)}},h={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d=[].slice;l=this.Spine||t("spine"),e=l.$,a=l.Model,r={getURL:function(e){return e&&(typeof e.url=="function"?e.url():void 0)||e.url},enabled:!0,pending:!1,requests:[],disable:function(e){if(!this.enabled)return e();this.enabled=!1;try{return e()}catch(t){throw t}finally{this.enabled=!0}},requestNext:function(){var e;return e=this.requests.shift(),e?this.request(e):this.pending=!1},request:function(e){var t=this;return e().complete(function(){return t.requestNext()})},queue:function(e){if(!this.enabled)return;return this.pending?this.requests.push(e):(this.pending=!0,this.request(e)),e}},i=function(){function t(){}return t.prototype.defaults={contentType:"application/json",dataType:"json",processData:!1,headers:{"X-Requested-With":"XMLHttpRequest"}},t.prototype.ajax=function(t,n){return e.ajax(e.extend({},this.defaults,n,t))},t.prototype.queue=function(e){return r.queue(e)},t}(),s=function(e){function t(e){this.model=e,this.errorResponse=c(this.errorResponse,this),this.recordsResponse=c(this.recordsResponse,this)}return p(t,e),t.prototype.find=function(e,t){var n;return n=new this.model({id:e}),this.ajax(t,{type:"GET",url:r.getURL(n)}).success(this.recordsResponse).error(this.errorResponse)},t.prototype.all=function(e){return this.ajax(e,{type:"GET",url:r.getURL(this.model)}).success(this.recordsResponse).error(this.errorResponse)},t.prototype.fetch=function(e,t){var n,r=this;return e==null&&(e={}),t==null&&(t={}),(n=e.id)?(delete e.id,this.find(n,e).success(function(e){return r.model.refresh(e,t)})):this.all(e).success(function(e){return r.model.refresh(e,t)})},t.prototype.recordsResponse=function(e,t,n){return this.model.trigger("ajaxSuccess",null,t,n)},t.prototype.errorResponse=function(e,t,n){return this.model.trigger("ajaxError",null,e,t,n)},t}(i),f=function(e){function t(e){this.record=e,this.errorResponse=c(this.errorResponse,this),this.recordResponse=c(this.recordResponse,this),this.model=this.record.constructor}return p(t,e),t.prototype.reload=function(e,t){var n=this;return this.queue(function(){return n.ajax(e,{type:"GET",url:r.getURL(n.record)}).success(n.recordResponse(t)).error(n.errorResponse(t))})},t.prototype.create=function(e,t){var n=this;return this.queue(function(){return n.ajax(e,{type:"POST",data:JSON.stringify(n.record),url:r.getURL(n.model)}).success(n.recordResponse(t)).error(n.errorResponse(t))})},t.prototype.update=function(e,t){var n=this;return this.queue(function(){return n.ajax(e,{type:"PUT",data:JSON.stringify(n.record),url:r.getURL(n.record)}).success(n.recordResponse(t)).error(n.errorResponse(t))})},t.prototype.destroy=function(e,t){var n=this;return this.queue(function(){return n.ajax(e,{type:"DELETE",url:r.getURL(n.record)}).success(n.recordResponse(t)).error(n.errorResponse(t))})},t.prototype.recordResponse=function(e){var t=this;return e==null&&(e={}),function(n,i,s){var o;return l.isBlank(n)?n=!1:n=t.model.fromJSON(n),r.disable(function(){if(n)return n.id&&t.record.id!==n.id&&t.record.changeID(n.id),t.record.updateAttributes(n.attributes())}),t.record.trigger("ajaxSuccess",n,i,s),(o=e.success)!=null?o.apply(t.record):void 0}},t.prototype.errorResponse=function(e){var t=this;return e==null&&(e={}),function(n,r,i){var s;return t.record.trigger("ajaxError",n,r,i),(s=e.error)!=null?s.apply(t.record):void 0}},t}(i),a.host="",u={ajax:function(){return new f(this)},url:function(){var e,t;return e=1<=arguments.length?d.call(arguments,0):[],t=r.getURL(this.constructor),t.charAt(t.length-1)!=="/"&&(t+="/"),t+=encodeURIComponent(this.id),e.unshift(t),e.join("/")}},o={ajax:function(){return new s(this)},url:function(){var e;return e=1<=arguments.length?d.call(arguments,0):[],e.unshift(this.className.toLowerCase()+"s"),e.unshift(a.host),e.join("/")}},a.Ajax={extended:function(){return this.fetch(this.ajaxFetch),this.change(this.ajaxChange),this.extend(o),this.include(u)},ajaxFetch:function(){var e;return(e=this.ajax()).fetch.apply(e,arguments)},ajaxChange:function(e,t,n){n==null&&(n={});if(n.ajax===!1)return;return e.ajax()[t](n.ajax,n)}},a.Ajax.Methods={extended:function(){return this.extend(o),this.include(u)}},r.defaults=i.prototype.defaults,l.Ajax=r,typeof n!="undefined"&&n!==null&&(n.exports=r)}).call(this)},"spine/lib/route":function(e,t,n){(function(){var e,r,i,s,o,u,a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l=[].slice;r=this.Spine||t("spine"),e=r.$,s=/^#*/,o=/:([\w\d]+)/g,u=/\*([\w\d]+)/g,i=/[-[\]{}()+?.,\\^$|#\s]/g,r.Route=function(t){function a(e,t){var n;this.path=e,this.callback=t,this.names=[];if(typeof e=="string"){o.lastIndex=0;while((n=o.exec(e))!==null)this.names.push(n[1]);u.lastIndex=0;while((n=u.exec(e))!==null)this.names.push(n[1]);e=e.replace(i,"\\$&").replace(o,"([^/]*)").replace(u,"(.*?)"),this.route=new RegExp("^"+e+"$")}else this.route=e}var n;return f(a,t),a.extend(r.Events),a.historySupport=((n=window.history)!=null?n.pushState:void 0)!=null,a.routes=[],a.options={trigger:!0,history:!1,shim:!1},a.add=function(e,t){var n,r,i;if(typeof e!="object"||e instanceof RegExp)return this.routes.push(new this(e,t));i=[];for(n in e)r=e[n],i.push(this.add(n,r));return i},a.setup=function(t){t==null&&(t={}),this.options=e.extend({},this.options,t),this.options.history&&(this.history=this.historySupport&&this.options.history);if(this.options.shim)return;return this.history?e(window).bind("popstate",this.change):e(window).bind("hashchange",this.change),this.change()},a.unbind=function(){return this.history?e(window).unbind("popstate",this.change):e(window).unbind("hashchange",this.change)},a.navigate=function(){var t,n,r,i;t=1<=arguments.length?l.call(arguments,0):[],r={},n=t[t.length-1],typeof n=="object"?r=t.pop():typeof n=="boolean"&&(r.trigger=t.pop()),r=e.extend({},this.options,r),i=t.join("/");if(this.path===i)return;this.path=i,this.trigger("navigate",this.path),r.trigger&&this.matchRoute(this.path,r);if(r.shim)return;return this.history?history.pushState({},document.title,this.path):window.location.hash=this.path},a.getPath=function(){var e;return e=window.location.pathname,e.substr(0,1)!=="/"&&(e="/"+e),e},a.getHash=function(){return window.location.hash},a.getFragment=function(){return this.getHash().replace(s,"")},a.getHost=function(){return(document.location+"").replace(this.getPath()+this.getHash(),"")},a.change=function(){var e;e=this.getFragment()!==""?this.getFragment():this.getPath();if(e===this.path)return;return this.path=e,this.matchRoute(this.path)},a.matchRoute=function(e,t){var n,r,i,s;s=this.routes;for(r=0,i=s.length;r<i;r++){n=s[r];if(n.match(e,t))return this.trigger("change",n,e),n}},a.prototype.match=function(e,t){var n,r,i,s,o,u;t==null&&(t={}),r=this.route.exec(e);if(!r)return!1;t.match=r,s=r.slice(1);if(this.names.length)for(n=o=0,u=s.length;o<u;n=++o)i=s[n],t[this.names[n]]=i;return this.callback.call(null,t)!==!1},a}(r.Module),r.Route.change=r.Route.proxy(r.Route.change),r.Controller.include({route:function(e,t){return r.Route.add(e,this.proxy(t))},routes:function(e){var t,n,r;r=[];for(t in e)n=e[t],r.push(this.route(t,n));return r},navigate:function(){return r.Route.navigate.apply(r.Route,arguments)}}),typeof n!="undefined"&&n!==null&&(n.exports=r.Route)}).call(this)},"spine/lib/manager":function(e,t,n){(function(){var e,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o=[].slice;r=this.Spine||t("spine"),e=r.$,r.Manager=function(e){function t(){this.controllers=[],this.bind("change",this.change),this.add.apply(this,arguments)}return s(t,e),t.include(r.Events),t.prototype.add=function(){var e,t,n,r,i;t=1<=arguments.length?o.call(arguments,0):[],i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(this.addOne(e));return i},t.prototype.addOne=function(e){var t=this;return e.bind("active",function(){var n;return n=1<=arguments.length?o.call(arguments,0):[],t.trigger.apply(t,["change",e].concat(o.call(n)))}),e.bind("release",function(){return t.controllers.splice(t.controllers.indexOf(e),1)}),this.controllers.push(e)},t.prototype.deactivate=function(){return this.trigger.apply(this,["change",!1].concat(o.call(arguments)))},t.prototype.change=function(){var e,t,n,r,i,s,u;n=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],s=this.controllers,u=[];for(r=0,i=s.length;r<i;r++)t=s[r],t===n?u.push(t.activate.apply(t,e)):u.push(t.deactivate.apply(t,e));return u},t}(r.Module),r.Controller.include({active:function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],typeof e[0]=="function"?this.bind("active",e[0]):(e.unshift("active"),this.trigger.apply(this,e)),this},isActive:function(){return this.el.hasClass("active")},activate:function(){return this.el.addClass("active"),this},deactivate:function(){return this.el.removeClass("active"),this}}),r.Stack=function(e){function t(){var e,n,i,s,o,u=this;t.__super__.constructor.apply(this,arguments),this.manager=new r.Manager,s=this.controllers;for(e in s)n=s[e],this[e]=new n({stack:this}),this.add(this[e]);o=this.routes,i=function(e,t){var n;return typeof t=="function"&&(n=t),n||(n=function(){var e;return(e=u[t]).active.apply(e,arguments)}),u.route(e,n)};for(e in o)n=o[e],i(e,n);this["default"]&&this[this["default"]].active()}return s(t,e),t.prototype.controllers={},t.prototype.routes={},t.prototype.className="spine stack",t.prototype.add=function(e){return this.manager.add(e),this.append(e)},t}(r.Controller),typeof n!="undefined"&&n!==null&&(n.exports=r.Manager),typeof n!="undefined"&&n!==null&&(n.exports.Stack=r.Stack)}).call(this)},"zooniverse/index":function(e,t,n){n.exports=t("./lib/zooniverse"),e.Api=t("./lib/api"),e.Dialog=t("./lib/dialog"),e.Message=t("./lib/message"),e.ProxyFrame=t("./lib/proxy_frame"),e.googleAnalytics=t("./lib/google_analytics"),e.LoginForm=t("./lib/controllers/login_form"),e.BrowserCheck=t("./lib/controllers/browser_check"),e.User=t("./lib/models/user")},"zooniverse/lib/zooniverse":function(e,t,n){(function(){var e;e={Config:{}},n.exports=e}).call(this)},"zooniverse/lib/api":function(e,t,n){(function(){var e,r,i,s,o=[].slice;e=t("jqueryify"),s=t("./proxy_frame"),i=t("./message"),r={messages:{},ready:!1,proxy:void 0,get:function(){return r.request.apply(r,["get"].concat(o.call(arguments)))},getJSON:function(){return r.request.apply(r,["getJSON"].concat(o.call(arguments)))},post:function(){return r.request.apply(r,["post"].concat(o.call(arguments)))},put:function(){return r.request.apply(r,["put"].concat(o.call(arguments)))},"delete":function(){return r.request.apply(r,["delete"].concat(o.call(arguments)))},init:function(t){t==null&&(t={});if(r.proxy)return;return t=e.extend({host:""+window.location.protocol+"//"+window.location.host,proxyPath:"/proxy"},t),r.host=t.host,r.proxy=new s(r.host,t.proxyPath),r.proxy.bind("load",r.loaded),r.proxy.bind("response",r.respond)},loaded:function(){var e,t,n,i;r.ready=!0,n=r.messages,i=[];for(e in n)t=n[e],t.sent||i.push(r.process(e));return i},request:function(e,t,n,s,o){var u,a;return u=r.nextId(),typeof n=="function"&&(o=s,s=n,n=null),a=new i({id:u,type:e,url:t,data:n},r.proxy),s&&a.onSuccess(s),o&&a.onFailure(o),r.messages[u]=a,r.ready&&r.process(u),a},respond:function(e,t){var n;return n=r.messages[t.id],t.failure?n.fail(t.response):n.succeed(t.response),delete r.messages[t.id]},process:function(e){return r.proxy.send(r.messages[e])},idCounter:0,nextId:function(){return"api-"+this.idCounter++}},n.exports=r}).call(this)},"zooniverse/lib/proxy_frame":function(e,t,n){(function(){var e,r,i=function(e,t){return function(){return e.apply(t,arguments)}};e=t("jqueryify"),r=function(){function t(t,n){this.host=t,this.path=n!=null?n:"/proxy",this.receive=i(this.receive,this),this.send=i(this.send,this),this.postMessage=i(this.postMessage,this),this.appended=i(this.appended,this),this.elFrame=i(this.elFrame,this),this.append(),e(window).on("message",this.receive)}return t.headers={},t.prototype.el=function(){return e("#api-proxy-frame")},t.prototype.elFrame=function(){return this.el()[0]},t.prototype.appended=function(){return this.elFrame()!=null},t.prototype.append=function(){if(this.appended())return;return e("body").append(this.html())},t.prototype.html=function(){return e("<iframe></iframe>").attr("id","api-proxy-frame").attr("src",""+this.host+this.path).css("display","none")},t.prototype.bind=function(e,t){return this.el().on(e,t)},t.prototype.postMessage=function(e){return this.elFrame().contentWindow.postMessage(JSON.stringify(e),this.host)},t.prototype.send=function(n){var r;return r=n.payload,r.headers=e.extend({},t.headers,{"X-Zooniverse-Hash":window.location.pathname+window.location.hash}),this.postMessage(r)},t.prototype.receive=function(e){var t,n;t=e.originalEvent;if(t.origin!==this.host)return;n=JSON.parse(t.data);if(n.id!=="READY")return this.el().trigger("response",n)},t}(),n.exports=r}).call(this)},"zooniverse/lib/message":function(e,t,n){(function(){var e,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s=[].slice;e=t("jqueryify"),r=function(){function t(t,n){this.payload=t,this.proxy=n,this.tapped=i(this.tapped,this),this.isDelivered=i(this.isDelivered,this),this.project=i(this.project,this),this.fail=i(this.fail,this),this.succeed=i(this.succeed,this),this.onFailure=i(this.onFailure,this),this.onSuccess=i(this.onSuccess,this),this.always=i(this.always,this),this.send=i(this.send,this),this.sent=!1,this.deferred=new e.Deferred}return t.prototype.send=function(){return this.sent=!0,this.proxy.send(this),this},t.prototype.always=function(e){return this.tapped("always",e)},t.prototype.onSuccess=function(e){return this.tapped("done",e)},t.prototype.onFailure=function(e){return this.tapped("fail",e)},t.prototype.succeed=function(e){return this.tapped("resolve",e)},t.prototype.fail=function(e){return this.tapped("reject",e)},t.prototype.project=function(e){return this.tapped("pipe",e)},t.prototype.isDelivered=function(){return this.deferred.isResolved()},t.prototype.tapped=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],(n=this.deferred)[t].apply(n,e),this},t}(),n.exports=r}).call(this)},"zooniverse/lib/dialog":function(e,t,n){(function(){var e,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty;e=t("jqueryify"),r=function(){function t(t){var n,r,o,u,a,f=this;t==null&&(t={}),this.destroy=i(this.destroy,this),this.close=i(this.close,this),this.reattach=i(this.reattach,this),this.attach=i(this.attach,this),this.open=i(this.open,this),this.render=i(this.render,this);for(o in t){if(!s.call(t,o))continue;u=t[o],this[o]=u}(a=this.buttons)==null&&(this.buttons=[new this.constructor.Button({label:"OK",value:!0})]),r=this.constructor.prototype.className,this.el=e('<div class="'+r+'-underlay">\n  <div class="'+r+'">\n    <button name="close" class="'+r+'-closer">&times;</button>\n    <header></header>\n    <div class="'+r+'-content"></div>\n    <footer></footer>\n    <div class="'+r+'-arrow" data-direction="'+this.arrowDirection+'"></div>\n  </div>\n</div>'),this.dialog=this.el.children("."+r),this.contentContainer=this.dialog.children("."+r+"-content"),this.arrow=this.dialog.children("."+r+"-arrow"),n=this.dialog.children("."+r+"-closer"),this.el.on("click",function(t){var r;r=t.target,r=e(r);if(r.is(f.el)&&f.buttons.length===0||r.is(n))return f.deferred.resolve()}),this.render(),this.el.appendTo("body"),this.openImmediately&&this.open(),e(window).on("resize",this.reattach)}return t.Button=function(){function t(t){var n,r,i,o=this;t==null&&(t={});for(n in t){if(!s.call(t,n))continue;r=t[n],this[n]=r}(i=this.el)==null&&(this.el=e("<"+this.tag+" class='"+this.className+"'>"+this.label+"</"+this.tag+">")),this.el.on("click",function(){var e;return typeof (e=o.dialog).callback=="function"&&e.callback(o.value),o.dialog.deferred.resolve(o.value),typeof o.onClick=="function"?o.onClick():void 0})}return t.prototype.label="OK",t.prototype.value=null,t.prototype.tag="button",t.prototype.className="dialog-button",t.prototype.dialog=null,t.prototype.el=null,t.prototype.onClick=function(){},t}(),t.prototype.title="",t.prototype.content="<p>Lorem ipsum dolor sit amet.</p>",t.prototype.buttons=null,t.prototype.attachment=null,t.prototype.openImmediately=!1,t.prototype.destroyOnClose=!1,t.prototype.callback=null,t.prototype.className="dialog",t.prototype.arrowDirection="",t.prototype.margin=15,t.prototype.el=null,t.prototype.dialog=null,t.prototype.contentContainer=null,t.prototype.deferred=null,t.prototype.promise=null,t.prototype.render=function(){var e,t,n,r,i,o,u,a;this.el.find("header").html(this.title),this.contentContainer.append(this.content),this.el.find("footer").empty(),u=this.buttons,a=[];for(t=i=0,o=u.length;i<o;t=++i){e=u[t];if(!(e instanceof this.constructor.Button))for(n in e){if(!s.call(e,n))continue;r=e[n],this.buttons[t]=new this.constructor.Button({label:n,value:r})}this.buttons[t].dialog=this,a.push(this.buttons[t].el.appendTo(this.el.find("footer")))}return a},t.prototype.open=function(){return this.el.addClass("open"),this.attach(),this.deferred=new e.Deferred,this.deferred.then(this.close),this.promise=this.deferred.promise()},t.prototype.attach=function(t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;this.attachment=t!=null?t:this.attachment;if(!this.el.hasClass("open"))return;(v=this.attachment)==null&&(this.attachment={}),(m=(f=this.attachment).x)==null&&(f.x="center"),(g=(l=this.attachment).y)==null&&(l.y="middle"),(y=(c=this.attachment).to)==null&&(c.to="body"),(b=(h=this.attachment).at)==null&&(h.at={}),(w=(p=this.attachment.at).x)==null&&(p.x="center"),(E=(d=this.attachment.at).y)==null&&(d.y="middle"),this.arrowDirection=this.attachment.arrowDirection||"",u={left:0,center:.5,right:1},a={top:0,middle:.5,bottom:1},this.attachment.x in u&&(this.attachment.x=u[this.attachment.x]),this.attachment.y in a&&(this.attachment.y=a[this.attachment.y]),this.attachment.at.x in u&&(this.attachment.at.x=u[this.attachment.at.x]),this.attachment.at.y in a&&(this.attachment.at.y=a[this.attachment.at.y]),i=e(this.attachment.to).filter(":visible").first();if(i.length===0)return;return o={width:i.outerWidth(),height:i.outerHeight()},s=i.offset(),r={width:this.dialog.outerWidth(),height:this.dialog.outerHeight()},n={left:s.left-r.width*this.attachment.x+o.width*this.attachment.at.x,top:s.top-r.height*this.attachment.y+o.height*this.attachment.at.y},this.dialog.css({position:"absolute"}),this.dialog.offset(n),this.arrow.attr("data-direction",this.arrowDirection),this.dialog.css({marginLeft:function(){switch(this.arrowDirection){case"left":return+this.margin;case"right":return-this.margin;default:return""}}.call(this)}),this.dialog.css({marginTop:function(){switch(this.arrowDirection){case"top":return+this.margin;case"bottom":return-this.margin;default:return""}}.call(this)})},t.prototype.reattach=function(){return this.attach(this.attachment)},t.prototype.close=function(){var e=this;return this.el.removeClass("open"),this.deferred=null,this.promise=null,setTimeout(function(){if(e.destroyOnClose)return e.destroy()})},t.prototype.destroy=function(){return this.el.remove()},t}(),n.exports=r}).call(this)},"zooniverse/lib/google_analytics":function(e,t,n){(function(){var e,r,i,s,o=this;e=t("jqueryify"),r="http://www.google-analytics.com/ga.js",window.location.protocol==="https:"&&(r=r.replace("http://www","https://ssl")),i=function(t,n){var i,o,u;return i=t.account,o=t.domain,n==null&&(n=!0),(u=window._gaq)==null&&(window._gaq=[]),window._gaq.push(["_setAccount",i]),o&&window._gaq.push(["_setDomainName",o]),window._gaq.push(["_trackPageview"]),n&&e(window).on("hashchange",s),e.getScript(r)},s=function(e){return typeof e!="string"&&(e=null),window._gaq.push(["_trackPageview",e||window.location.href])},n.exports={init:i,track:s}}).call(this)},"zooniverse/lib/controllers/login_form":function(e,t,n){(function(){var e,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("jqueryify"),r=t("./controller"),i=t("./base_form"),o=t("../models/user"),u=t("../views/login_form"),s=function(t){function n(){this.onSignIn=a(this.onSignIn,this),this.reset=a(this.reset,this),this.signUp=a(this.signUp,this),this.signIn=a(this.signIn,this),n.__super__.constructor.apply(this,arguments),this.html(u.login),this.signInForm=new i.SignInForm({el:this.signInContainer}),this.signUpForm=new i.SignUpForm({el:this.signUpContainer}),this.signInForms=e().add(this.signInContainer.add(this.signUpContainer.add(this.resetContainer))),this.signOutForm=new i.SignOutForm({el:this.signOutContainer}),o.bind("sign-in",this.onSignIn),this.onSignIn()}return l(n,t),n.prototype.className="zooniverse-login-form",n.prototype.events={'click button[name="sign-in"]':"signIn",'click button[name="sign-up"]':"signUp",'click button[name="reset"]':"reset"},n.prototype.elements={".sign-in":"signInContainer",".sign-up":"signUpContainer",".reset":"resetContainer",".picker":"signInPickers",'button[name="sign-in"]':"signInButton",'button[name="sign-up"]':"signUpButton",'button[name="reset"]':"resetButton",".picker button":"pickerButtons",".sign-out":"signOutContainer"},n.prototype.signIn=function(){return this.signInForms.hide(),this.signInContainer.show(),this.pickerButtons.show(),this.signInButton.hide()},n.prototype.signUp=function(){return this.signInForms.hide(),this.signUpContainer.show(),this.pickerButtons.show(),this.signUpButton.hide()},n.prototype.reset=function(){return this.signInForms.hide(),this.resetContainer.show(),this.pickerButtons.show(),this.resetButton.hide()},n.prototype.onSignIn=function(){return o.current?(this.el.addClass("signed-in"),this.signInForms.hide(),this.signInPickers.hide(),this.signOutContainer.show()):(this.el.removeClass("signed-in"),this.signIn(),this.signInPickers.show(),this.signOutContainer.hide())},n}(r),n.exports=s}).call(this)},"zooniverse/lib/controllers/controller":function(e,t,n){(function(){var e,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("spine"),e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t}(r.Controller),n.exports=e}).call(this)},"zooniverse/lib/controllers/base_form":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("jqueryify"),a=t("../models/user"),i=t("./controller"),f=t("../views/login_form"),r=function(e){function t(){this.onSignIn=l(this.onSignIn,this),this.onInputChange=l(this.onInputChange,this),this.onError=l(this.onError,this),this.onSubmit=l(this.onSubmit,this),t.__super__.constructor.apply(this,arguments),this.html(this.template),a.bind("sign-in",this.onSignIn),a.bind("sign-in-error",this.onError),this.onSignIn(),this.onInputChange()}return h(t,e),t.prototype.events={submit:"onSubmit",keydown:"onInputChange",change:"onInputChange"},t.prototype.elements={".errors":"errors",'input[name="username"]':"usernameField",'input[name="email"]':"emailField",'input[name="password"]':"passwordField",'input[name="password-confirm"]':"passwordConfirmField",'input[name="policy"]':"submitButton",'button[type="submit"]':"submitButton",".progress":"progress","input[required]":"requiredInputs"},t.prototype.onSubmit=function(e){return e&&e.preventDefault(),this.errors.hide(),this.errors.empty(),this.progress.show()},t.prototype.onError=function(e){return this.progress.hide(),this.errors.append(e),this.errors.show()},t.prototype.onInputChange=function(){var e=this;return setTimeout(function(){var t;return t=Array.prototype.every.call(e.requiredInputs,function(e){return e.type==="checkbox"?e.checked:!!e.value}),e.submitButton.attr({disabled:!t})})},t.prototype.onSignIn=function(){return this.progress.hide()},t}(i),s=function(e){function t(){return this.onSubmit=l(this.onSubmit,this),t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="sign-in",t.prototype.template=f.signIn,t.prototype.onSubmit=function(){var e;return t.__super__.onSubmit.apply(this,arguments),e=a.login({username:this.usernameField.val(),password:this.passwordField.val()})},t}(r),u=function(e){function t(){return this.onSubmit=l(this.onSubmit,this),t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="sign-up",t.prototype.template=f.signUp,t.prototype.onSubmit=function(){var e;t.__super__.onSubmit.apply(this,arguments);if(this.passwordField.val()!==this.passwordConfirmField.val()){this.onError("Passwords must match!"),this.passwordField.focus();return}return e=a.signup({username:this.usernameField.val(),password:this.passwordField.val(),email:this.emailField.val()})},t}(r),o=function(e){function t(){return this.onSignIn=l(this.onSignIn,this),this.onSubmit=l(this.onSubmit,this),t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="sign-out",t.prototype.template=f.signOut,t.prototype.onSubmit=function(){return t.__super__.onSubmit.apply(this,arguments),a.logout()},t.prototype.onSignIn=function(){var e;return t.__super__.onSignIn.apply(this,arguments),this.el.find(".current").html(((e=a.current)!=null?e.name:void 0)||"")},t}(r),n.exports={BaseForm:r,SignInForm:s,SignUpForm:u,SignOutForm:o}}).call(this)},"zooniverse/lib/models/user":function(e,t,n){(function(){var e,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("../api"),r=t("../proxy_frame"),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return o(n,t),n.configure("User"),n.project="Not Specified",n.fetch=function(){var t,r=this;return t=e.getJSON("/projects/"+this.project+"/current_user",this.createUser),t.always(this.setAuthHeaders),t.always(function(){return n.trigger("sign-in")}),t},n.setAuthHeaders=function(){var e;return n.current?(e=base64.encode(""+n.current.name+":"+n.current.api_key),r.headers.Authorization="Basic "+e):delete r.headers.Authorization},n.login=function(t){var r,i,s,o=this;return s=t.username,i=t.password,r=e.getJSON("/projects/"+this.project+"/login",{username:s,password:i},this.createUser),r.always(this.setAuthHeaders),r.always(function(){return n.trigger("sign-in")}),r},n.logout=function(){var t,r=this;return t=e.getJSON("/projects/"+this.project+"/logout",function(e){if(e.success)return n.current=null}),t.always(this.setAuthHeaders),t.always(function(){return n.trigger("sign-in")}),t},n.signup=function(t){var r,i,s,o,u=this;return o=t.username,i=t.password,r=t.email,s=e.getJSON("/projects/"+this.project+"/signup",{username:o,email:r,password:i},this.createUser),s.always(this.setAuthHeaders),s.always(function(){return n.trigger("sign-in")}),s},n.createUser=function(e){return n.current=e.success?(delete e.success,new n(e)):(n.trigger("sign-in-error",e.message),null)},n}(Spine.Model),n.exports=i}).call(this)},"zooniverse/lib/views/login_form":function(e,t,n){(function(){n.exports={signIn:'<p class="title">Sign in with your Zooniverse account</p>\n<p class="errors"></p>\n<form>\n  <label><span>Username</span> <input type="text" name="username" required="required" /></label>\n  <label><span>Password</span> <input type="password" name="password" required="required" /></label>\n  <button type="submit">Sign in</button>\n</form>\n<p class="progress">Signing in...</p>',signUp:'<p class="title">Sign up for a new Zooniverse account</p>\n<p class="errors"></p>\n<form>\n  <label><span>Username</span> <input type="text" name="username" required="required" /></label>\n  <label><span>Email address</span> <input type="text" name="email" required="required" /></label>\n  <label><span>Password</span> <input type="password" name="password" required="required" /></label>\n  <label><span>Password (confirm)</span> <input type="password" name="password-confirm" required="required" /></label>\n  <label class="privacy-policy"><input type="checkbox" name="policy" required="required" /> I agree to the <a href="https://www.zooniverse.org/privacy" target="_blank">privacy policy</a></label>\n  <button type="submit">Sign up</button>\n</form>\n<p class="progress">Creating account and signing in...</p>',reset:'<p>Enter your <strong>username</strong> or <strong>email address</strong> and we\'ll send you instructions on how to reset your password</p>\n<p class="errors"></p>\n<form>\n  <label><input type="text" name="email" required="required" /></label>\n  <button type="submit">Submit</button>\n</form>\n<p class="progress">Check your email for instructions!</p>',signOut:'<form>\n  <p>Currently logged in as <strong class="current"></strong>. <button type="submit">Sign out</button></p>\n</form>\n<p class="progress">Signing out...</p>',login:'<div class="sign-in"></div>\n<div class="sign-up"></div>\n<div class="reset"></div>\n\n<div class="picker">\n  <button name="sign-in">Already have an account? Sign in!</button>\n  <button name="sign-up">Don\'t have an account? Create one!</button>\n  <!--<button name="reset">Forgot your username or password?</button>-->\n</div>\n\n<div class="sign-out"></div>'}}).call(this)},"zooniverse/lib/controllers/browser_check":function(e,t,n){(function(){var e,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty;e=t("jqueryify"),r=function(){function t(t){var n,r,o;t==null&&(t={}),this.dismiss=i(this.dismiss,this);for(n in t){if(!s.call(t,n))continue;r=t[n],this[n]=r}(o=this.el)==null&&(this.el=e(this.view)),this.el.on("click",'button[name="dismiss"]',this.dismiss)}return t.prototype.view='<div class="zooniverse-browser-warning">\n  <section>\n    <div class="summary">\n      <p>This site probably won\'t work until you update your browser.</p>\n    </div>\n\n    <div class="recommend">\n      <p>We recommend using <a href="http://www.mozilla.org/firefox/" target="_blank">Mozilla Firefox</a> or <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a>.</p>\n    </div>\n\n    <div class="ie">\n      <p>If you use <a href="http://www.microsoft.com/windows/internet-explorer/" target="_blank">Microsoft Internet Explorer</a>, make sure you\'re running the latest version.</p>\n      <p>If you can\'t install the latest Internet Explorer, try <a href="http://google.com/chromeframe" target="_blank">Chrome Frame</a>!</p>\n    </div>\n\n    <div class="action">\n      <p><button name="dismiss">Dismiss</button></p>\n    </div>\n  </section>\n</div>',t.prototype.support={mozilla:14,msie:8,webkit:530,opera:Infinity},t.prototype.check=function(){if(!this.supported())return this.warn()},t.prototype.supported=function(){var t,n,r;r=parseFloat(e.browser.version);for(n in e.browser)n in this.support&&(t=this.support[n]);return r>=t},t.prototype.warn=function(){return this.el.appendTo("body")},t.prototype.dismiss=function(){return this.el.remove()},t}(),n.exports=r}).call(this)},"moment/moment":function(e,t,n){(function(e){function _(e,t,n,r){var i=n.lang();return i[e].call?i[e](n,r):i[e][t]}function D(e,t){return function(n){return F(e.call(this,n),t)}}function P(e){return function(t){var n=e.call(this,t);return n+this.lang().ordinal(n)}}function H(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,this._lang=n||!1}function B(e){var t=this._data={},n=e.years||e.y||0,r=e.months||e.M||0,i=e.weeks||e.w||0,s=e.days||e.d||0,o=e.hours||e.h||0,u=e.minutes||e.m||0,a=e.seconds||e.s||0,f=e.milliseconds||e.ms||0;this._milliseconds=f+a*1e3+u*6e4+o*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=f%1e3,a+=j(f/1e3),t.seconds=a%60,u+=j(a/60),t.minutes=u%60,o+=j(u/60),t.hours=o%24,s+=j(o/24),s+=i*7,t.days=s%30,r+=j(s/30),t.months=r%12,n+=j(r/12),t.years=n,this._lang=!1}function j(e){return e<0?Math.ceil(e):Math.floor(e)}function F(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function I(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function q(e){return Object.prototype.toString.call(e)==="[object Array]"}function R(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function U(e,t,n,r){var i,s,o=[];for(i=0;i<7;i++)o[i]=e[i]=e[i]==null?i===2?1:0:e[i];return e[7]=o[7]=t,e[8]!=null&&(o[8]=e[8]),e[3]+=n||0,e[4]+=r||0,s=new Date(0),t?(s.setUTCFullYear(e[0],e[1],e[2]),s.setUTCHours(e[3],e[4],e[5],e[6])):(s.setFullYear(e[0],e[1],e[2]),s.setHours(e[3],e[4],e[5],e[6])),s._a=o,s}function z(e,n){var i,s,o=[];!n&&f&&(n=t("./lang/"+e));for(i=0;i<l.length;i++)n[l[i]]=n[l[i]]||u.en[l[i]];for(i=0;i<12;i++)s=r([2e3,i]),o[i]=new RegExp("^"+(n.months[i]||n.months(s,""))+"|^"+(n.monthsShort[i]||n.monthsShort(s,"")).replace(".",""),"i");return n.monthsParse=n.monthsParse||o,u[e]=n,n}function W(e){var t=typeof e=="string"&&e||e&&e._lang||null;return t?u[t]||z(t):r}function X(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t=e.match(h),n,r;for(n=0,r=t.length;n<r;n++)M[t[n]]?t[n]=M[t[n]]:t[n]=X(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=typeof t[n].call=="function"?t[n].call(i,e):t[n];return s}}function $(e,t){function r(t){return e.lang().longDateFormat[t]||t}var n=5;while(n--&&p.test(t))t=t.replace(p,r);return L[t]||(L[t]=V(t)),L[t](e)}function J(e){switch(e){case"DDDD":return g;case"YYYY":return y;case"S":case"SS":case"SSS":case"DDD":return m;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return b;case"Z":case"ZZ":return w;case"T":return E;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return v;default:return new RegExp(e.replace("\\",""))}}function K(e,t,n,r){var i,s;switch(e){case"M":case"MM":n[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++)if(W().monthsParse[i].test(t)){n[1]=i,s=!0;break}s||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(n[2]=~~t);break;case"YY":n[0]=~~t+(~~t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":r.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":r.isUTC=!0,i=(t+"").match(N),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&i[0]==="+"&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}t==null&&(n[8]=!1)}function Q(e,t){var n=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},i=t.match(h),s,o;for(s=0;s<i.length;s++)o=(J(i[s]).exec(e)||[])[0],o&&(e=e.slice(e.indexOf(o)+o.length)),M[i[s]]&&K(i[s],o,n,r);return r.isPm&&n[3]<12&&(n[3]+=12),r.isPm===!1&&n[3]===12&&(n[3]=0),U(n,r.isUTC,r.tzh,r.tzm)}function G(e,t){var n,r=e.match(d)||[],i,s=99,o,u,a;for(o=0;o<t.length;o++)u=Q(e,t[o]),i=$(new H(u),t[o]).match(d)||[],a=R(r,i),a<s&&(s=a,n=u);return n}function Y(e){var t="YYYY-MM-DDT",n;if(S.exec(e)){for(n=0;n<4;n++)if(T[n][1].exec(e)){t+=T[n][0];break}return w.exec(e)?Q(e,t+" Z"):Q(e,t)}return new Date(e)}function Z(e,t,n,r,i){var s=i.relativeTime[e];return typeof s=="function"?s(t||1,!!n,e,r):s.replace(/%d/i,t||1)}function et(e,t,n){var r=s(Math.abs(e)/1e3),i=s(r/60),o=s(i/60),u=s(o/24),a=s(u/365),f=r<45&&["s",r]||i===1&&["m"]||i<45&&["mm",i]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",s(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,Z.apply({},f)}function tt(e,t){r.fn[e]=function(e){var n=this._isUTC?"UTC":"";return e!=null?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function nt(e){r.duration.fn[e]=function(){return this._data[e]}}function rt(e,t){r.duration.fn["as"+e]=function(){return+this/t}}var r,i="1.7.2",s=Math.round,o,u={},a="en",f=typeof n!="undefined"&&n.exports,l="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),c=/^\/?Date\((\-?\d+)/i,h=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,p=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,d=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,v=/\d\d?/,m=/\d{1,3}/,g=/\d{3}/,y=/\d{1,4}/,b=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,w=/Z|[\+\-]\d\d:?\d\d/i,E=/T/i,S=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,x="YYYY-MM-DDTHH:mm:ssZ",T=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],N=/([\+\-]|\d\d)/gi,C="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),k={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},L={},A="DDD w M D d".split(" "),O="M D H h m s w".split(" "),M={M:function(){return this.month()+1},MMM:function(e){return _("monthsShort",this.month(),this,e)},MMMM:function(e){return _("months",this.month(),this,e)},D:function(){return this.date()},DDD:function(){var e=new Date(this.year(),this.month(),this.date()),t=new Date(this.year(),0,1);return~~((e-t)/864e5+1.5)},d:function(){return this.day()},dd:function(e){return _("weekdaysMin",this.day(),this,e)},ddd:function(e){return _("weekdaysShort",this.day(),this,e)},dddd:function(e){return _("weekdays",this.day(),this,e)},w:function(){var e=new Date(this.year(),this.month(),this.date()-this.day()+5),t=new Date(e.getFullYear(),0,4);return~~((e-t)/864e5/7+1.5)},YY:function(){return F(this.year()%100,2)},YYYY:function(){return F(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return F(~~(this.milliseconds()/10),2)},SSS:function(){return F(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+F(~~(e/60),2)+":"+F(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+F(~~(10*e/6),4)}};while(A.length)o=A.pop(),M[o+"o"]=P(M[o]);while(O.length)o=O.pop(),M[o+o]=D(M[o],2);M.DDDD=D(M.DDD,3),r=function(t,n){if(t===null||t==="")return null;var i,s;return r.isMoment(t)?new H(new Date(+t._d),t._isUTC,t._lang):(n?q(n)?i=G(t,n):i=Q(t,n):(s=c.exec(t),i=t===e?new Date:s?new Date(+s[1]):t instanceof Date?t:q(t)?U(t):typeof t=="string"?Y(t):new Date(t)),new H(i))},r.utc=function(e,t){return q(e)?new H(U(e,!0),!0):(typeof e=="string"&&!w.exec(e)&&(e+=" +0000",t&&(t+=" Z")),r(e,t).utc())},r.unix=function(e){return r(e*1e3)},r.duration=function(e,t){var n=r.isDuration(e),i=typeof e=="number",s=n?e._data:i?{}:e,o;return i&&(t?s[t]=e:s.milliseconds=e),o=new B(s),n&&(o._lang=e._lang),o},r.humanizeDuration=function(e,t,n){return r.duration(e,t===!0?null:t).humanize(t===!0?!0:n)},r.version=i,r.defaultFormat=x,r.lang=function(e,t){var n;if(!e)return a;(t||!u[e])&&z(e,t);if(u[e]){for(n=0;n<l.length;n++)r[l[n]]=u[e][l[n]];r.monthsParse=u[e].monthsParse,a=e}},r.langData=W,r.isMoment=function(e){return e instanceof H},r.isDuration=function(e){return e instanceof B},r.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),r.fn=H.prototype={clone:function(){return r(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?this._a[8]!=null?!!this._a[8]:!R(this._a,(this._a[7]?r.utc(this._a):r(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return $(this,e?e:r.defaultFormat)},add:function(e,t){var n=t?r.duration(+t,e):r.duration(e);return I(this,n,1),this},subtract:function(e,t){var n=t?r.duration(+t,e):r.duration(e);return I(this,n,-1),this},diff:function(e,t,n){var i=this._isUTC?r(e).utc():r(e).local(),o=(this.zone()-i.zone())*6e4,u=this._d-i._d-o,a=this.year()-i.year(),f=this.month()-i.month(),l=this.date()-i.date(),c;return t==="months"?c=a*12+f+l/30:t==="years"?c=a+(f+l/30)/12:c=t==="seconds"?u/1e3:t==="minutes"?u/6e4:t==="hours"?u/36e5:t==="days"?u/864e5:t==="weeks"?u/6048e5:u,n?c:s(c)},from:function(e,t){return r.duration(this.diff(e)).lang(this._lang).humanize(!t)},fromNow:function(e){return this.from(r(),e)},calendar:function(){var e=this.diff(r().sod(),"days",!0),t=this.lang().calendar,n=t.sameElse,i=e<-6?n:e<-1?t.lastWeek:e<0?t.lastDay:e<1?t.sameDay:e<2?t.nextDay:e<7?t.nextWeek:n;return this.format(typeof i=="function"?i.apply(this):i)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<r([this.year()]).zone()||this.zone()<r([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return r.utc([this.year(),this.month()+1,0]).date()},lang:function(t){return t===e?W(this):(this._lang=t,this)}};for(o=0;o<C.length;o++)tt(C[o].toLowerCase(),C[o]);tt("year","FullYear"),r.duration.fn=B.prototype={weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=this.lang().relativeTime,r=et(t,!e,this.lang()),i=t<=0?n.past:n.future;return e&&(typeof i=="function"?r=i(r):r=i.replace(/%s/i,r)),r},lang:r.fn.lang};for(o in k)k.hasOwnProperty(o)&&(rt(o,k[o]),nt(o.toLowerCase()));rt("Weeks",6048e5),f&&(n.exports=r),typeof ender=="undefined"&&(this.moment=r),typeof define=="function"&&define.amd&&define("moment",[],function(){return r})}).call(this)},"controllers/active_users":function(e,t,n){(function(){var e,r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}};r=t("zooniverse/lib/api"),i=t("zooniverse/lib/models/user"),s=t("lib/config").project,e=function(){function e(e){this.selector=e,this.paginate=o(this.paginate,this),this.pagination=o(this.pagination,this),this.paginateData=o(this.paginateData,this),this.render=o(this.render,this),this.fetch=o(this.fetch,this),this.fetch(),i.unbind("sign-in",this.fetch),i.bind("sign-in",this.fetch)}return e.prototype.fetch=function(){return r.get("/projects/"+s+"/talk/users/active",this.render)},e.prototype.render=function(e){var n;this.data=e;if(((n=this.data.users)!=null?n.length:void 0)>0)return this.paginateData(),$(this.selector).html(t("views/users/active")(this.data)),this.pagination();return},e.prototype.paginateData=function(){var e,t,n,r,i;n=this.data.users,this.data.users={};if((n!=null?n.length:void 0)>0){t=0;for(e=r=0,i=n.length;r<=i;e=r+=10)this.data.users[t+=1]=n.slice(e,e+10);return this.data.usersCount=n.length,this.data.userPages=t}return this.data.usersCount=0,this.data.userPages=0},e.prototype.pagination=function(){if(this.data.usersCount>10)return $(".pages",this.selector).pagination({cssStyle:"compact-theme",items:this.data.usersCount,itemsOnPage:10,onPageClick:this.paginate});return},e.prototype.paginate=function(e,n){return n.preventDefault(),$(".list",this.selector).html(t("views/users/active_list")({users:this.data.users[e]}))},e}(),n.exports=e}).call(this)},"controllers/app_header":function(e,t,n){(function(){var e,r,i,s,o,u=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("spine").Controller,i=t("zooniverse/lib/models/user"),s=t("lib/util").pluralize,o=t("views/app_header"),e=function(e){function t(){this.updateMessageCounter=u(this.updateMessageCounter,this),this.onDocumentClick=u(this.onDocumentClick,this),this.onSignInError=u(this.onSignInError,this),this.onUserSignIn=u(this.onUserSignIn,this),t.__super__.constructor.apply(this,arguments),this.html(o),i.bind("message-count",this.updateMessageCounter),i.bind("sign-in",this.onUserSignIn),i.bind("sign-in-error",this.onSignInError),i.current&&this.onUserSignIn(),$(document).on("click",this.onDocumentClick)}return f(t,e),t.prototype.tagName="header",t.prototype.className="app-header",t.prototype.events={'submit form[name="sign-in"]':"onSignInSubmit",'submit form[name="search"]':"onSubmitSearch","click .search.button":"onClickSearchButton",'click button[name="sign-out"]':"onClickSignOut"},t.prototype.elements={".sign-in":"signInContainer",".message-counter":"messageCounter",".error":"errorContainer",".search.button":"searchButton",".search.dropdown":"searchDropdown",'form[name="search"] input[name="query"]':"searchQueryInput"},t.prototype.onUserSignIn=function(){var e;return e=i.current!=null,this.html(o),this.el.toggleClass("signed-in",e),this.signInContainer.toggle(!e)},t.prototype.onSignInError=function(e){return this.errorContainer.html(e),this.errorContainer.show()},t.prototype.onSignInSubmit=function(e){var t,n;e.preventDefault(),this.errorContainer.hide(),this.errorContainer.empty(),n=this.el.find('input[name="username"]').val(),t=this.el.find('input[name="password"]').val();if(n&&t)return i.login({username:n,password:t})},t.prototype.onClickSearchButton=function(){return this.searchDropdown.toggle()},t.prototype.onSubmitSearch=function(e){return e.preventDefault(),this.searchDropdown.hide(),location.hash="/search/"+this.searchQueryInput.val()},t.prototype.onClickSignOut=function(){return i.logout()},t.prototype.onDocumentClick=function(e){var t,n,r,i,s;s=e.target,i=this.searchDropdown.is(s),r=this.searchButton.is(s),n=this.searchDropdown.has(s).length!==0,t=this.searchButton.has(s).length!==0;if(!(i||r||t||n))return this.searchDropdown.hide()},t.prototype.updateMessageCounter=function(e){var t;return this.messageCounter.attr("data-count",e),e>0?(t=s(e,"new message","new messages"),this.messageCounter.attr("title",""+e+" "+t)):this.messageCounter.attr("title","No new messages")},t}(r),n.exports=e}).call(this)},"controllers/boards":function(e,t,n){(function(){var e,r,i,s,o,u,a,f=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=t("zooniverse/lib/api"),a=t("lib/sub_stack"),o=t("controllers/page"),u=function(n){function r(){return this.createDiscussion=f(this.createDiscussion,this),this.paginateDiscussions=f(this.paginateDiscussions,this),this.discussionPaginationLinks=f(this.discussionPaginationLinks,this),this.url=f(this.url,this),r.__super__.constructor.apply(this,arguments)}return c(r,n),r.prototype.template=t("views/boards/show"),r.prototype.elements=$.extend({"form.new-discussion":"discussionForm",".discussions .list":"discussionsList",".discussions .pages":"paginateDiscussionLinks"},o.prototype.elements),r.prototype.events=$.extend({"submit .new-discussion":"createDiscussion"},o.prototype.events),r.prototype.activate=function(e){if(!e)return;return this.id=e.id,r.__super__.activate.apply(this,arguments)},r.prototype.url=function(){return""+r.__super__.url.apply(this,arguments)+"/boards/"+this.id},r.prototype.render=function(){var e,t,n,i,s,o,u,a=this;this.data.currentPage=1,n=[],this.data.boardFeatured=[],t=this.data.featured.map(function(e){return e.zooniverse_id}),this.data.featured=this.data.featured.filter(function(e){return e.board._id===a.id&&a.data.boardFeatured.push(e),e.board._id!==a.id}),o=this.data.discussions;for(i=0,s=o.length;i<s;i++)e=o[i],(u=e.zooniverse_id,h.call(t,u)<0)&&n.push(e);return this.data.discussions={},this.data.discussions[this.data.currentPage]=n,r.__super__.render.apply(this,arguments),this.discussionPaginationLinks()},r.prototype.discussionPaginationLinks=function(){if(this.data.discussions_count>10)return this.paginateDiscussionLinks.pagination({cssStyle:"light-theme",items:this.data.discussions_count,itemsOnPage:10,onPageClick:this.paginateDiscussions});return},r.prototype.paginateDiscussions=function(n,r){var i=this;return r.preventDefault(),e.get(""+this.url()+"?page="+n,function(e){var r,s,o;return o=e.discussions,i.data.currentPage=n,r=i.data.boardFeatured.map(function(e){return e.zooniverse_id}),i.data.discussions[n]=function(){var e,t,n,i;i=[];for(e=0,t=o.length;e<t;e++)s=o[e],(n=s.zooniverse_id,h.call(r,n)<0)&&i.push(s);return i}(),i.discussionsList.html(t("views/boards/discussion_list")({discussions:i.data.discussions[n],boardFeatured:i.data.boardFeatured,page:n}))})},r.prototype.createDiscussion=function(t){var n,r=this;return t.preventDefault(),n=$(t.target).find('[type="submit"]'),n.attr({disabled:!0}),e.post(""+this.url()+"/discussions",this.discussionForm.serialize(),function(e){return r.navigate("/boards",r.id,"discussions",e.zooniverse_id)})},r}(o),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template=t("views/boards/index"),n.prototype.events=$.extend({'click button[name="new-board"]':"newBoard"},o.prototype.events),n.prototype.url=function(){return""+n.__super__.url.apply(this,arguments)+"/boards"},n.prototype.newBoard=function(e){var t,n;return n=e.target,t=$(n).val(),this.navigate("/boards",t,"new")},n}(o),s=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return c(r,n),r.prototype.template=t("views/boards/new"),r.prototype.fetchOnLoad=!1,r.prototype.elements=$.extend({"form.new-board":"form"},o.prototype.elements),r.prototype.events=$.extend({"submit form.new-board":"createBoard"},o.prototype.events),r.prototype.url=function(){return""+r.__super__.url.apply(this,arguments)+"/boards"},r.prototype.activate=function(e){if(!e)return;return this.category=e.category,r.__super__.activate.apply(this,arguments)},r.prototype.createBoard=function(t){var n,r=this;return t.preventDefault(),n=$(t.target).find('[type="submit"]'),n.attr({disabled:!0}),e.post(this.url(),this.form.serialize(),function(e){return r.navigate("/boards",e.zooniverse_id)})},r}(o),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.controllers={show:u,index:i,"new":s},t.prototype.routes={"/boards":"index","/boards/:id":"show","/boards/:category/new":"new"},t.prototype["default"]="index",t.prototype.className="stack boards",t}(a),n.exports=r}).call(this)},"controllers/collections":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c,h=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},v=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=t("zooniverse/lib/api"),l=t("lib/sub_stack"),a=t("controllers/page"),s=t("models/focus"),o=t("controllers/focus_page"),c=t("views/collections/show"),f=function(e){function n(){return this.paginateSubjects=h(this.paginateSubjects,this),this.paginationLinks=h(this.paginationLinks,this),n.__super__.constructor.apply(this,arguments)}return d(n,e),n.prototype.template=c,n.prototype.className=""+o.prototype.className+" collection page",n.prototype.focusType="collections",n.prototype.elements=$.extend({".subjects .list":"subjectsList",".subjects .pages":"paginateLinks"},o.prototype.elements),n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.subjectPage=1,this.paginationLinks()},n.prototype.reload=function(e){var t=this;return this.fetchOnLoad?s.fetch(this.focusId,function(n){var r,i,s,o,u;t.data=n,s=t.data.subjects,t.data.subjects={};if((s!=null?s.length:void 0)>0){i=0;for(r=o=0,u=s.length;o<=u;r=o+=10)t.data.subjects[i+=1]=s.slice(r,r+10);t.data.subjectsCount=s.length,t.data.subjectPages=i}else t.data.subjectsCount=0,t.data.subjectPages=0;return t.render(),e(t.data)}):n.__super__.reload.apply(this,arguments)},n.prototype.paginationLinks=function(){if(this.data.subjectPages>1)return this.paginateLinks.pagination({cssStyle:"compact-theme",items:this.data.subjectsCount,itemsOnPage:10,onPageClick:this.paginateSubjects});return},n.prototype.paginateSubjects=function(e,n){var r,i,s,o,u,a;n.preventDefault(),this.subjectsList.html(t("views/collections/subject_list")({subjects:this.data.subjects[e]}));if(!this.data.subjects[e+1])return;u=this.data.subjects[e+1],a=[];for(s=0,o=u.length;s<o;s++)i=u[s],r=new Image,a.push(r.src=t("controllers/subject_viewer").imageIn(i!=null?i.location:void 0));return a},n}(o),u=function(n){function r(){return this.addKeyword=h(this.addKeyword,this),this.serializeTags=h(this.serializeTags,this),r.__super__.constructor.apply(this,arguments)}return d(r,n),r.prototype.action="new",r.prototype.className=""+a.prototype.className+" new collection",r.prototype.template=t("views/collections/new"),r.prototype.fetchOnLoad=!1,r.prototype.elements=$.extend({"form.new-collection":"form",'form.new-collection select[name="type"]':"typeSelector","form.new-collection .keywords":"keywordList"},a.prototype.elements),r.prototype.events=$.extend({"submit form.new-collection":"onSubmit",'change form.new-collection select[name="type"]':"changeType",'click button[name="remove-keyword"]':"removeKeyword",'click button[name="add-keyword"]':"addKeyword"},a.prototype.events),r.prototype.url=function(){return""+r.__super__.url.apply(this,arguments)+"/collections"},r.prototype.activate=function(e){var t;if(!e)return;return this.id=e.id,this.subjectId=e.subjectId,this.keywords=(t=e.keywords)!=null?t.split("&"):void 0,e.subjectId?this.type="SubjectSet":e.keywords&&(this.type="KeywordSet"),r.__super__.activate.apply(this,arguments)},r.prototype.changeType=function(e){return this.type=this.typeSelector.val(),this.render()},r.prototype.onSubmit=function(t){var n,r=this;return t.preventDefault(),n=$(t.target).find('[type="submit"]'),n.attr({disabled:!0}),this.type==="KeywordSet"&&this.serializeTags(),e.post(this.url(),this.form.serialize(),function(e){return r.navigate("#/collections/"+e.zooniverse_id)})},r.prototype.serializeTags=function(){var e,t=this;return e={},$("form.new-collection .keywords .keyword").each(function(e,t){var n,r,i,s;return i=$(".tag",t).val(),r=$(".operator",t).val(),n="name='keywords["+i+"]'",s="value='"+r+"'",$("["+n+"]",t).remove(),$(t).append('<input type="hidden" '+n+" "+s+">")})},r.prototype.removeKeyword=function(e){return e.preventDefault(),$(e.target).closest(".keyword").remove()},r.prototype.addKeyword=function(e){return e.preventDefault(),this.keywordList.append(t("views/collections/keyword_field")({}))},r}(a),i=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.toBeRemoved=[]}return d(n,t),n.prototype.className=""+a.prototype.className+" edit collection",n.prototype.action="edit",n.prototype.fetchOnLoad=!0,n.prototype.focusType="collections",n.prototype.events=$.extend({'click button[name="remove"]':"onClickRemove"},u.prototype.events),n.prototype.url=function(){return""+n.__super__.url.apply(this,arguments)+"/"+this.id},n.prototype.onClickRemove=function(e){var t,n,r,i,s,o,u,a;s=e.target,s=$(s),n=s.val(),r=s.closest(".subject");if(v.call(this.toBeRemoved,n)>=0){a=this.toBeRemoved;for(t=o=0,u=a.length;o<u;t=++o)i=a[t],i===n&&this.toBeRemoved.splice(t,1);return r.removeClass("to-be-removed"),this.log("Subject "+n+" NOT to be removed")}return this.toBeRemoved.push(n),r.addClass("to-be-removed"),this.log("Subject "+n+" to be removed")},n.prototype.onSubmit=function(t){var n,r,i,s,o,u,a=this;t.preventDefault(),i=$(t.target).find('[type="submit"]'),i.attr({disabled:!0}),r={title:this.el.find('input[name="title"]').val(),description:this.el.find('textarea[name="description"]').val()};if(this.data.keywords){r.keywords={},u=this.keywordList.find(".keyword");for(s=0,o=u.length;s<o;s++)n=u[s],n=$(n),r.keywords[n.find("input.tag").val()]=n.find("select.operator").val()}else r.subject_ids_to_remove=this.toBeRemoved;return e.put(this.url(),r,function(e){return a.navigate("#/collections/"+a.id)})},n}(u),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.controllers={show:f,"new":u,edit:i},t.prototype.routes={"/collections/new":"new","/collections/new/keywords/*keywords":"new","/collections/new/:subjectId":"new","/collections/:focusId":"show","/collections/:id/edit":"edit"},t}(l),n.exports=r}).call(this)},"controllers/default_group_viewer":function(e,t,n){(function(){var e,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("spine").Controller,r=function(e){function n(){this.preloadPage=i(this.preloadPage,this),this.paginateSubjects=i(this.paginateSubjects,this),this.paginationLinks=i(this.paginationLinks,this),n.__super__.constructor.apply(this,arguments),this.render()}return o(n,e),n.imageIn=function(e){return e!=null?e.standard:void 0},n.groupName=function(){return"Group"},n.groupTitle=function(e){return"Group "+e.name},n.description=function(e){return e.description},n.prototype.group=null,n.prototype.className="group-viewer",n.prototype.template=t("views/groups/viewer"),n.prototype.render=function(){return this.buildPages(),this.subjectPage=1,this.html(this.template(this)),this.paginationLinks()},n.prototype.destroy=function(){return this.el.off()},n.prototype.buildPages=function(){var e,t,n,r,i;n=this.group.subjects,this.group.subjects={};if((n!=null?n.length:void 0)>0){t=0;for(e=r=0,i=n.length;r<=i;e=r+=5)this.group.subjects[t+=1]=n.slice(e,e+5);return this.group.subjectsCount=n.length,this.group.subjectPages=t}return this.group.subjectsCount=0,this.group.subjectPages=0},n.prototype.paginationLinks=function(){if(this.group.subjectPages>1)return this.el.find(".pages").pagination({cssStyle:"compact-theme",items:this.group.subjectsCount,itemsOnPage:5,onPageClick:this.paginateSubjects});return},n.prototype.paginateSubjects=function(e,n){var r,i,s,o,u;n.preventDefault(),this.el.find(".list").html(t("views/collections/subject_list")({subjects:this.group.subjects[e]})),u=[];for(r=i=s=e-2,o=e+2;s<=o?i<=o:i>=o;r=s<=o?++i:--i)u.push(this.preloadPage(r));return u},n.prototype.preloadPage=function(e){var n,r,i,s,o,u;if(!this.group.subjects[e])return;o=this.group.subjects[e],u=[];for(i=0,s=o.length;i<s;i++)r=o[i],n=new Image,u.push(n.src=t("controllers/subject_viewer").imageIn(r!=null?r.location:void 0));return u},n}(e),n.exports=r}).call(this)},"controllers/default_subject_viewer":function(e,t,n){(function(){var e,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("spine").Controller,r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.render()}return s(t,e),t.imageIn=function(e){return e!=null?e.standard:void 0},t.subjectTitle=function(e){return"Image "+e.zooniverse_id},t.prototype.subject=null,t.prototype.className="subject-viewer",t.prototype.template=function(){return'<img src="'+this.subject.location.standard[0]+'" class="main" />'},t.prototype.render=function(){return this.html(this.template(this))},t.prototype.destroy=function(){return this.el.off()},t}(e),n.exports=r}).call(this)},"controllers/discussions":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c,h,p,d=function(e,t){return function(){return e.apply(t,arguments)}},v={}.hasOwnProperty,m=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};p=t("lib/util").focusCollectionFor,e=t("zooniverse/lib/api"),h=t("zooniverse/lib/models/user"),s=t("models/focus"),l=t("lib/sub_stack"),u=t("controllers/page"),a=t("lib/params"),c=t("controllers/subject_viewer"),r=function(n){function r(){return this.paginateSubjects=d(this.paginateSubjects,this),this.subjectPaginationLinks=d(this.subjectPaginationLinks,this),this.buildPagination=d(this.buildPagination,this),r.__super__.constructor.apply(this,arguments)}return m(r,n),r.prototype.elements=$.extend({".subjects .list":"subjectsList",".subjects .pages":"paginateSubjectLinks"},u.prototype.elements),r.prototype.activate=function(e){if(!e)return;return this.hash=e.id,r.__super__.activate.apply(this,arguments)},r.prototype.setPage=function(){var e,t;return this.data.currentPage=((t=a.parse(this.hash))!=null?t.page:void 0)||1,e=this.data.comments,this.data.comments={},this.data.comments[this.data.currentPage]=e},r.prototype.reload=function(t){var n,r=this;return this.fetchOnLoad?e.get(""+this.url()+"?page="+(((n=a.parse(this.hash))!=null?n.page:void 0)||1),function(e){return r.data=e,r.focus=r.data.focus,r.data.focusType=r.discussionFocus(),r.buildPagination(),r.setPage(),r.render(),typeof t=="function"?t(r.data):void 0}):s.findOrFetch(this.focusId,function(n){return r.focus=n,r.data=r,r.data.focusType=r.focusType,r.buildPagination(),r.setPage(),r.category?e.get(r.boardsUrl(),function(e){return r.boards=e,r.render(),typeof t=="function"?t(r.data):void 0}):(r.render(),typeof t=="function"?t(r.data):void 0)})},r.prototype.buildPagination=function(){var e,t,n,r,i;if(this.data.focusType==="collections"){n=this.data.focus.subjects,this.data.focus.subjects={};if((n!=null?n.length:void 0)>0){t=0;for(e=r=0,i=n.length;r<=i;e=r+=6)this.data.focus.subjects[t+=1]=n.slice(e,e+6);return this.data.focus.subjectsCount=n.length,this.data.focus.subjectPages=t}return this.data.focus.subjectsCount=0,this.data.focus.subjectPages=0}},r.prototype.render=function(){var e;(e=this.subjectViewer)!=null&&e.destroy(),r.__super__.render.apply(this,arguments),this.subjectPage=1,this.subjectPaginationLinks();if(this.data.focusType==="subjects")return this.subjectViewer=new c({el:this.el.find(".subject-viewer"),subject:this.data.focus})},r.prototype.discussionFocus=function(){var e,t;if(!((e=this.data)!=null?(t=e.focus)!=null?t.type:void 0:void 0))return;return p(this.data.focus.type)},r.prototype.focusUrl=function(){var e;return((e=this.data)!=null?e.focus:void 0)?""+n.prototype.url()+"/"+this.discussionFocus()+"/"+this.data.focus._id:""+n.prototype.url()+"/"+this.focusType+"/"+this.focusId},r.prototype.boardsUrl=function(){return""+n.prototype.url()+"/boards"},r.prototype.subjectPaginationLinks=function(){if(this.data.focus.subjectPages>1)return this.paginateSubjectLinks.pagination({cssStyle:"compact-theme",items:this.data.focus.subjectsCount,itemsOnPage:10,onPageClick:this.paginateSubjects});return},r.prototype.paginateSubjects=function(e,n){var r,i,s,o,u,a;n.preventDefault(),this.subjectsList.html(t("views/collections/subjects_for_discussion")({subjects:this.data.focus.subjects[e]}));if(!this.data.focus.subjects[e+1])return;u=this.data.focus.subjects[e+1],a=[];for(s=0,o=u.length;s<o;s++)i=u[s],r=new Image,a.push(r.src=t("controllers/subject_viewer").imageIn(i!=null?i.location:void 0));return a},r}(u),f=function(n){function i(){return this.unlockDiscussion=d(this.unlockDiscussion,this),this.lockDiscussion=d(this.lockDiscussion,this),this.showDiscussions=d(this.showDiscussions,this),this.showBoards=d(this.showBoards,this),this.cancelMerge=d(this.cancelMerge,this),this.completeMerge=d(this.completeMerge,this),this.mergeDiscussion=d(this.mergeDiscussion,this),this.stopEditingDiscussion=d(this.stopEditingDiscussion,this),this.updateDiscussion=d(this.updateDiscussion,this),this.showSubBoards=d(this.showSubBoards,this),this.editDiscussion=d(this.editDiscussion,this),this.destroyDiscussion=d(this.destroyDiscussion,this),this.featureDiscussion=d(this.featureDiscussion,this),this.scrollToTop=d(this.scrollToTop,this),this.findComment=d(this.findComment,this),this.updateComment=d(this.updateComment,this),this.removeComment=d(this.removeComment,this),this.editComment=d(this.editComment,this),this.createComment=d(this.createComment,this),this.toggleResponse=d(this.toggleResponse,this),this.removeRespondTo=d(this.removeRespondTo,this),this.respondTo=d(this.respondTo,this),this.paginateComments=d(this.paginateComments,this),this.paginationLinks=d(this.paginationLinks,this),this.url=d(this.url,this),i.__super__.constructor.apply(this,arguments)}return m(i,n),i.prototype.template=t("views/discussions/show"),i.prototype.elements=$.extend({"form.new-comment":"commentForm","ul.posts":"commentList",".pages":"paginateLinks",".discussion-topic .respond h4 .in-response-to":"inResponseTo",".post header .title":"title",".discussion .board-categories":"boardCategories",".actions":"actions"},r.prototype.elements),i.prototype.events=$.extend({"click .discussion-topic .post .comment-moderation .edit-comment":"editComment","click .discussion-topic .post .comment-moderation .remove-own-comment":"removeComment","click .discussion-topic .post .respond-link":"respondTo","click .discussion-topic .in-response-to .remove":"removeRespondTo","click .discussion-topic .post .response-to":"toggleResponse","submit .new-comment":"createComment","submit .edit-comment":"updateComment","click .feature-link button":"featureDiscussion","click .actions .destroy.action":"destroyDiscussion","click .actions .edit.action":"editDiscussion","click .actions .update.action":"updateDiscussion","submit .edit-discussion-title":"updateDiscussion","submit .edit-discussion-categories":"updateDiscussion","click .actions .cancel-update.action":"stopEditingDiscussion","change .edit-discussion-categories .category":"showSubBoards","click .scroll-to-top":"scrollToTop","click .actions .merge.action":"mergeDiscussion","click .actions .update-merge.action":"completeMerge","click .actions .cancel-merge.action":"cancelMerge","change form.merge-discussion .category":"showBoards","change form.merge-discussion .sub-board":"showDiscussions","click .actions .lock.action":"lockDiscussion","click .actions .unlock.action":"unlockDiscussion"},r.prototype.events),i.prototype.activate=function(e){if(!e)return;return this.focusType=e.focusType,this.focusId=e.focusId,this.id=e.id.split("?")[0],i.__super__.activate.apply(this,arguments)},i.prototype.url=function(){return""+i.__super__.url.apply(this,arguments)+"/"+this.focusType+"/"+this.focusId+"/discussions/"+this.id},i.prototype.render=function(){var e,t,n;i.__super__.render.apply(this,arguments),this.paginationLinks();if(t=a.parse(this.hash).comment_id){n=$("html, body"),e=$("#"+t);if(e[0])return n.animate({scrollTop:e.offset().top-n.offset().top+n.scrollTop()})}},i.prototype.paginationLinks=function(){if(this.data.comments_count>10)return this.paginateLinks.pagination({cssStyle:"light-theme",items:this.data.comments_count,itemsOnPage:10,onPageClick:this.paginateComments,currentPage:this.data.currentPage||1});return},i.prototype.paginateComments=function(n,r,i){var s=this;return r!=null&&r.preventDefault(),e.get(""+this.url()+"/comments",{page:n},function(e){var r;return typeof s.callback=="function"&&s.callback(e),s.data.comments[n]=e,r=e.map(function(e){return"<li>"+t("views/discussions/comment")({discussionId:s.data.zooniverse_id,comment:e})+"</li>"}),s.commentList.html(r.join("\n"))})},i.prototype.respondTo=function(e){var t,n;return e.preventDefault(),n=$(e.target).data("id"),this.commentForm.find('input[name="response_to_id"]').val(n),t=this.findComment(n),this.inResponseTo.html("In response to "+t.user_name+'\'s comment (<a class="remove">cancel</a>)'),this.setCommentCursor()},i.prototype.removeRespondTo=function(e){return e.preventDefault(),this.commentForm.find('input[name="response_to_id"]').val(""),this.inResponseTo.html(""),this.setCommentCursor()},i.prototype.toggleResponse=function(n){var r,i,s,o,a=this;return n.preventDefault(),i=$(n.target).closest(".post:not(.response-post)"),s=i.attr("id"),r=this.findComment(s),o=function(e){var n;return n=$('.response-post[data-comment-id="'+e._id+'"]'),n[0]?n.remove():i.before(t("views/discussions/response")({comment:e}))},r?o(r):e.get(""+u.prototype.url()+"/discussions/"+this.data.zooniverse_id+"/comments/"+s,o)},i.prototype.setCommentCursor=function(){var e,t;e=$("#wmd-inputcomment").focus()[0];if(typeof e.selectionStart=="number")return e.selectionStart=e.selectionEnd=e.value.length;if(typeof e.createTextRange!="undefined")return e.focus(),t=e.createTextRange(),t.collapse(!1),t.select()},i.prototype.createComment=function(n){var r,i=this;return n!=null&&n.preventDefault(),this.commentForm.find('[name="comment"]').val().trim().length<1?!1:(r=$(n.target).find('[type="submit"]'),r.attr({disabled:!0}),e.post(""+this.url()+"/comments",this.commentForm.serialize(),function(e){var n,s,o,u;return r.attr({disabled:!1}),i.inResponseTo.html(""),i.commentForm[0].reset(),o=i.commentForm.find("#wmd-previewcomment"),o.html(""),o.is(":visible")&&i.commentForm.find(".toggle-preview").click(),i.data.comments_count+=1,s=Math.ceil(i.data.comments_count/10),(u=i.data.comments)[s]||(u[s]=[]),i.data.comments[s].push(e),i.paginationLinks(),s>1?i.paginateLinks.pagination("selectPage",s):(n=t("views/discussions/comment")({discussionId:i.data.zooniverse_id,comment:e}),n=$("<li>"+n+"</li>"),i.commentList.append(n))}))},i.prototype.editComment=function(e){var n,r,i,s;return e.preventDefault(),s=$(e.target),i=s.data("comment-id"),n=this.findComment(i),r=s.closest(".post"),r.html(t("views/discussions/edit_comment_form")({discussionId:this.data.zooniverse_id,comment:n})),r.find("textarea").val(n.body)},i.prototype.removeComment=function(t){var n,r,i,s,o=this;t.preventDefault(),t.stopPropagation();if(confirm("Are you sure you want to remove this comment?\nThere is no undo."))return i=$(t.target),s=i.data(),n=s.commentId,r=s.discussionId,e["delete"](""+u.prototype.url()+"/discussions/"+r+"/comments/"+n,function(){var e;return i.closest(".comment,.post").remove(),e=o.findComment(n),o.data.comments[e.discussionPage]=o.data.comments[e.discussionPage].filter(function(e,t){return e._id!==n}),o.data.comments_count-=1,o.data.comments[e.discussionPage].length===0?(delete o.data.comments[e.discussionPage],o.buildPagination(),o.paginationLinks(),o.paginateLinks.pagination("selectPage",e.discussionPage-1)):(o.buildPagination(),o.paginationLinks())})},i.prototype.updateComment=function(n){var r,i,s,o,a,f,l=this;return n.preventDefault(),a=$(n.target).find('[type="submit"]'),f=a.data(),i=f.commentId,s=f.discussionId,o=a.closest(".edit-comment"),r=o.find('[name="comment"]').val(),e.put(""+u.prototype.url()+"/discussions/"+s+"/comments/"+i,{body:r},function(){var e;return e=l.findComment(i),e.body=r,o.closest(".post").replaceWith(t("views/discussions/comment")({discussionId:s,comment:e}))})},i.prototype.findComment=function(e){var t,n,r,i;i=this.data.comments;for(r in i){n=i[r],t=n.filter(function(t){return t._id===e})[0];if(t)return t.discussionPage=r,t}return null},i.prototype.scrollToTop=function(e){return e.preventDefault(),$("html, body").animate({scrollTop:0},function(){return $('.app-header .sign-in input[name="username"]').focus()})},i.prototype.featureDiscussion=function(n){var r,i,s,o,u,a=this;return n.preventDefault(),i=$(n.target),u=i.data(),s=u.id,o=u.scope,r=i.attr("name"),e.post(""+this.url()+"/"+r,{context:o},function(e){var n,i;return(n=a.data).featured_status||(n.featured_status={}),(i=a.data.featured_status).scopes||(i.scopes=[]),r==="feature"?a.data.featured_status.scopes.push(o):a.data.featured_status.scopes=a.data.featured_status.scopes.filter(function(e){return e!==o}),a.el.find(".feature-link").replaceWith(t("views/discussions/feature_buttons")({id:s,featured:a.data.featured_status,board:a.data.board}))})},i.prototype.destroyDiscussion=function(t){var n=this;t.preventDefault();if(confirm("Are you sure you want to remove this discussion?\nThere is no undo!"))return e["delete"](this.url(),function(){return n.navigate("/boards",n.data.board._id)})},i.prototype.editDiscussion=function(n){var r=this;n.preventDefault(),this.actions.addClass("editing"),this.title.html(t("views/discussions/edit_title")(this.data));if(h.current.isPrivileged)return e.get(this.boardsUrl(),function(e){return r.actions.addClass("editing"),r.data.boardCategories=e,r.boardCategories.html(t("views/discussions/edit_categories")(r.data))})},i.prototype.showSubBoards=function(e){var t,n,r;return e.preventDefault(),r=$(e.target),t=r.find("option:selected").val(),n=r.closest("form").find(".sub-board"),n.attr("data-category",t),n.prop("selectedIndex",-1)},i.prototype.updateDiscussion=function(t){var n,r,i,s,o=this;t.preventDefault(),s=this.title.find("input"),i={title:s.val()},r=!0;if(h.current.isPrivileged){n=$(".edit-discussion-categories"),i.board=n.find(".sub-board :selected").val(),r=n.find(".sub-board")[0].checkValidity();if(!r){n.find("[type=submit]").click();return}}return s[0].checkValidity()?e.put(this.url(),i,function(e){return o.data=e,o.stopEditingDiscussion(t)}):$(".edit-discussion-title [type=submit]").click()},i.prototype.stopEditingDiscussion=function(e){return e!=null&&e.preventDefault(),this.actions.removeClass("editing"),this.title.html(this.data.title),this.boardCategories.html(t("views/discussions/board_categories")(this.data))},i.prototype.mergeDiscussion=function(n){var r=this;return n.preventDefault(),this.actions.addClass("merging"),e.get(this.boardsUrl(),function(n){return e.get(""+r.boardsUrl()+"/"+r.data.board._id+"/discussion_list",function(e){return r.actions.addClass("merging"),r.data.boardCategories=n,r.data.boardDiscussions=e.discussions,r.boardCategories.html(t("views/discussions/merge")(r.data)),$(".merge-discussion select.discussion").chosen({no_results_text:"No discussions matched"})})})},i.prototype.completeMerge=function(t){var n,r,i,s,o=this;t.preventDefault(),r={},s=$(".merge-discussion"),r.board=s.find("select.sub-board :selected").val(),n=s.find("select.sub-board")[0].checkValidity(),r.discussion=s.find("select.discussion :selected").val(),i=s.find("select.discussion")[0].checkValidity();if(!n||!i){s.find("[type=submit]").click();return}if(this.data.zooniverse_id===r.discussion){alert("You cannot merge a discussion with itself");return}if(!confirm('You are about to merge comments in "'+this.data.title+'" into "'+s.find("select.discussion :selected").text()+'"\n"'+this.data.title+'" will be deleted.\n\nThere is not undo!'))return;return e.post(""+this.url()+"/merge",r,function(e){return o.data=e,o.navigate("/boards",r.board,"discussions",r.discussion)})},i.prototype.cancelMerge=function(e){return e!=null&&e.preventDefault(),this.actions.removeClass("merging"),this.boardCategories.html(t("views/discussions/board_categories")(this.data))},i.prototype.showBoards=function(e){return this.showSubBoards(e),$(".merge-discussion select.discussion option").remove(),$(".merge-discussion select.discussion").prop("selectedIndex",-1).trigger("liszt:updated")},i.prototype.showDiscussions=function(n){var r,i,s=this;return n.preventDefault(),i=$(n.target),r=i.find("option:selected").val(),e.get(""+this.boardsUrl()+"/"+r+"/discussion_list",function(e){var n,r;return n=i.closest("form"),s.data.boardDiscussions=e.discussions,r=n.find("select.discussion").attr("id"),$("#"+r).replaceWith(t("views/discussions/mergable_list")(s.data)),$("#"+r+"_chzn").remove(),n.find("select.discussion").prop("selectedIndex",-1).chosen({no_results_text:"No discussions matched"})})},i.prototype.lockDiscussion=function(t){t.preventDefault();if(!confirm("Are you sure you want to lock commenting on this discussion?\nThis will also prevent comments from being edited and removed."))return;return $(".actions .lock.action").replaceWith('<a class="unlock action show-for-privileged-user">Unlock</a>'),e.put(""+this.url()+"/lock",function(){return $(".new-post").addClass("locked")})},i.prototype.unlockDiscussion=function(t){t.preventDefault();if(!confirm("Are you sure you want to unlock commenting on this discussion?"))return;return $(".actions .unlock.action").replaceWith('<a class="lock action show-for-privileged-user">Lock</a>'),e.put(""+this.url()+"/unlock",function(){return $(".new-post").removeClass("locked")})},i}(r),o=function(n){function i(){return this.createDiscussion=d(this.createDiscussion,this),i.__super__.constructor.apply(this,arguments)}return m(i,n),i.prototype.template=t("views/discussions/new"),i.prototype.fetchOnLoad=!1,i.prototype.elements=$.extend({"form.new-discussion":"form"},r.prototype.elements),i.prototype.events=$.extend({"submit form.new-discussion":"createDiscussion"},r.prototype.events),i.prototype.url=function(){return""+i.__super__.url.apply(this,arguments)+"/"+this.focusType+"/"+this.focusId+"/discussions"},i.prototype.activate=function(e){if(!e)return;return this.category=e.category,this.focusType=e.focusType,this.focusId=e.focusId,i.__super__.activate.apply(this,arguments)},i.prototype.createDiscussion=function(t){var n,r=this;return t.preventDefault(),n=$(t.target).find('[type="submit"]'),n.attr({disabled:!0}),e.post(this.url(),this.form.serialize(),function(e){return r.navigate("/boards",e.board._id,"discussions",e.zooniverse_id)})},i}(r),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.controllers={show:f,"new":o},t.prototype.routes={"/:focusType/:focusId/discussions/new":"new","/:focusType/:focusId/:category/discussions/new":"new","/:focusType/:focusId/discussions/:id":"show"},t.prototype["default"]="show",t.prototype.className="stack discussions",t}(l),n.exports=i}).call(this)},"controllers/focus_page":function(e,t,n){(function(){var e,r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("zooniverse/lib/api"),r=t("models/focus"),s=t("controllers/page"),i=function(n){function i(){return this.startDiscussion=o(this.startDiscussion,this),this.paginateComments=o(this.paginateComments,this),this.editComment=o(this.editComment,this),this.updateCounter=o(this.updateCounter,this),i.__super__.constructor.apply(this,arguments)}return a(i,n),i.prototype.className=""+s.prototype.className+" focus",i.prototype.elements=$.extend({".create-comment .comment-form":"commentForm",".create-comment .comment-form .characters .count":"characterCounter",".focus-comments":"commentList",".load-more-comments":"loadMoreComments"},s.prototype.elements),i.prototype.events=$.extend({"click .focus-comments .comment .comment-moderation .edit-comment":"editComment","submit .create-comment .comment-form":"submitComment","submit .edit-comment .comment-form":"updateComment","click .new-discussion button":"startDiscussion","keyup .comment-form textarea":"updateCounter","click .load-more-comments":"paginateComments"},s.prototype.events),i.prototype.activate=function(e){if(!e)return;return this.focusId=e.focusId,this.commentLength=140,this.commentPage=1,i.__super__.activate.apply(this,arguments)},i.prototype.url=function(){return""+i.__super__.url.apply(this,arguments)+"/"+this.constructor.prototype.focusType+"/"+this.focusId},i.prototype.reload=function(e){var t=this;return this.fetchOnLoad?r.fetch(this.focusId,function(n){return t.data=n,t.render(),e(t.data)}):i.__super__.reload.apply(this,arguments)},i.prototype.updateCounter=function(e){var t,n,r,i,s;return i=$(e.target).closest(".comment-form"),n=i.find('[name="comment"]'),r=i.find('button[type="submit"]'),t=i.find(".characters .count"),s=this.commentLength-n.val().length,s<0?(t.html('<span style="color: red;">'+s+"</span>"),r.attr("disabled","disabled")):(t.html(s),r.removeAttr("disabled"))},i.prototype.submitComment=function(n){var r,i=this;return n.preventDefault(),r=$(n.target).find('[type="submit"]'),r.attr({disabled:!0}),e.post(""+this.url()+"/comments",this.commentForm.serialize(),function(e){return r.attr({disabled:!1}),i.commentForm[0].reset(),i.characterCounter.html(0),i.data.discussion.comments.unshift(e),i.commentList.prepend(t("views/focus/comment")({discussionId:e.discussion_id,comment:e}))})},i.prototype.editComment=function(e){var n,r,i,s;return s=$(e.target),i=s.data("comment-id"),n=this.data.discussion.comments.filter(function(e){return e._id===i})[0],r=s.closest(".comment"),r.replaceWith(t("views/focus/edit_comment_form")({discussionId:this.data.discussion.zooniverse_id,comment:n}))},i.prototype.updateComment=function(n){var r,i,o,u,a,f,l=this;return n.preventDefault(),a=$(n.target).find('[type="submit"]'),f=a.data(),i=f.commentId,o=f.discussionId,u=a.closest(".edit-comment"),r=u.find('[name="comment"]').val(),e.put(""+s.prototype.url()+"/discussions/"+o+"/comments/"+i,{body:r},function(){var e;return e=l.data.discussion.comments.filter(function(e){return e._id===i})[0],e.body=r,u.replaceWith(t("views/focus/comment")({discussionId:o,comment:e}))})},i.prototype.paginateComments=function(){var n=this;return this.commentPage+=1,e.get(""+this.url()+"/comments?page="+this.commentPage,function(e){var r,i,s,o;n.data.discussion.comments_count<n.commentPage*10&&n.loadMoreComments.hide(),o=[];for(i=0,s=e.length;i<s;i++)r=e[i],o.push(n.commentList.append(t("views/focus/comment")({comment:r})));return o})},i.prototype.startDiscussion=function(e){var t;return e.preventDefault(),t=$(e.target).data("category"),this.navigate("",this.constructor.prototype.focusType,this.focusId,t,"discussions","new")},i}(s),n.exports=i}).call(this)},"controllers/following":function(e,t,n){(function(){var e,r,i,s,o,u=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("zooniverse/lib/api"),o=t("lib/sub_stack"),s=t("controllers/page"),i=function(n){function r(){return this.loadMore=u(this.loadMore,this),this.url=u(this.url,this),r.__super__.constructor.apply(this,arguments)}return f(r,n),r.prototype.className=""+s.prototype.className+" following",r.prototype.template=t("views/following/index"),r.prototype.elements=$.extend({".subjects .list":"subjectList",".groups .list":"groupList",".discussions .list":"discussionList",".collections .list":"collectionList"},s.prototype.elements),r.prototype.events=$.extend({'click button[name="load-more"]':"loadMore"},s.prototype.events),r.prototype.render=function(){return this.subjectsPage=1,this.groupsPage=1,this.collectionsPage=1,this.discussionPage=1,r.__super__.render.apply(this,arguments)},r.prototype.url=function(){return""+r.__super__.url.apply(this,arguments)+"/following"},r.prototype.loadMore=function(n){var r,i,s,o=this;n.preventDefault(),i=$(n.target),s=i.data("type"),r=i.data("category");switch(s){case"subjects":return e.get(""+this.url()+"/subjects?page="+(this.subjectsPage+=1)+"&per_page=6",function(e){e.length>0&&o.subjectList.append(t("views/subjects/list")({subjects:e}));if(e.length<6)return i.attr({disabled:!0})});case"groups":return e.get(""+this.url()+"/groups?page="+(this.groupsPage+=1)+"&per_page=6",function(e){e.length>0&&o.groupList.append(t("views/groups/list")({groups:e}));if(e.length<6)return i.attr({disabled:!0})});case"discussions":return e.get(""+this.url()+"/discussions?page="+(this.discussionPage+=1)+"&per_page=10",function(e){e.length>0&&o.discussionList.append(t("views/discussions/list")({discussions:e}));if(e.length<10)return i.attr({disabled:!0})});case"collections":return e.get(""+this.url()+"/collections?page="+(this.collectionsPage+=1)+"&per_page=8",function(e){e.length>0&&o.collectionList.append(t("views/collections/list")({collections:e,updatedStats:!0}));if(e.length<8)return i.attr({disabled:!0})})}},r}(s),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.controllers={index:i},t.prototype.routes={"/following":"index"},t.prototype["default"]="index",t.prototype.className="stack following",t}(o),n.exports=r}).call(this)},"controllers/groups":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("zooniverse/lib/api"),f=t("lib/sub_stack"),l=t("lib/config").grouped,l?(u=t("controllers/page"),r=t("models/focus"),i=t("controllers/focus_page"),s=t("controllers/group_viewer"),a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,e),n.prototype.template=t("views/groups/show"),n.prototype.className=""+i.prototype.className+" group page",n.prototype.focusType="groups",n.prototype.render=function(){var e;return(e=this.groupViewer)!=null&&e.destroy(),n.__super__.render.apply(this,arguments),this.groupViewer=new s({el:this.el.find(".group-viewer"),group:this.data})},n.prototype.reload=function(e){var t=this;return this.fetchOnLoad?r.fetch(this.focusId,function(n){return t.data=n,t.render(),e(t.data)}):n.__super__.reload.apply(this,arguments)},n}(i),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.controllers={show:a},t.prototype.routes={"/groups/:focusId":"show"},t}(f),n.exports=o):n.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t}(f)}).call(this)},"controllers/message_list":function(e,t,n){(function(){var e,r,i=function(e,t){return function(){return e.apply(t,arguments)}};e=t("models/message"),r=function(){function n(t,n){this.selector=t,this.viewedUser=n,this.render=i(this.render,this),e.fetch(this.render)}return n.prototype.render=function(e){return e&&(this.conversations=e),$(this.selector).html(t("views/messages/list")({conversations:this.conversations,viewedUser:this.viewedUser}))},n}(),n.exports=r}).call(this)},"controllers/messages":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c,h={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d=function(e,t){return function(){return e.apply(t,arguments)}};e=t("zooniverse/lib/api"),l=t("zooniverse/lib/models/user"),r=t("models/message"),i=t("controllers/message_list"),f=t("lib/sub_stack"),u=t("controllers/page"),c=t("lib/config").projectName,a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,e),n.prototype.template=t("views/messages/show"),n.prototype.elements=$.extend({".posts":"messages",'.new-message [name="message[body]"]':"messageBody"},u.prototype.elements),n.prototype.events=$.extend({"submit .new-message":"submit","click .delete-message":"destroy"},u.prototype.events),n.prototype.activate=function(e){if(!e)return;return this.id=e.id,n.__super__.activate.apply(this,arguments)},n.prototype.reload=function(e){var t=this;return r.get(this.id,function(n){return t.data=n,t.message=t.data,t.render(),typeof e=="function"?e(t.data):void 0})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.messageList?this.messageList.render():this.messageList=new i(".message-list")},n.prototype.submit=function(e){var t,n=this;return e.preventDefault(),t=$(e.target).find('[type="submit"]'),t.attr({disabled:!0}),this.message.sendReply(this.messageBody.val(),function(e){return n.message=e,t.attr({disabled:!1}),n.data=n.message,n.render()})},n.prototype.destroy=function(e){var t=this;return e.preventDefault(),r.records[this.id].destroy(function(){return t.navigate("/profile")})},n}(u),o=function(n){function s(){return this.autocomplete=d(this.autocomplete,this),s.__super__.constructor.apply(this,arguments)}return p(s,n),s.prototype.template=t("views/messages/new"),s.prototype.fetchOnLoad=!1,s.prototype.elements=$.extend({".new-message":"form",".new-message .user-search":"userSearch"},u.prototype.elements),s.prototype.events=$.extend({"submit .new-message":"submit"},u.prototype.events),s.prototype.activate=function(e){if(!e)return;return this.id=e.id,s.__super__.activate.apply(this,arguments)},s.prototype.render=function(){return s.__super__.render.apply(this,arguments),this.messageList?this.messageList.render():this.messageList=new i(".message-list"),setTimeout(this.autocomplete,0)},s.prototype.autocomplete=function(){var t=this;return this.userSearch.autocomplete({serviceUrl:""+e.host+"/"+r.url()+"/search",width:300,minChars:2,format:function(e,n,r){return'<img src="//zooniverse-avatars.s3.amazonaws.com/ouroboros/'+n.zooniverse_id+'" class="avatar" onerror="window.defaultAvatar(this)" />\n'+t.escape(e,r)}})},s.prototype.submit=function(e){var t,n,i,s,o,u=this;return e.preventDefault(),i=$(e.target).find('[type="submit"]'),i.attr({disabled:!0}),o=this.form.find('[name="user_name"]').val(),n={title:this.form.find('[name="message[title]"]').val(),body:this.form.find('[name="message[body]"]').val(),project_name:c},s=function(){return u.navigate("/profile")},t=function(e){return i.attr({disabled:!1}),e.responseText==="invalid user"?alert(""+u.userSearch.val()+" is not a valid user"):alert("Something went wrong, please try again")},r.start(o,n,s,t)},s.prototype.escape=function(e,t){var n;return n=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g"),e.replace(new RegExp("("+t.replace(n,"\\$1")+")","gi"),"<strong>$1</strong>")},s}(u),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.controllers={"new":o,show:a},t.prototype.routes={"/messages/new":"new","/messages/:id":"show","/messages/:id/new":"new"},t.prototype["default"]="new",t.prototype.className="stack messages",t}(f),n.exports=s}).call(this)},"controllers/moderation":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("zooniverse/lib/api"),f=t("zooniverse/lib/models/user"),i=t("models/message"),s=t("controllers/message_list"),a=t("lib/sub_stack"),u=t("controllers/page"),r=function(n){function r(){this.viewFor=l(this.viewFor,this),this.action=l(this.action,this),this.loadMore=l(this.loadMore,this),this.render=l(this.render,this),r.__super__.constructor.apply(this,arguments),this.reported_users={page:1,actions:["ignore","watch","ban"]},this.watched_users={page:1,actions:["unwatch","ban"]},this.banned_users={page:1,actions:["redeem"]},this.reported_comments={page:1,actions:["ignore","delete"]},this.log={page:1,actions:[]}}return h(r,n),r.prototype.template=t("views/moderation/index"),r.prototype.events=$.extend({"click .load-more button":"loadMore","click .comment-viewer .off":"toggleComment","click .actions .action-link":"action"},u.prototype.events),r.prototype.url=function(){return""+r.__super__.url.apply(this,arguments)+"/moderation"},r.prototype.render=function(){return this.data.pastTenses=this.pastTenses(),r.__super__.render.apply(this,arguments)},r.prototype.loadMore=function(t){var n,r,i,s=this;return t.preventDefault(),i=$(t.target).data(),r=i.type,n=i.kind,e.get(""+this.url()+"/"+r+"?page="+(this[r].page+=1),function(e){var t;s.viewFor(r,n,e),t=s.el.find("."+r+" .load-more button");if(e.length<10)return t.attr("disabled","disabled")})},r.prototype.toggleComment=function(e){return e.preventDefault(),$(e.target).closest(".comment-viewer").toggleClass("on")},r.prototype.action=function(t){var n,r,i,s,o,u,a,f=this;t.preventDefault(),o=$(t.target),a=o.data(),i=a.id,n=a.action,u=a.userName;if(s=prompt("Please enter a brief message:"))return o.closest(".moderation-item").remove(),r={label:n,comment:s},u&&(r.user_name=u),e.post(""+this.url()+"/"+i+"/action",r,function(e){switch(n){case"ban":return f.viewFor("banned_users","users",e,"prepend");case"watch":return f.viewFor("watched_users","users",e,"prepend");default:return f.viewFor("log","log",e,"prepend")}})},r.prototype.viewFor=function(e,n,r,i){var s;return i==null&&(i="append"),r=[].concat(r),s=t("views/moderation/"+n)({pastTenses:this.pastTenses(),moderations:r,actions:this[e].actions}),this.el.find("."+e+" .list")[i](s)},r.prototype.pastTenses=function(){var e;return e={"delete":"deleted",delete_comment:"deleted",ban:"banned",ban_user:"banned",watch:"watched",watch_user:"watched",unwatch:"unwatched",unwatch_user:"unwatched",redeem:"redeemed",redeem_user:"redeemed",report:"reported",report_user:"reported",report_comment:"reported",ignore:"ignored"}},r}(u),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.controllers={index:r},t.prototype.routes={"/moderation":"index"},t.prototype["default"]="index",t.prototype.className="stack moderation",t}(a),n.exports=o}).call(this)},"controllers/page":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("spine").Controller,f=t("lib/config"),a=f.project,u=f.apiHost,i=t("zooniverse/lib/api"),e=t("jqueryify"),r=t("controllers/active_users"),o=function(n){function s(){this.collectSubject=l(this.collectSubject,this),this.showCollectionList=l(this.showCollectionList,this);var e;s.__super__.constructor.apply(this,arguments),(e=this.data)==null&&(this.data={})}return h(s,n),s.prototype.tagName="section",s.prototype.className="page",s.prototype.template=null,s.prototype.data=null,s.prototype.fetchOnLoad=!0,s.prototype.events={"click .add-to-collection .collect-this":"showCollectionList","click .add-to-collection .collection-list .collection":"collectSubject"},s.prototype.activate=function(e){var t=this;if(!e)return;return s.__super__.activate.apply(this,arguments),this.el.addClass("loading"),this.reload(function(){return t.el.removeClass("loading")})},s.prototype.url=function(){return"/projects/"+a+"/talk"},s.prototype.reload=function(e){var t=this;return this.fetchOnLoad?i.get(this.url(),function(n){return t.data=n,t.render(),e(t.data)}):(this.data=this,this.render(),typeof e=="function"?e(this):void 0)},s.prototype.render=function(){return this.activeUsers?this.activeUsers.fetch():this.activeUsers=new r(".active-users"),this.html(typeof this.template=="function"?this.template(this.data):void 0)},s.prototype.showCollectionList=function(n){var r,s,o,u=this;return n.preventDefault(),r=e(n.target).closest(".add-to-collection"),s=r.find(".collection-list"),o=r.find(".collect-this").data("id"),s.addClass("loading"),i.get("/projects/"+a+"/talk/users/collection_list",function(e){return s.removeClass("loading"),s.show(),s.html(t("views/users/collection_list")({subject:{zooniverse_id:o},collections:e}))})},s.prototype.collectSubject=function(t){var n,r,s,o,u,f=this;return t.preventDefault(),s=e(t.target).data("id"),r=e(t.target).closest(".add-to-collection"),o=r.find(".collection-list"),n=r.find(".collect-this"),u=n.data("id"),i.post("/projects/"+a+"/talk/collections/"+s+"/add_subject",{subject_id:u},function(e){return o.html(""),o.hide(),n.text("Collected")})},s}(s),n.exports=o}).call(this)},"controllers/recents":function(e,t,n){(function(){var e,r,i,s,o,u=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("zooniverse/lib/api"),o=t("lib/sub_stack"),i=t("controllers/page"),r=function(n){function r(){this.loadMore=u(this.loadMore,this),this.navTo=u(this.navTo,this),this.url=u(this.url,this),r.__super__.constructor.apply(this,arguments),this.data=null}return f(r,n),r.prototype.className=""+i.prototype.className+" recents",r.prototype.template=t("views/recents/index"),r.prototype.elements=$.extend({".subjects .list":"subjectList",".groups .list":"groupList",".discussions .help.list":"helpList",".discussions .science.list":"scienceList",".discussions .chat.list":"chatList",".collections .list":"collectionList"},i.prototype.elements),r.prototype.events=$.extend({'click button[name="load-more"]':"loadMore","click [data-link]":"navTo"},i.prototype.events),r.prototype.render=function(){return this.subjectsPage||(this.subjectsPage=1),this.groupsPage||(this.groupsPage=1),this.collectionsPage||(this.collectionsPage=1),this.discussionPages||(this.discussionPages={help:1,science:1,chat:1}),r.__super__.render.apply(this,arguments)},r.prototype.url=function(){return""+r.__super__.url.apply(this,arguments)+"/recents"},r.prototype.reload=function(t){var n=this;return this.data?t(this.data):e.get(this.url(),function(e){return n.data={featured:e.featured,tags:e.tags,subjects:{1:e.subjects},groups:{1:e.groups},discussions:{help:{1:e.discussions.help},science:{1:e.discussions.science},chat:{1:e.discussions.chat}},collections:{1:e.collections}},n.render(),t(n.data)})},r.prototype.navTo=function(e){var t;return e.preventDefault(),t=$(e.target).closest("[data-link]"),this.navigate(t.data("link"))},r.prototype.loadMore=function(n){var r,i,s,o,u=this;n.preventDefault(),s=$(n.target),o=s.data("type"),r=s.data("category");switch(o){case"subjects":return e.get(""+this.url()+"/subjects?page="+(this.subjectsPage+=1)+"&per_page=12",function(e){var n;e.length>0&&(n={subjects:{}},n.subjects[u.subjectPage]=e,u.data.subjects[u.subjectsPage]=e,u.subjectList.append(t("views/recents/subjects")(n)));if(e.length<12)return s.attr({disabled:!0})});case"groups":return e.get(""+this.url()+"/groups?page="+(this.groupsPage+=1)+"&per_page=10",function(e){var n;e.length>0&&(n={groups:{}},n.groups[u.groupPage]=e,u.data.groups[u.groupsPage]=e,u.groupList.append(t("views/recents/groups")(n)));if(e.length<10)return s.attr({disabled:!0})});case"discussions":return i=this.discussionPages[r]+=1,e.get(""+this.url()+"/discussions?category="+r+"&page="+i+"&per_page=10",function(e){var n;e.length>0&&(n={discussions:{}},n.discussions[i]=e,u.data.discussions[r][i]=e,u[""+r+"List"].append(t("views/recents/discussions")(n)));if(e.length<10)return s.attr({disabled:!0})});case"collections":return e.get(""+this.url()+"/collections?page="+(this.collectionsPage+=1)+"&per_page=10",function(e){var n;e.length>0&&(n={collections:{}},n.collections[u.collectionsPage]=e,u.collectionList.append(t("views/recents/collections")(n)));if(e.length<10)return s.attr({disabled:!0})})}},r}(i),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.controllers={index:r},t.prototype.routes={"/":"index","/recent":"index"},t.prototype["default"]="index",t.prototype.className="stack recents",t}(o),n.exports=s}).call(this)},"controllers/search":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("zooniverse/lib/api"),r=t("spine").Controller,f=t("lib/config").project,a=t("lib/util").equalObjects,u=t("lib/sub_stack"),s=t("lib/params"),i=function(n){function r(){return this.hasChanged=l(this.hasChanged,this),this.buildTagsFrom=l(this.buildTagsFrom,this),this.setFacetCounts=l(this.setFacetCounts,this),this.checkTags=l(this.checkTags,this),this.checkFacets=l(this.checkFacets,this),this.runQuery=l(this.runQuery,this),this.search=l(this.search,this),this.paginationLinks=l(this.paginationLinks,this),this.render=l(this.render,this),this.parseParams=l(this.parseParams,this),r.__super__.constructor.apply(this,arguments)}return h(r,n),r.prototype.className="page",r.prototype.template=t("views/search/index"),r.prototype.elements={"form.search":"searchForm",'form.search .text input[name="text"]':"searchBox","form.search .category :checkbox":"categoryCheck","form.search .tags .facets .available":"availableTagFacets","form.search .tags .facets .selected":"selectedTagFacets",".results":"results"},r.prototype.events={"submit form.search":"search","click form.search .type :checkbox":"checkFacets","click form.search .category :checkbox":"checkFacets","click form.search .tags :checkbox":"checkTags"},r.prototype.activate=function(e){var t;if(!e)return;return r.__super__.activate.apply(this,arguments),t=this.parseParams(),t.per_page=10,this.queryTags=t.tags||{},this.render(),this.runQuery(t),this.lastQuery||(this.lastQuery={text:""})},r.prototype.parseParams=function(){return this.params=s.parse(),this.params.text||this.params.kind||this.params.category||this.params.tags?this.params:!1},r.prototype.render=function(){return this.html(this.template(this))},r.prototype.paginationLinks=function(){var e=this;return $(".results .pages",this.el).pagination({cssStyle:"compact-theme",currentPage:this.searchResults.page,items:this.searchResults.total,itemsOnPage:10,onPageClick:function(t){var n;return n=$.extend(!0,{},e.lastQuery),n.page=t,e.runQuery(n)}})},r.prototype.search=function(e){var t;return e!=null&&e.preventDefault(),t={text:""+this.searchBox.val().trim().replace(/\s+/," ")},this.queryType&&(t.kind=this.queryType),this.queryCategory&&(t.category=this.queryCategory),t.tags=$.extend(!0,{},this.queryTags),this.searching?this.pending=t:this.runQuery(t)},r.prototype.runQuery=function(n){var r,i=this;if(!this.hasChanged(n))return;if(this.searching)return;return this.searching=!0,this.lastQuery=n,r=0,e.get("/projects/"+f+"/talk/search",n,function(e){return i.searchResults=e,i.results.html(t("views/search/results")(e)),i.paginationLinks(),i.setFacetCounts(e),i.searching=!1,i.pending&&i.runQuery(i.pending),i.pending=null},function(){i.searching=!1,i.lastQuery=null,r+=1;if(r<3)return i.runQuery(i.pending||n),i.pending=null})},r.prototype.checkFacets=function(e){var t,n;return t=$(e.target),n=t.closest("section").attr("class"),t.is(":checked")?($("."+n+" :checkbox:not(:checked)").each(function(){return $(this).attr("disabled","disabled")}),n==="category"&&(this.queryCategory=t.val()),n==="type"&&(this.queryType=t.val())):($("."+n+" :checkbox:not(:checked)").each(function(){return $(this).removeAttr("disabled")}),n==="category"&&(this.queryCategory=null),n==="type"&&(this.queryType=null)),this.search()},r.prototype.checkTags=function(e){var t,n;return n=$(e.target),t=n.closest(".facet").remove(),n.is(":checked")?(t.find(".facet-count").remove(),this.selectedTagFacets.append(t),this.queryTags[n.val()]=!0):delete this.queryTags[n.val()],this.search()},r.prototype.setFacetCounts=function(e){var t,n,r,i,s,o,u,a,f;this.el.find("label .facet-count").attr("data-count",0),a=e.facets;for(i in a){s=a[i],f=(s!=null?s.terms:void 0)||[];for(o=0,u=f.length;o<u;o++)n=f[o],r=$("section."+i+" .facet[data-facet-type='"+n.term+"']"),t=r.find(".facet-count"),t.attr("data-count",n.count);this.el.find("section."+i+" label .facet-count").each(function(e,t){var n;return n=$(t).closest(".facet").children("input"),$(t).attr("data-count")>0?n.removeAttr("disabled"):i==="tags"&&n.is(":checked")?n.attr("disabled","disabled"):n.is(":checked")?(n.removeAttr("checked"),n.attr("disabled","disabled")):n.attr("disabled","disabled")})}return this.buildTagsFrom(e)},r.prototype.buildTagsFrom=function(e){var n,r,i,s,o,u;r=((o=e.facets.tags)!=null?o.terms:void 0)||[],this.availableTagFacets.html(""),u=[];for(i=0,s=r.length;i<s;i++){n=r[i];if(this.queryTags[n.term])continue;u.push(this.availableTagFacets.append(t("views/search/facet")({term:n.term,label:n.term,count:n.count})))}return u},r.prototype.hasChanged=function(e){return e?this.lastQuery?!a(e,this.lastQuery):!0:!1},r}(r),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.controllers={index:i},t.prototype.routes={"/search*query":"index"},t.prototype["default"]="index",t.prototype.className="stack search",t}(u),n.exports=o}).call(this)},"controllers/sidebar_page":function(e,t,n){(function(){}).call(this)},"controllers/subject_viewer":function(e,t,n){(function(){var e,r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("spine").Controller,e=t("jqueryify"),r=t("lib/canvas-graph"),s=function(n){function i(){this.setMetadata=o(this.setMetadata,this),this.onClickQuarter=o(this.onClickQuarter,this);var t,n,r,s,u,a=this;i.__super__.constructor.apply(this,arguments),this.quarterList=Object.keys(this.subject.location).sort(function(e,t){var n,r;return n=e.split("-"),r=t.split("-"),n[0]===r[0]?n[1]-r[1]:n[0]-r[0]}),n=location.search.slice(1).split("&");for(r=0,s=n.length;r<s;r++)t=n[r],t.indexOf("quarter")>0&&(this.selectedQuarter=location.search.match(/quarter=([\S]+)/));(u=this.selectedQuarter)==null&&(this.selectedQuarter=this.quarterList[0]),this.html(this.template(this)),this.el.appendTo(e(".page.focus.subject > header")),setTimeout(function(){return e('[data-quarter="'+a.selectedQuarter+'"]').click()})}return a(i,n),i.imageIn=function(e){return e!=null?e.standard:void 0},i.subjectTitle=function(e){return"Image "+e.zooniverse_id},i.prototype.className="subject-viewer planet-hunter-subject-viewer",i.prototype.template=t("views/subjects/viewer"),i.prototype.subject=null,i.prototype.elements={canvas:"canvas",".canvas-container":"canvasContainer"},i.prototype.events={"click .quarter":"onClickQuarter"},i.prototype.onClickQuarter=function(t){var n,i,s=this;return i=(new Spinner({width:3,color:"#fff"})).spin(this.canvasContainer.get(0)),e("[data-quarter]").removeClass("active"),this.selectedQuarter=e(t.currentTarget).data("quarter"),e('[data-quarter="'+this.selectedQuarter+'"]').addClass("active"),n=this.subject.location[this.selectedQuarter],window.location.origin!=="http://talk.planethunters.org"&&(n=n.replace("http://www.planethunters.org/","https://s3.amazonaws.com/zooniverse-static/planethunters.org/")),e.getJSON(""+n,function(e){return i.stop(),s.setMetadata(),s.graph=new r(s.el,s.canvas.get(0),e)})},i.prototype.setMetadata=function(){var t,n,r,i,s;t=this.subject.metadata,e(".meta_type").html(t.type||"Dwarf"),e(".meta_kid").html(t.kepler_id||"unknown"),e(".meta_temp").html(t.teff||"unknown"),e(".meta_mag").html(t.magnitudes.kepler||"unknown"),e(".meta_radius").html(t.radius||"unknown"),e(".old_ph_link").hide();if(t.old_zooniverse_ids!=null){i=t.light_curves,s=[];for(r in i)n=i[r],n.quarter===this.selectedQuarter?(e(".old_ph_link").show(),s.push(e(".old_ph_link").attr("href","http://talk.planethunters.org/objects/"+t.old_zooniverse_ids[r]))):s.push(void 0);return s}},i.prototype.render=function(){return this.html(this.template(this))},i.prototype.destroy=function(){return this.el.off()},i}(i),n.exports=s}).call(this)},"controllers/subjects":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c=function(e,t){return function(){return e.apply(t,arguments)}},h={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("zooniverse/lib/api"),u=t("lib/sub_stack"),i=t("models/focus"),s=t("controllers/focus_page"),l=t("views/subjects/show"),e=t("jqueryify"),a=t("controllers/subject_viewer"),o=function(n){function r(){return this.paginateCollections=c(this.paginateCollections,this),this.paginationLinks=c(this.paginationLinks,this),r.__super__.constructor.apply(this,arguments)}return p(r,n),r.prototype.template=l,r.prototype.className=""+s.prototype.className+" subject page",r.prototype.focusType="subjects",r.prototype.elements=e.extend({".collections .list":"collectionsList",".collections .pages":"paginateLinks"},s.prototype.elements),r.prototype.reload=function(e){var t=this;return this.fetchOnLoad?i.fetch(this.focusId,function(n){var r,i,s,o,u;t.data=n,r=t.data.collections,t.data.collections={};if((r!=null?r.length:void 0)>0){s=0;for(i=o=0,u=r.length;o<=u;i=o+=3)t.data.collections[s+=1]=r.slice(i,i+3);t.data.collectionsCount=r.length,t.data.collectionPages=s}else t.data.collectionsCount=0,t.data.collectionPages=0;return t.render(),e(t.data)}):r.__super__.reload.apply(this,arguments)},r.prototype.render=function(){var e;return(e=this.subjectViewer)!=null&&e.destroy(),r.__super__.render.apply(this,arguments),this.subjectViewer=new a({el:this.el.find(".subject-viewer"),subject:this.data}),this.collectionPage=1,this.paginationLinks()},r.prototype.paginationLinks=function(){if(this.data.collectionPages>1)return this.paginateLinks.pagination({cssStyle:"compact-theme",items:this.data.collectionsCount,itemsOnPage:3,onPageClick:this.paginateCollections});return},r.prototype.paginateCollections=function(e,n){return n.preventDefault(),this.collectionsList.html(t("views/collections/list")({collections:this.data.collections[e]}))},r}(s),f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.controllers={show:o},t.prototype.routes={"/subjects/:focusId":"show"},t}(u),n.exports=f}).call(this)},"controllers/users":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c,h=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("zooniverse/lib/api"),l=t("zooniverse/lib/models/user"),f=t("lib/sub_stack"),s=t("controllers/page"),r=t("models/message"),i=t("controllers/message_list"),u=function(n){function r(){this.loadMore=h(this.loadMore,this),this.render=h(this.render,this),this.reload=h(this.reload,this),this.url=h(this.url,this),this.sections={groups:{page:1,perPage:6,template:"views/users/group_comments",argument:"groups"},subjects:{page:1,perPage:6,template:"views/users/subject_comments",argument:"subjects"},collections:{page:1,perPage:6,template:"views/users/collection_comments",argument:"collections"},boards:{page:1,perPage:15,template:"views/discussions/list",argument:"discussions"},my_collections:{page:1,perPage:8,template:"views/collections/list",argument:"collections"}},r.__super__.constructor.apply(this,arguments)}return d(r,n),r.prototype.className=""+s.prototype.className+" user",r.prototype.template=t("views/users/profile"),r.prototype.events=$.extend({"click .subjects .load-more button":"loadMore","click .groups .load-more button":"loadMore","click .collections .load-more button":"loadMore","click .boards .load-more button":"loadMore","click .my_collections .load-more button":"loadMore"},s.prototype.events),r.prototype.url=function(){return""+r.__super__.url.apply(this,arguments)+"/users/profile"},r.prototype.reload=function(t){var n=this;return e.get(this.url(),function(e){return n.data=e,n.data.sections=n.sections,n.render(),t(n.data)})},r.prototype.render=function(){r.__super__.render.apply(this,arguments);if(this.messageList)return this.messageList.viewedUser=this.id,this.messageList.render();if(l.current)return this.messageList=new i(".message-list",this.id)},r.prototype.loadMore=function(n){var r,i,s,o,u=this;return n.preventDefault(),s=$(n.target),o=s.data("type"),r=this.sections[o].page+=1,i=this.sections[o],e.get(""+this.url()+"?type="+o+"&page="+r,function(e){var n;e=e[o],e.length>0&&(n={},n[i.argument]=e,$("."+o+" .list").append(t(i.template)(n)));if(e.length<i.perPage)return s.attr({disabled:!0})})},r}(s),a=function(e){function n(){return this.render=h(this.render,this),this.url=h(this.url,this),n.__super__.constructor.apply(this,arguments)}return d(n,e),n.prototype.template=t("views/users/show"),n.prototype.url=function(){return""+s.prototype.url()+"/users/"+this.id},n.prototype.activate=function(e){if(!e)return;return this.id=e.id,n.__super__.activate.apply(this,arguments)},n.prototype.render=function(){var e;return this.data.user={name:this.id,zooniverse_id:this.data.zooniverse_id,state:(e=this.data.talk)!=null?e.state:void 0},n.__super__.render.apply(this,arguments)},n}(u),o=function(n){function r(){return this.changePreference=h(this.changePreference,this),r.__super__.constructor.apply(this,arguments)}return d(r,n),r.prototype.template=t("views/users/preferences"),r.prototype.fetchOnLoad=!1,r.prototype.events=$.extend({"change .preference":"changePreference"},s.prototype.events),r.prototype.reload=function(){return this.render()},r.prototype.changePreference=function(t){var n,r,i,s,o=this;return t.preventDefault(),i=$(t.target),r=i.closest(".row"),n=i.attr("name"),s=i.val(),r.find(".description").hide(),r.find(".description[name='"+s+"']").show(),e.put("/users/preferences",{key:"talk."+n,value:s},function(){var e,t;return(e=l.current).preferences||(e.preferences={}),(t=l.current.preferences).talk||(t.talk={}),l.current.preferences.talk[n]=s,o.messageList.render()})},r}(u),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.controllers={show:a,profile:u,preferences:o},t.prototype.routes={"/profile":"profile","/users/profile":"profile","/users/preferences":"preferences","/users/:id":"show"},t.prototype["default"]="profile",t.prototype.className="stack users",t}(f),n.exports=c}).call(this)},index:function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;t("lib/setup"),N=(new Spinner({width:3})).spin(document.querySelector("#app")),v=t("spine/lib/manager").Stack,e=t("jqueryify"),C=t("lib/config"),T=C.project,E=C.apiHost,w=C.analytics,r=t("zooniverse/lib/api"),r.init({host:E}),i=t("controllers/app_header"),a=t("controllers/following"),h=t("controllers/recents"),m=t("controllers/subjects"),f=t("controllers/groups"),o=t("controllers/collections"),s=t("controllers/boards"),u=t("controllers/discussions"),c=t("controllers/moderation"),l=t("controllers/messages"),d=t("controllers/search"),y=t("controllers/users"),p=t("models/roles"),g=t("zooniverse/lib/models/user"),g.project=T,x=t("zooniverse/lib/google_analytics"),t("lib/moderation_links"),t("lib/follow_links"),t("lib/message_counter"),S={},x.init(w),b=function(){return e("a.active").removeClass("active"),setTimeout(function(){var t,n,r,i,s,o,u,a;i=location.hash.split("/"),n=function(){var e,t,n;n=[];for(r=e=0,t=i.length;e<t;r=++e)s=i[r],n.push(i.slice(0,r+1||9e9).join("/"));return n}(),a=[];for(o=0,u=n.length;o<u;o++)t=n[o],a.push(e("a[href='"+t+"']").addClass("active"));return a})},g.bind("sign-in",function(){var n,r;if(((n=g.current)!=null?(r=n.talk)!=null?r.state:void 0:void 0)==="banned")return e("body").html(t("views/users/banned")())}),g.bind("sign-in",function(){var t;return t=g.current!=null,e("html").toggleClass("signed-in",t),e("html").toggleClass("not-signed-in",!t)}),g.bind("sign-in",function(){var t,n,r,i;if(g.current){n=p.roles[g.current.name]||[],g.current.roles=n;for(r=0,i=n.length;r<i;r++)t=n[r],g.current[t]=!0;if(g.current.moderator||g.current.admin)return e("html").addClass("privileged-user"),g.current.isPrivileged=!0}}),p.fetch(function(){return g.fetch().onSuccess(function(){return N.stop(),S.el=e("#app"),S.header=new i,S.header.el.prependTo(S.el),S.stack=new v({controllers:{recents:h,following:a,subjects:m,groups:f,boards:s,discussions:u,collections:o,users:y,messages:l,moderation:c,search:d},routes:{"/":"recents","/recent":"recents","/following":"following","/subjects":"subjects","/groups":"groups","/collections":"collections","/boards":"boards","/profile":"users","/users":"users","/messages":"messages","/moderation":"moderation","/search":"search","/:focusType/:focusId/discussions":"discussions"},"default":"recents"}),Spine.Route.setup(),S.stack.el.appendTo(S.el),setTimeout(b)})}),e(window).on("hashchange",b),window.defaultAvatar=function(n){return e(n).removeAttr("onerror"),e(n).replaceWith(t("views/users/default_avatar")())},n.exports=S}).call(this)},"lib/autocomplete":function(e,t,n){(function(e){"use strict";function n(e,n,r){var i="("+r.replace(t,"\\$1")+")";return e.replace(new RegExp(i,"gi"),"<strong>$1</strong>")}function r(t,r){this.el=e(t),this.el.attr("autocomplete","off"),this.suggestions=[],this.data=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.el.val(),this.intervalId=0,this.cachedResponse=[],this.onChangeInterval=null,this.onChange=null,this.ignoreValueChange=!1,this.serviceUrl=r.serviceUrl,this.isLocal=!1,this.options={autoSubmit:!1,minChars:1,maxHeight:300,deferRequestBy:0,width:0,highlight:!0,params:{},fnFormatResult:r.format||n,delimiter:null,zIndex:9999},this.initialize(),this.setOptions(r),this.el.data("autocomplete",this)}var t=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g");e.fn.autocomplete=function(t,n){var i;return typeof t=="string"?(i=this.data("autocomplete"),typeof i[t]=="function"&&i[t](n)):i=new r(this.get(0)||e("<input />"),t),i},r.prototype={killerFn:null,initialize:function(){this.api=window.require("zooniverse/lib/api");var t=this,n=Math.floor(Math.random()*1048576).toString(16),r="Autocomplete_"+n,i=function(e){t.onKeyPress(e)};this.killerFn=function(n){e(n.target).parents(".autocomplete").size()===0&&(t.killSuggestions(),t.disableKillerFn())},this.options.width||(this.options.width=this.el.outerWidth()),this.mainContainerId="AutocompleteContainter_"+n,e('<div id="'+this.mainContainerId+'" style="position:absolute;z-index:9999;"><div class="autocomplete-w1"><div class="autocomplete" id="'+r+'" style="display:none; width:300px;"></div></div></div>').appendTo("body"),this.container=e("#"+r),this.fixPosition(),window.opera?this.el.keypress(i):this.el.keydown(i),this.el.keyup(function(e){t.onKeyUp(e)}),this.el.blur(function(){t.enableKillerFn()}),this.el.focus(function(){t.fixPosition()}),this.el.change(function(){t.onValueChanged()})},extendOptions:function(t){e.extend(this.options,t)},setOptions:function(t){var n=this.options;this.extendOptions(t);if(n.lookup||n.isLocal)this.isLocal=!0,e.isArray(n.lookup)&&(n.lookup={suggestions:n.lookup,data:[]});e("#"+this.mainContainerId).css({zIndex:n.zIndex}),this.container.css({maxHeight:n.maxHeight+"px",width:n.width})},clearCache:function(){this.cachedResponse=[],this.badQueries=[]},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},fixPosition:function(){var t=this.el.offset();e("#"+this.mainContainerId).css({top:t.top+this.el.outerHeight()+"px",left:t.left+"px"})},enableKillerFn:function(){var t=this;e(document).bind("click",t.killerFn)},disableKillerFn:function(){var t=this;e(document).unbind("click",t.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.hide(),e.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},onValueChanged:function(){this.change(this.selectedIndex)},onKeyPress:function(e){if(this.disabled||!this.enabled)return;switch(e.keyCode){case 27:this.el.val(this.currentValue),this.hide();break;case 9:case 13:if(this.selectedIndex===-1){this.hide();return}this.select(this.selectedIndex);if(e.keyCode===9)return;break;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()},onKeyUp:function(e){if(this.disabled)return;switch(e.keyCode){case 38:case 40:return}clearInterval(this.onChangeInterval);if(this.currentValue!==this.el.val())if(this.options.deferRequestBy>0){var t=this;this.onChangeInterval=setInterval(function(){t.onValueChange()},this.options.deferRequestBy)}else this.onValueChange()},onValueChange:function(){clearInterval(this.onChangeInterval),this.currentValue=this.el.val();var e=this.getQuery(this.currentValue);this.selectedIndex=-1;if(this.ignoreValueChange){this.ignoreValueChange=!1;return}e===""||e.length<this.options.minChars?this.hide():this.getSuggestions(e)},getQuery:function(t){var n,r;return n=this.options.delimiter,n?(r=t.split(n),e.trim(r[r.length-1])):e.trim(t)},getSuggestionsLocal:function(e){var t,n,r,i,s;n=this.options.lookup,r=n.suggestions.length,t={suggestions:[],data:[]},e=e.toLowerCase();for(s=0;s<r;s++)i=n.suggestions[s],i.toLowerCase().indexOf(e)===0&&(t.suggestions.push(i),t.data.push(n.data[s]));return t},getSuggestions:function(t){var n,r;n=this.isLocal?this.getSuggestionsLocal(t):this.cachedResponse[t],n&&e.isArray(n.suggestions)?(this.suggestions=n.suggestions,this.data=n.data,this.suggest()):this.isBadQuery(t)||(r=this,r.options.params.query=t,this.api.get(this.serviceUrl,r.options.params,function(e){r.processResponse(e)}))},isBadQuery:function(e){var t=this.badQueries.length;while(t--)if(e.indexOf(this.badQueries[t])===0)return!0;return!1},hide:function(){this.enabled=!1,this.selectedIndex=-1,this.container.hide()},suggest:function(){if(this.suggestions.length===0){this.hide();return}var t,n,r,i,s,o,u,a,f;t=this,n=this.suggestions.length,i=this.options.fnFormatResult,s=this.getQuery(this.currentValue),a=function(e){return function(){t.activate(e)}},f=function(e){return function(){t.select(e)}},this.container.hide().empty();for(o=0;o<n;o++)u=this.suggestions[o],r=e((t.selectedIndex===o?'<div class="selected"':"<div")+' title="'+u+'">'+i(u,this.data[o],s)+"</div>"),r.mouseover(a(o)),r.click(f(o)),this.container.append(r);this.enabled=!0,this.container.show()},processResponse:function(e){this.options.noCache||(this.cachedResponse[e.query]=e,e.suggestions.length===0&&this.badQueries.push(e.query)),e.query===this.getQuery(this.currentValue)&&(this.suggestions=e.suggestions,this.data=e.data,this.suggest())},activate:function(t){var n,r;return n=this.container.children(),this.selectedIndex!==-1&&n.length>this.selectedIndex&&e(n.get(this.selectedIndex)).removeClass(),this.selectedIndex=t,this.selectedIndex!==-1&&n.length>this.selectedIndex?(r=n.get(this.selectedIndex),e(r).addClass("selected"),r):null},deactivate:function(e,t){e.className="",this.selectedIndex===t&&(this.selectedIndex=-1)},select:function(e){var t,n;t=this.suggestions[e],t&&(this.el.val(t),this.options.autoSubmit&&(n=this.el.parents("form"),n.length>0&&n.get(0).submit()),this.ignoreValueChange=!0,this.hide(),this.onSelect(e))},change:function(t){var n,r,i,s,o;i=this,n=this.suggestions[t],n?(s=i.suggestions[t],o=i.data[t],i.el.val(i.getValue(s))):(s="",o=-1),r=i.options.onChange,e.isFunction(r)&&r(s,o,i.el)},moveUp:function(){if(this.selectedIndex===-1)return;if(this.selectedIndex===0){this.container.children().get(0).className="",this.selectedIndex=-1,this.el.val(this.currentValue);return}this.adjustScroll(this.selectedIndex-1)},moveDown:function(){if(this.selectedIndex===this.suggestions.length-1)return;this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var t,n,r,i;t=this.activate(e),n=t.offsetTop,r=this.container.scrollTop(),i=r+this.options.maxHeight-25,n<r?this.container.scrollTop(n):n>i&&this.container.scrollTop(n-this.options.maxHeight+25),this.el.val(this.getValue(this.suggestions[e]))},onSelect:function(t){var n=this,r=n.options.onSelect,i=n.suggestions[t],s=n.data[t];n.el.val(n.getValue(i)),e.isFunction(r)&&r(i,s,n.el)},getValue:function(e){var t=this,n=t.options.delimiter,r,i;return n?(r=t.currentValue,i=r.split(n),i.length===1?e:r.substr(0,r.length-i[i.length-1].length)+e):e}}})(jQuery)},"lib/canvas-graph":function(e,t,n){(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}},r=[].slice;e=function(){function n(e,n,r){this.el=e,this.canvas=n,this.data=r,this.onMouseMove=t(this.onMouseMove,this),this.onMouseDown=t(this.onMouseDown,this),this.leftPadding=60,this.showAxes=!0,this.ctx=this.canvas.getContext("2d"),this.highlights=[],this.dataLength=Math.min(this.data.x.length,this.data.y.length),this.data_raw={},this.data_raw.x=this.data.x.slice(0),this.data_raw.y=this.data.y.slice(0),this.zoomRanges=[this.largestX,10,2],this.zoomLevel=0,this.graphCenter=5,this.processLightcurve()}var e;return e=!1,n.prototype.disableMarking=function(){return this.markingDisabled=!0},n.prototype.enableMarking=function(){var e=this;return this.markingDisabled=!1,this.marks=new Marks,window.marks=this.marks,this.canvas.addEventListener("mousedown",function(t){return e.onMouseDown(t)}),this.canvas.addEventListener("touchstart",function(t){return e.addMarkToGraph(t)}),this.canvas.addEventListener("mousemove",function(t){return e.onMouseMove(t)})},n.prototype.onMouseDown=function(e){var t;t=e.pageX-e.target.getBoundingClientRect().left-window.scrollX;if(t<80)return;return this.addMarkToGraph(e)},n.prototype.onMouseMove=function(e){var t,n;if(this.markingDisabled)return;if(classifier.el.find("#graph").hasClass("is-zooming"))return;return this.sliderValue=+classifier.el.find("#ui-slider").val(),t=e.pageX-e.target.getBoundingClientRect().left-window.scrollX,n=e.pageY-e.target.getBoundingClientRect().top-window.scrollY},n.prototype.processLightcurve=function(e){var t,n,i,s,o,u;e==null&&(e=!1),this.removeOutliers=e,this.data.x=this.data_raw.x,this.data.y=this.data_raw.y,this.smallestX=Math.min.apply(Math,this.data_raw.x),this.originalMin=this.smallestX,u=r.call(this.data.x);for(t=s=0,o=u.length;s<o;t=++s)i=u[t],this.data.x[t]=i-this.smallestX;e&&(this.data=this.processOutliers(this.data_raw,n=3)),this.data.y=this.normalize(this.data.y),this.smallestX=Math.min.apply(Math,this.data.x),this.smallestY=Math.min.apply(Math,this.data.y),this.largestX=Math.max.apply(Math,this.data.x),this.largestY=Math.max.apply(Math,this.data.y),this.plotPoints()},n.prototype.toggleOutliers=function(){this.removeOutliers=!this.removeOutliers,this.processLightcurve(this.removeOutliers)},n.prototype.normalize=function(e){var t,n,i,s,o,u,a,f;o=[],n=this.mean(e),i=this.std(e),f=r.call(e);for(t=u=0,a=f.length;u<a;t=++u)s=f[t],o[t]=(s-1)/i,o[t]=s/n;return o},n.prototype.processOutliers=function(e,t){var n,i,s,o,u,a,f,l;n={},n.x=[],n.y=[],s=this.mean(e.y),o=this.std(e.y),l=r.call(e.y);for(i=a=0,f=l.length;a<f;i=++a){u=l[i];if(u-s>t*o)continue;n.x.push(e.x[i]),n.y.push(e.y[i])}return n},n.prototype.std=function(e){var t,n,r,i,s;t=this.mean(e),n=0;for(i=0,s=e.length;i<s;i++)r=e[i],n+=Math.pow(Math.abs(t-r),2);return Math.sqrt(n/e.length)},n.prototype.mean=function(e){var t,n,r,i;t=0;for(r=0,i=e.length;r<i;r++)n=e[r],t+=n;return t/e.length},n.prototype.showFakePrevMarks=function(){var e,t,n,i,s,o,u,a;this.zoomOut(),n=5,i=1,t=Math.floor(Math.random()*(n-i)+i),this.generateFakePrevMarks(t),u=r.call(this.prevMarks),a=[];for(s=0,o=u.length;s<o;s++)e=u[s],a.push(this.highlightCurve(e.xL,e.xR));return a},n.prototype.generateFakePrevMarks=function(e){var t,n,r,i,s,o,u;r=.5,n=3,s=[],i=[],this.prevMarks=[],u=[];for(t=o=0;0<=e?o<e:o>e;t=0<=e?++o:--o)i[t]=Math.random()*(n-r)+r,s[t]=Math.random()*35+1,u.push(this.prevMarks[t]={xL:s[t]-i[t]/2,xR:s[t]+i[t]/2});return u},n.prototype.showPrevMarks=function(){var e,t,n,i,s;$("#graph-container").addClass("showing-prev-data"),i=r.call(this.prevMarks),s=[];for(t=0,n=i.length;t<n;t++)e=i[t],s.push(this.highlightCurve(e.xL,e.xR));return s},n.prototype.highlightCurve=function(e,t){return this.highlights.push({xLeft:e,xRight:t}),this.plotPoints()},n.prototype.drawHighlights=function(){var e,t,n,i,s,o,u,a,f;n=this.xMin/(this.xMax-this.xMin)*(this.canvas.width-this.leftPadding),a=r.call(this.highlights),f=[];for(o=0,u=a.length;o<u;o++)e=a[o],f.push(function(){var r,o,u;u=[];for(t=r=0,o=this.dataLength;0<=o?r<o:r>o;t=0<=o?++r:--r)if(this.data.x[t]>=e.xLeft&&this.data.x[t]<=e.xRight){i=(+this.data.x[t]+this.toDays(this.leftPadding)-this.xMin)/(this.xMax-this.xMin)*(this.canvas.width-this.leftPadding),s=(+this.data.y[t]-this.yMin)/(this.yMax-this.yMin)*this.canvas.height,s=-s+this.canvas.height,this.ctx.fillStyle="rgba(255, 0, 0, 1.0)";if(i-n<60)continue;u.push(this.ctx.fillRect(i-n,s,4,4))}else u.push(void 0);return u}.call(this));return f},n.prototype.plotPoints=function(e,t,n,r){var i,s,o,u,a;e==null&&(e=this.smallestX),t==null&&(t=this.largestX),n==null&&(n=this.smallestY),r==null&&(r=this.largestY),this.xMin=e,this.xMax=t,this.yMin=n,this.yMax=r,this.clearCanvas(),this.sliderValue=this.el.find("#ui-slider").val();for(i=u=0,a=this.dataLength;0<=a?u<a:u>a;i=0<=a?++u:--u){s=(+this.data.x[i]-e)/(t-e)*(this.canvas.width-this.leftPadding);if(s<0)continue;o=(+this.data.y[i]-n)/(r-n)*this.canvas.height,o=-o+this.canvas.height,this.ctx.fillStyle="#fff",this.ctx.fillRect(s+this.leftPadding,o,2,2)}this.drawHighlights(),$("#graph-container").hasClass("showing-prev-data")&&this.showPrevMarks(),this.showAxes&&(this.drawXTickMarks(e,t),this.drawYTickMarks(n,r)),this.scale=(parseFloat(this.largestX)-parseFloat(this.smallestX))/(parseFloat(this.xMax)-parseFloat(this.xMin)),this.rescaleMarks(e,t)},n.prototype.rescaleMarks=function(e,t){var n,r,i,s,o,u;this.zoomLevel===0?this.sliderValue=0:this.sliderValue=+classifier.el.find("#ui-slider").val();if(this.marks){u=this.marks.all;for(s=0,o=u.length;s<o;s++)n=u[s],i=(parseFloat(n.dataXMinRel)+parseFloat(this.toDays(this.leftPadding))-parseFloat(e)-parseFloat(this.sliderValue))/(parseFloat(t)-parseFloat(e))*parseFloat(this.canvas.width-this.leftPadding),r=(parseFloat(n.dataXMaxRel)+parseFloat(this.toDays(this.leftPadding))-parseFloat(e)-parseFloat(this.sliderValue))/(parseFloat(t)-parseFloat(e))*parseFloat(this.canvas.width-this.leftPadding),n.element.style.width=parseFloat(r)-parseFloat(i)+"px",n.element.style.left=parseFloat(i)+"px",n.save(i,r)}this.scale=(this.largestX-this.smallestX)/(this.xMax-this.xMin)},n.prototype.zoomOut=function(e){var t,n,r,i,s,o;return this.zoomLevel=0,classifier.el.find("#ui-slider").val(this.graphCenter-this.zoomRanges[this.zoomLevel]/2),this.plotPoints(this.smallestX,this.largestX),s=[this.xMin,this.xMax],n=s[0],t=s[1],o=[this.smallestX,this.largestX],i=o[0],r=o[1],classifier.el.find("#zoom-button").removeClass("zoomed"),classifier.el.find("#zoom-button").removeClass("allowZoomOut"),classifier.el.find("#ui-slider").attr("disabled",!0),classifier.el.find(".noUi-handle").fadeOut(150)},n.prototype.zoomToCenter=function(e){var t,n;return console.log("zoomToCenter, CENTER = ",e),t=e-this.zoomRanges[this.zoomLevel]/2,n=e+this.zoomRanges[this.zoomLevel]/2,t<this.smallestX&&(t=this.smallestX,n=this.smallestX+this.zoomRanges[this.zoomLevel]/2,console.log("ENFORCING BOUNDS: ["+t+","+n+"] (exceeded left bound)")),n>this.largestX&&(n=this.largestX,t=this.largestX-this.zoomRanges[this.zoomLevel]/2,console.log("ENFORCING BOUNDS: ["+t+","+n+"] (exceeded right bound)")),classifier.el.find("#ui-slider").val(t),console.log("ZOOMING TO: ["+t+","+n+"] (exceeded right bound)"),console.log,this.plotPoints(t,n)},n.prototype.zoomInTo=function(e,t){var n,r,i,s,o=this;return classifier.el.find("#graph").addClass("is-zooming"),s=[this.xMin,this.xMax],r=s[0],n=s[1],i=setInterval(function(){o.plotPoints(r,n),o.rescaleMarks(r,n),r>=e||(r+=1.5),n<=t||(n-=1.5);if(r>=e&&n<=t)return clearInterval(i),classifier.el.find("#graph").removeClass("is-zooming"),o.plotPoints(e,t),o.rescaleMarks(e,t)},30)},n.prototype.drawXTickMarks=function(e,t){var n,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;p=5,h=10,d=1,c="#ccc",u="#ccc",f=15,v=Math.round(Math.abs(e-t)),v<=2?(s=4,o=16,a=8):v<=10?(s=4,o=4,a=4):(s=2,o=1,a=2),g=[],m=1/o,n=0,y=Math.floor(e);while(y<=Math.ceil(t)){for(i=b=0;0<=o?b<o:b>o;i=0<=o?++b:--b)l=y+i*m,l>Math.ceil(t)||g.push(l);n++,y++}S=r.call(g),x=[];for(n=w=0,E=S.length;w<E;n=++w){l=S[n];if(n===0)continue;this.ctx.beginPath(),this.ctx.moveTo(this.toPixels(l)+this.leftPadding,this.canvas.height),n%s===0?this.ctx.lineTo(this.toPixels(l)+this.leftPadding,this.canvas.height-h):this.ctx.lineTo(this.toPixels(l)+this.leftPadding,this.canvas.height-p),this.ctx.lineWidth=d,this.ctx.strokeStyle=c,this.ctx.stroke(),this.ctx.font="10pt Arial",this.ctx.textAlign="center",this.ctx.fillStyle=u,n%s===0?this.ctx.fillText(l,this.toPixels(l)+this.leftPadding,this.canvas.height-f):n%s===0?this.ctx.fillText(l,this.toPixels(l)+this.leftPadding,this.canvas.height-f):n%s===0&&this.ctx.fillText(l,this.toPixels(l)+this.leftPadding,this.canvas.height-f),this.ctx.fillText("DAYS",f+10+this.leftPadding,this.canvas.height-f),this.ctx.beginPath(),this.ctx.moveTo(this.toPixels(l)+this.leftPadding,0),n%s===0?this.ctx.lineTo(this.toPixels(l)+this.leftPadding,0+h):this.ctx.lineTo(this.toPixels(l)+this.leftPadding,0+p),this.ctx.lineWidth=d,this.ctx.strokeStyle=c,this.ctx.stroke(),n%4===0?x.push(this.ctx.fillText((l+this.originalMin).toFixed(2),this.toPixels(l)+this.leftPadding,0+f+10)):x.push(void 0)}return x},n.prototype.drawYTickMarks=function(e,t){var n,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;T=[],x=Math.abs(e-t)/20,s=!1,m=0,a=Math.ceil((t-1)/x),u=Math.round((1-e)/x);for(f=N=-u;-u<=a?N<=a:N>=a;f=-u<=a?++N:--N)w=1+f*x,w>=t||w<=e||(w===1&&m%2===0&&(s=!0),T.push(w),m++);x<.001?c=4:c=3,y=5,g=10,E=1,v="#ccc",l="#ccc",p=15,i=2,o=1,h=2,S=this.mean(this.data.y),L=r.call(T),A=[];for(n=C=0,k=L.length;C<k;n=++C){d=L[n];if(n===0)continue;if(n===T.length-1)continue;b=this.toCanvasYCoord(d),b=-b+this.canvas.height,this.ctx.font="10pt Arial",this.ctx.textAlign="left",this.ctx.fillStyle=l,this.ctx.beginPath(),this.ctx.moveTo(0,b),s?n%i===0?(this.ctx.lineTo(g,b),this.ctx.fillText(d.toFixed(c),0+p,b+5)):this.ctx.lineTo(y,b):n%i-1===0?(this.ctx.lineTo(g,b),this.ctx.fillText(d.toFixed(c),0+p,b+5)):this.ctx.lineTo(y,b),this.ctx.lineWidth=E,this.ctx.strokeStyle=v,A.push(this.ctx.stroke())}return A},n.prototype.clearCanvas=function(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.toPixels=function(e,t){var n;return n=(parseFloat(e)-parseFloat(this.xMin))/(parseFloat(this.xMax)-parseFloat(this.xMin))*(parseFloat(this.canvas.width)-parseFloat(this.leftPadding)),t&&(console.log("[xMin,xMax]  = ["+this.xMin+","+this.xMax+"]"),console.log("canvas.width = "+this.canvas.width),console.log("leftPadding  = "+this.leftPadding),console.log("dataPoint    = "+e),console.log("pixel        = "+n)),n},n.prototype.toCanvasYCoord=function(e){return(parseFloat(e)-parseFloat(this.yMin))/(parseFloat(this.yMax)-parseFloat(this.yMin))*parseFloat(this.canvas.height)},n.prototype.toDays=function(e){return parseFloat(e)/(parseFloat(this.canvas.width)-parseFloat(this.leftPadding))*(parseFloat(this.xMax)-parseFloat(this.xMin))+parseFloat(this.xMin)},n.prototype.toDataYCoord=function(e){return parseFloat(e)/parseFloat(this.canvas.height)*(parseFloat(this.yMax)-parseFloat(this.yMin))+parseFloat(this.yMin)},n.prototype.shakeGraph=function(){var e,t=this;e=$("#graph-container");if(e.hasClass("shaking"))return;return e.addClass("shaking"),e.effect("shake",{times:4,distance:2},700,function(){return e.removeClass("shaking")})},n}(),n.exports=e}).call(this)},"lib/chosen/abstract_chosen":function(e,t,n){(function(){var e,t;t=this,e=function(){function e(e,t){this.form_field=e,this.options=t!=null?t:{},this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},e.prototype.result_add_option=function(e){var t,n;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),e.group_array_index!=null&&t.push("group-option"),e.classes!==""&&t.push(e.classes),n=e.style.cssText!==""?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="'+t.join(" ")+'"'+n+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.keyup_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale();switch(t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:e.preventDefault();if(this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t,n;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=Math.floor(Math.random()*e.length),t=e.substring(n,n+1)},e}(),t.AbstractChosen=e}).call(this)},"lib/chosen/select_parser":function(e,t,n){(function(){var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return e.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),s=e.childNodes,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){if(e.nodeName.toUpperCase()==="OPTION")return e.text!==""?(t!=null&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e}(),e.select_to_array=function(t){var n,r,i,s,o;r=new e,o=t.childNodes;for(i=0,s=o.length;i<s;i++)n=o[i],r.add_node(n);return r.parsed},this.SelectParser=e}).call(this)},"lib/chosen":function(e,t,n){(function(){var e,n,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t("lib/chosen/abstract_chosen"),t("lib/chosen/select_parser"),i=this,e=jQuery,e.fn.extend({chosen:function(t){var r,i,s;return s=navigator.userAgent.toLowerCase(),i=/(msie) ([\w.]+)/.exec(s)||[],r={name:i[1]||"",version:i[2]||"0"},r.name==="msie"&&(r.version==="6.0"||r.version==="7.0"&&document.documentMode===7)?this:this.each(function(r){var i;i=e(this);if(!i.hasClass("chzn-done"))return i.data("chosen",new n(this,t))})}}),n=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},n.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},n.prototype.set_up_html=function(){var t,n,i,s,o,u;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",t=["chzn-container"],t.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chzn-rtl"),this.f_width=this.form_field_jq.outerWidth(),i={id:this.container_id,"class":t.join(" "),style:"width: "+this.f_width+"px; z-index: 2;",title:this.form_field.title},n=e("<div />",i),this.is_multiple?n.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):n.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.css("zIndex","1").css("position","absolute").css("width",n.width()-2).css("margin","1px").css("border","0 none").after(n),this.container=e("#"+this.container_id),this.dropdown=this.container.find("div.chzn-drop").first(),s=this.container.height(),o=this.f_width-r(this.dropdown),this.dropdown.css({width:o+"px",top:s+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),u=o-r(this.search_container)-r(this.search_field),this.search_field.css({width:u+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this}),this.form_field_jq.css("height",e(n).height()-2)},n.prototype.register_observers=function(){var e=this;return this.container.mousedown(function(t){return e.container_mousedown(t)}),this.container.mouseup(function(t){return e.container_mouseup(t)}),this.container.mouseenter(function(t){return e.mouse_enter(t)}),this.container.mouseleave(function(t){return e.mouse_leave(t)}),this.search_results.mouseup(function(t){return e.search_results_mouseup(t)}),this.search_results.mouseover(function(t){return e.search_results_mouseover(t)}),this.search_results.mouseout(function(t){return e.search_results_mouseout(t)}),this.form_field_jq.bind("liszt:updated",function(t){return e.results_update_field(t)}),this.form_field_jq.bind("liszt:activate",function(t){return e.activate_field(t)}),this.form_field_jq.bind("liszt:open",function(t){return e.container_mousedown(t)}),this.search_field.blur(function(t){return e.input_blur(t)}),this.search_field.keyup(function(t){return e.keyup_checker(t)}),this.search_field.keydown(function(t){return e.keydown_checker(t)}),this.search_field.focus(function(t){return e.input_focus(t)}),this.is_multiple?this.search_choices.click(function(t){return e.choices_click(t)}):this.container.click(function(e){return e.preventDefault()})},n.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)},n.prototype.container_mousedown=function(t){var n;if(!this.is_disabled)return n=t!=null?e(t.target).hasClass("search-choice-close"):!1,t&&t.type==="mousedown"&&!this.results_showing&&t.preventDefault(),!this.pending_destroy_click&&!n?(this.active_field?!this.is_multiple&&t&&(e(t.target)[0]===this.selected_item[0]||e(t.target).parents("a.chzn-single").length)&&(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1},n.prototype.container_mouseup=function(e){if(e.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(e)},n.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},n.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){var e,t,n,r,s;this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",s=this.results_data;for(n=0,r=s.length;n<r;n++)t=s[n],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},n.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},n.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight();if(t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(n<s)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){var e;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return e=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:e+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},n.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},n.prototype.set_tab_index=function(e){var t;if(this.form_field_jq.attr("tabindex"))return t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",t)},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n.length)return this.result_highlight=n,this.result_select(t),this.search_field.focus()},n.prototype.search_results_mouseover=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n)return this.result_do_highlight(n)},n.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},n.prototype.choices_click=function(t){t.preventDefault();if(this.active_field&&!e(t.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},n.prototype.choice_build=function(t){var n,r,i,s=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(n=this.container_id+"_c_"+t.array_index,this.choices+=1,t.disabled?r='<li class="search-choice search-choice-disabled" id="'+n+'"><span>'+t.html+"</span></li>":r='<li class="search-choice" id="'+n+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>',this.search_container.before(r),i=e("#"+n).find("a").first(),i.click(function(e){return s.choice_destroy_link_click(e)}))},n.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.is_disabled?t.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(e(t.target)))},n.prototype.choice_destroy=function(e){if(this.result_deselect(e.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()},n.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},n.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},n.prototype.result_select=function(e){var t,n,r,i;if(this.result_highlight)return t=this.result_highlight,n=t.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(t):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=t,this.selected_item.removeClass("chzn-default")),t.addClass("result-selected"),i=n.substr(n.lastIndexOf("_")+1),r=this.results_data[i],r.selected=!0,this.form_field.options[r.options_index].selected=!0,this.is_multiple?this.choice_build(r):(this.selected_item.find("span").first().text(r.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!e.metaKey&&!e.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[r.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()},n.prototype.result_activate=function(e){return e.addClass("active-result")},n.prototype.result_deactivate=function(e){return e.removeClass("active-result")},n.prototype.result_deselect=function(t){var n,r;return r=this.results_data[t],this.form_field.options[r.options_index].disabled?!1:(r.selected=!1,this.form_field.options[r.options_index].selected=!1,n=e("#"+this.container_id+"_o_"+t),n.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[r.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},n.prototype.winnow_results=function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;this.no_results_clear(),f=0,l=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),o=this.search_contains?"":"^",s=new RegExp(o+l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),p=new RegExp(l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),y=this.results_data;for(d=0,m=y.length;d<m;d++){n=y[d];if(!n.disabled&&!n.empty)if(n.group)e("#"+n.dom_id).css("display","none");else if(!this.is_multiple||!n.selected){t=!1,a=n.dom_id,u=e("#"+a);if(s.test(n.html))t=!0,f+=1;else if(this.enable_split_word_search&&(n.html.indexOf(" ")>=0||n.html.indexOf("[")===0)){i=n.html.replace(/\[|\]/g,"").split(" ");if(i.length)for(v=0,g=i.length;v<g;v++)r=i[v],s.test(r)&&(t=!0,f+=1)}t?(l.length?(c=n.html.search(p),h=n.html.substr(0,c+l.length)+"</em>"+n.html.substr(c+l.length),h=h.substr(0,c)+"<em>"+h.substr(c)):h=n.html,u.html(h),this.result_activate(u),n.group_array_index!=null&&e("#"+this.results_data[n.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&a===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(u))}}return f<1&&l.length?this.no_results(l):this.winnow_results_set_highlight()},n.prototype.winnow_results_clear=function(){var t,n,r,i,s;this.search_field.val(""),n=this.search_results.find("li"),s=[];for(r=0,i=n.length;r<i;r++)t=n[r],t=e(t),t.hasClass("group-result")?s.push(t.css("display","auto")):!this.is_multiple||!t.hasClass("result-selected")?s.push(this.result_activate(t)):s.push(void 0);return s},n.prototype.winnow_results_set_highlight=function(){var e,t;if(!this.result_highlight){t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first();if(e!=null)return this.result_do_highlight(e)}},n.prototype.no_results=function(t){var n;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n)},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var t,n;this.result_highlight?this.results_showing&&(n=this.result_highlight.nextAll("li.active-result").first(),n&&this.result_do_highlight(n)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t)));if(!this.results_showing)return this.results_show()},n.prototype.keyup_arrow=function(){var e;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},n.prototype.keydown_backstroke=function(){var e;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();e=this.search_container.siblings("li.search-choice").last();if(e.length&&!e.hasClass("search-choice-disabled"))return this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale(),t!==8&&this.pending_backstroke&&this.clear_backstroke();switch(t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},n.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,a,f;if(this.is_multiple){r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(a=0,f=o.length;a<f;a++)i=o[a],s+=i+":"+this.search_field.css(i)+";";return n=e("<div />",{style:s}),n.text(this.search_field.val()),e("body").append(n),u=n.width()+25,n.remove(),u>this.f_width-10&&(u=this.f_width-10),this.search_field.css({width:u+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},n.prototype.generate_random_id=function(){var t;t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(e("#"+t).length>0)t+=this.generate_random_char();return t},n}(AbstractChosen),i.Chosen=n,r=function(e){var t;return t=e.outerWidth()-e.width()},i.get_side_border_padding=r}).call(this)},"lib/config":function(e,t,n){(function(){var e,t,r,i;i={href:"http://talk.planethunters.org/",title:"Planet Hunters",summary:"Some summary line",image:"http://example.com/image.jpg",twitterTags:"via @planethunters"},t={categories:["help","science","chat"]},e={test:{project:"planet_hunter",projectName:"Planet Hunters",prefix:"PH",apiHost:null,classifyUrl:null,socialDefaults:i,analytics:{},app:t},developmentLocal:{project:"planet_hunter",projectName:"Planet Hunters",prefix:"PH",apiHost:"http://localhost:3000",classifyUrl:"http://localhost:9294/#/classify",socialDefaults:i,analytics:{},app:t},developmentRemote:{project:"planet_hunter",projectName:"Planet Hunters",prefix:"PH",apiHost:"https://dev.zooniverse.org",classifyUrl:"http://zooniverse-demo.s3-website-us-east-1.amazonaws.com/planethunter/#/classify",socialDefaults:i,analytics:{},app:t},production:{project:"planet_hunter",projectName:"Planet Hunters",prefix:"PH",apiHost:"https://api.zooniverse.org",classifyUrl:"http://www.planethunters.org/#/classify",socialDefaults:i,analytics:{account:"UA-1224199-25",domain:"http://talk.planethunters.org"},app:t}},r=window.jasmine?"test":window.location.port==="9295"?"developmentLocal":window.location.port>1024?"developmentRemote":"production",n.exports=e[r]}).call(this)},"lib/emoticons":function(e,t,n){(function(e){e.fn.emoticonize=function(t){var n=e.extend({},e.fn.emoticonize.defaults,t),r=[")","(","*","[","]","{","}","|","^","<",">","\\","?","+","=","."],i=[":-)",":o)",":c)",":^)",":-D",":-(",":-9",";-)",":-P",":-p",":-Þ",":-b",":-O",":-/",":-X",":-#",":'(","B-)","8-)",";*(",":-*",":-\\","?-)",": )",": ]","= ]","= )","8 )",": }",": D","8 D","X D","x D","= D",": (",": [",": {","= (","; )","; ]","; D",": P",": p","= P","= p",": b",": Þ",": O","8 O",": /","= /",": S",": #",": X","B )",": |",": \\","= \\",": *",": &gt;",": &lt;"],s=[":)",":]","=]","=)","8)",":}",":D",":(",":[",":{","=(",";)",";]",";D",":P",":p","=P","=p",":b",":Þ",":O",":/","=/",":S",":#",":X","B)",":|",":\\","=\\",":*",":&gt;",":&lt;"],o={"&gt;:)":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;;)":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;:(":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;: )":{cssClass:"red-emoticon small-emoticon"},"&gt;; )":{cssClass:"red-emoticon small-emoticon"},"&gt;: (":{cssClass:"red-emoticon small-emoticon"},";(":{cssClass:"red-emoticon spaced-emoticon"},"&lt;3":{cssClass:"pink-emoticon counter-rotated"},O_O:{cssClass:"no-rotate"},o_o:{cssClass:"no-rotate"},"0_o":{cssClass:"no-rotate"},O_o:{cssClass:"no-rotate"},T_T:{cssClass:"no-rotate"},"^_^":{cssClass:"no-rotate"},"O:)":{cssClass:"small-emoticon spaced-emoticon"},"O: )":{cssClass:"small-emoticon"},"8D":{cssClass:"small-emoticon spaced-emoticon"},XD:{cssClass:"small-emoticon spaced-emoticon"},xD:{cssClass:"small-emoticon spaced-emoticon"},"=D":{cssClass:"small-emoticon spaced-emoticon"},"8O":{cssClass:"small-emoticon spaced-emoticon"},"[+=..]":{cssClass:"no-rotate nintendo-controller"}},u=new RegExp("(\\"+r.join("|\\")+")","g"),f="(^|[\\s\\0])";for(var l=i.length-1;l>=0;--l)i[l]=i[l].replace(u,"\\$1"),i[l]=new RegExp(f+"("+i[l]+")","g");for(var l=s.length-1;l>=0;--l)s[l]=s[l].replace(u,"\\$1"),s[l]=new RegExp(f+"("+s[l]+")","g");for(var c in o)o[c].regexp=c.replace(u,"\\$1"),o[c].regexp=new RegExp(f+"("+o[c].regexp+")","g");var h="span.css-emoticon";n.exclude&&(h+=","+n.exclude);var p=h.split(",");return this.not(h).each(function(){var t=e(this),r="css-emoticon";n.animate&&(r+=" un-transformed-emoticon animated-emoticon");for(var u in o)specialCssClass=r+" "+o[u].cssClass,t.html(t.html().replace(o[u].regexp,"$1<span class='"+specialCssClass+"'>$2</span>"));e(i).each(function(){t.html(t.html().replace(this,"$1<span class='"+r+"'>$2</span>"))}),e(s).each(function(){t.html(t.html().replace(this,"$1<span class='"+r+" spaced-emoticon'>$2</span>"))}),e.each(p,function(n,r){t.find(e.trim(r)+" span.css-emoticon").each(function(){e(this).replaceWith(e(this).text())})}),n.animate&&setTimeout(function(){e(".un-transformed-emoticon").removeClass("un-transformed-emoticon")},n.delay)})},e.fn.unemoticonize=function(t){var n=e.extend({},e.fn.emoticonize.defaults,t);return this.each(function(){var t=e(this);t.find("span.css-emoticon").each(function(){var t=e(this);n.animate?(t.addClass("un-transformed-emoticon"),setTimeout(function(){t.replaceWith(t.text())},n.delay)):t.replaceWith(t.text())})})},e.fn.emoticonize.defaults={animate:!0,delay:500,exclude:"pre,code,.no-emoticons"}})(jQuery)},"lib/en_us":function(e,t,n){(function(){}).call(this)},"lib/follow_links":function(e,t,n){(function(){var e,n;n=t("lib/config").project,e=t("zooniverse/lib/api"),$(window).on("click",".follow-link button",function(r){var i,s,o,u,a,f,l=this;return r.preventDefault(),u=$(r.target),i=u.attr("name"),o=u.data("id"),a=u.data("type"),u.attr("disabled","disabled"),f="/projects/"+n+"/talk/following/"+i,s={type:a,id:o},e.post(f,s,function(){var e;return e=i==="follow",u.closest(".follow").replaceWith(t("views/follow_button")({id:o,type:a,followed:e}))})})}).call(this)},"lib/jquery.sparkline.min":function(e,t,n){!function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var t={},n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=0;n=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:undefined,normalRangeMax:undefined,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:undefined,chartRangeMax:undefined,chartRangeMinX:undefined,chartRangeMaxX:undefined,tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')}}},k='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',r=function(){var t,n;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=e.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(n=Array.prototype.slice.call(arguments,1,-1),n.unshift(t.prototype),e.extend.apply(e,n))):t.prototype=arguments[0],t.prototype.cls=t,t},e.SPFormatClass=i=r({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(e,t){this.format=e,this.fclass=t},render:function(e,t,n){var r=this,i=e,s,o,u,a,f;return this.format.replace(this.fre,function(){var e;return o=arguments[1],u=arguments[3],s=r.precre.exec(o),s?(f=s[2],o=s[1]):f=!1,a=i[o],a===undefined?"":u&&t&&t[u]?(e=t[u],e.get?t[u].get(a)||a:t[u][a]||a):(l(a)&&(n.get("numberFormatter")?a=n.get("numberFormatter")(a):a=v(a,f,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),a)})}}),e.spformat=function(e,t){return new i(e,t)},s=function(e,t,n){return e<t?t:e>n?n:e},o=function(e,t){var n;return t===2?(n=Math.floor(e.length/2),e.length%2?e[n]:(e[n-1]+e[n])/2):e.length%2?(n=(e.length*t+t)/4,n%1?(e[Math.floor(n)]+e[Math.floor(n)-1])/2:e[n-1]):(n=(e.length*t+2)/4,n%1?(e[Math.floor(n)]+e[Math.floor(n)-1])/2:e[n-1])},u=function(e){var t;switch(e){case"undefined":e=undefined;break;case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:t=parseFloat(e),e==t&&(e=t)}return e},a=function(e){var t,n=[];for(t=e.length;t--;)n[t]=u(e[t]);return n},f=function(e,t){var n,r,i=[];for(n=0,r=e.length;n<r;n++)e[n]!==t&&i.push(e[n]);return i},l=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},v=function(t,n,r,i,s){var o,u;t=(n===!1?parseFloat(t).toString():t.toFixed(n)).split(""),o=(o=e.inArray(".",t))<0?t.length:o,o<t.length&&(t[o]=s);for(u=o-r;u>0;u-=r)t.splice(u,0,i);return t.join("")},c=function(e,t,n){var r;for(r=t.length;r--;){if(n&&t[r]===null)continue;if(t[r]!==e)return!1}return!0},h=function(e){var t=0,n;for(n=e.length;n--;)t+=typeof e[n]=="number"?e[n]:0;return t},d=function(t){return e.isArray(t)?t:[t]},p=function(e){var t;document.createStyleSheet?document.createStyleSheet().cssText=e:(t=document.createElement("style"),t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),t[typeof document.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=e)},e.fn.simpledraw=function(t,n,r,i){var s,o;if(r&&(s=this.data("_jqs_vcanvas")))return s;t===undefined&&(t=e(this).innerWidth()),n===undefined&&(n=e(this).innerHeight());if(e.fn.sparkline.hasCanvas)s=new M(t,n,this,i);else{if(!e.fn.sparkline.hasVML)return!1;s=new _(t,n,this)}return o=e(this).data("_jqs_mhandler"),o&&o.registerCanvas(s),s},e.fn.cleardraw=function(){var e=this.data("_jqs_vcanvas");e&&e.reset()},g=r({init:function(t,n){var r=e(t);this.$el=r,this.options=n,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!n.get("disableTooltips"),this.highlightEnabled=!n.get("disableHighlight")},registerSparkline:function(e){this.splist.push(e),this.over&&this.updateDisplay()},registerCanvas:function(t){var n=e(t.canvas);this.canvas=t,this.$canvas=n,n.mouseenter(e.proxy(this.mouseenter,this)),n.mouseleave(e.proxy(this.mouseleave,this)),n.click(e.proxy(this.mouseclick,this))},reset:function(e){this.splist=[],this.tooltip&&e&&(this.tooltip.remove(),this.tooltip=undefined)},mouseclick:function(t){var n=e.Event("sparklineClick");n.originalEvent=t,n.sparklines=this.splist,this.$el.trigger(n)},mouseenter:function(t){e(document.body).unbind("mousemove.jqs"),e(document.body).bind("mousemove.jqs",e.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new y(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){e(document.body).unbind("mousemove.jqs");var t=this.splist,n=t.length,r=!1,i,s;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(s=0;s<n;s++)i=t[s],i.clearRegionHighlight()&&(r=!0);r&&this.canvas.render()},mousemove:function(e){this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,this.tooltip&&this.tooltip.updatePosition(e.pageX,e.pageY),this.updateDisplay()},updateDisplay:function(){var t=this.splist,n=t.length,r=!1,i=this.$canvas.offset(),s=this.currentPageX-i.left,o=this.currentPageY-i.top,u,a,f,l,c;if(!this.over)return;for(f=0;f<n;f++)a=t[f],l=a.setRegionHighlight(this.currentEl,s,o),l&&(r=!0);if(r){c=e.Event("sparklineRegionChange"),c.sparklines=this.splist,this.$el.trigger(c);if(this.tooltip){u="";for(f=0;f<n;f++)a=t[f],u+=a.getCurrentRegionTooltip();this.tooltip.setContent(u)}this.disableHighlight||this.canvas.render()}l===null&&this.mouseleave()}}),y=r({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var n=t.get("tooltipClassname","jqstooltip"),r=this.sizeStyle,i;this.container=t.get("tooltipContainer")||document.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),e("#jqssizetip").remove(),e("#jqstooltip").remove(),this.sizetip=e("<div/>",{id:"jqssizetip",style:r,"class":n}),this.tooltip=e("<div/>",{id:"jqstooltip","class":n}).appendTo(this.container),i=this.tooltip.offset(),this.offsetLeft=i.left,this.offsetTop=i.top,this.hidden=!0,e(window).unbind("resize.jqs scroll.jqs"),e(window).bind("resize.jqs scroll.jqs",e.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=e(window).scrollTop(),this.scrollLeft=e(window).scrollLeft(),this.scrollRight=this.scrollLeft+e(window).width(),this.updatePosition()},getSize:function(e){this.sizetip.html(e).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(e){if(!e){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(e),this.tooltip.html(e).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(e,t){if(e===undefined){if(this.mousex===undefined)return;e=this.mousex-this.offsetLeft,t=this.mousey-this.offsetTop}else this.mousex=e-=this.offsetLeft,this.mousey=t-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;t-=this.height+this.tooltipOffsetY,e+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),e<this.scrollLeft?e=this.scrollLeft:e+this.width>this.scrollRight&&(e=this.scrollRight-this.width),this.tooltip.css({left:e,top:t})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=undefined,e(window).unbind("resize.jqs scroll.jqs")}}),L=function(){p(k)},e(L),D=[],e.fn.sparkline=function(t,n){return this.each(function(){var r=new e.fn.sparkline.options(this,n),i=e(this),s,o;s=function(){var n,s,o,u,a,f,l;if(t==="html"||t===undefined){l=this.getAttribute(r.get("tagValuesAttribute"));if(l===undefined||l===null)l=i.html();n=l.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else n=t;s=r.get("width")==="auto"?n.length*r.get("defaultPixelsPerValue"):r.get("width");if(r.get("height")==="auto"){if(!r.get("composite")||!e.data(this,"_jqs_vcanvas"))u=document.createElement("span"),u.innerHTML="a",i.html(u),o=e(u).innerHeight()||e(u).height(),e(u).remove(),u=null}else o=r.get("height");r.get("disableInteraction")?a=!1:(a=e.data(this,"_jqs_mhandler"),a?r.get("composite")||a.reset():(a=new g(this,r),e.data(this,"_jqs_mhandler",a)));if(r.get("composite")&&!e.data(this,"_jqs_vcanvas")){e.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),e.data(this,"_jqs_errnotify",!0));return}f=new(e.fn.sparkline[r.get("type")])(this,n,r,s,o),f.render(),a&&a.registerSparkline(f)};if(e(this).html()&&!r.get("disableHiddenCheck")&&e(this).is(":hidden")||e.fn.jquery<"1.3.0"&&e(this).parents().is(":hidden")||!e(this).parents("body").length){if(!r.get("composite")&&e.data(this,"_jqs_pending"))for(o=D.length;o;o--)D[o-1][0]==this&&D.splice(o-1,1);D.push([this,s]),e.data(this,"_jqs_pending",!0)}else s.call(this)})},e.fn.sparkline.defaults=n(),e.sparkline_display_visible=function(){var t,n,r,i=[];for(n=0,r=D.length;n<r;n++)t=D[n][0],e(t).is(":visible")&&!e(t).parents().is(":hidden")?(D[n][1].call(t),e.data(D[n][0],"_jqs_pending",!1),i.push(n)):!e(t).closest("html").length&&!e.data(t,"_jqs_pending")&&(e.data(D[n][0],"_jqs_pending",!1),i.push(n));for(n=i.length;n;n--)D.splice(i[n-1],1)},e.fn.sparkline.options=r({init:function(n,r){var i,s,o,u;this.userOptions=r=r||{},this.tag=n,this.tagValCache={},s=e.fn.sparkline.defaults,o=s.common,this.tagOptionsPrefix=r.enableTagOptions&&(r.tagOptionsPrefix||o.tagOptionsPrefix),u=this.getTagSetting("type"),u===t?i=s[r.type||o.type]:i=s[u],this.mergedOptions=e.extend({},o,i,r)},getTagSetting:function(e){var n=this.tagOptionsPrefix,r,i,s,o;if(n===!1||n===undefined)return t;if(this.tagValCache.hasOwnProperty(e))r=this.tagValCache.key;else{r=this.tag.getAttribute(n+e);if(r===undefined||r===null)r=t;else if(r.substr(0,1)==="["){r=r.substr(1,r.length-2).split(",");for(i=r.length;i--;)r[i]=u(r[i].replace(/(^\s*)|(\s*$)/g,""))}else if(r.substr(0,1)==="{"){s=r.substr(1,r.length-2).split(","),r={};for(i=s.length;i--;)o=s[i].split(":",2),r[o[0].replace(/(^\s*)|(\s*$)/g,"")]=u(o[1].replace(/(^\s*)|(\s*$)/g,""))}else r=u(r);this.tagValCache.key=r}return r},get:function(e,n){var r=this.getTagSetting(e),i;return r!==t?r:(i=this.mergedOptions[e])===undefined?n:i}}),e.fn.sparkline._base=r({disabled:!1,init:function(t,n,r,i,s){this.el=t,this.$el=e(t),this.values=n,this.options=r,this.width=i,this.height=s,this.currentRegion=undefined},initTarget:function(){var e=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),e))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(e,t){},setRegionHighlight:function(e,t,n){var r=this.currentRegion,i=!this.options.get("disableHighlight"),s;return t>this.canvasWidth||n>this.canvasHeight||t<0||n<0?null:(s=this.getRegion(e,t,n),r!==s?(r!==undefined&&i&&this.removeHighlight(),this.currentRegion=s,s!==undefined&&i&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==undefined?(this.removeHighlight(),this.currentRegion=undefined,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(e){},getCurrentRegionTooltip:function(){var t=this.options,n="",r=[],s,o,u,a,f,l,c,h,p,d,v,m,g,y;if(this.currentRegion===undefined)return"";s=this.getCurrentRegionFields(),v=t.get("tooltipFormatter");if(v)return v(this,t,s);t.get("tooltipChartTitle")&&(n+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"</div>\n"),o=this.options.get("tooltipFormat");if(!o)return"";e.isArray(o)||(o=[o]),e.isArray(s)||(s=[s]),c=this.options.get("tooltipFormatFieldlist"),h=this.options.get("tooltipFormatFieldlistKey");if(c&&h){p=[];for(l=s.length;l--;)d=s[l][h],(y=e.inArray(d,c))!=-1&&(p[y]=s[l]);s=p}u=o.length,g=s.length;for(l=0;l<u;l++){m=o[l],typeof m=="string"&&(m=new i(m)),a=m.fclass||"jqsfield";for(y=0;y<g;y++)if(!s[y].isNull||!t.get("tooltipSkipNull"))e.extend(s[y],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),f=m.render(s[y],t.get("tooltipValueLookups"),t),r.push('<div class="'+a+'">'+f+"</div>")}return r.length?n+r.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(e,t){var n=t.get("highlightColor"),r=t.get("highlightLighten"),i,o,u,a;if(n)return n;if(r){i=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e);if(i){u=[],o=e.length===4?16:1;for(a=0;a<3;a++)u[a]=s(Math.round(parseInt(i[a+1],16)*o*r),0,255);return"rgb("+u.join(",")+")"}}return e}}),b={changeHighlight:function(t){var n=this.currentRegion,r=this.target,i=this.regionShapes[n],s;i&&(s=this.renderRegion(n,t),e.isArray(s)||e.isArray(i)?(r.replaceWithShapes(i,s),this.regionShapes[n]=e.map(s,function(e){return e.id})):(r.replaceWithShape(i,s),this.regionShapes[n]=s.id))},render:function(){var t=this.values,n=this.target,r=this.regionShapes,i,s,o,u;if(!this.cls._super.render.call(this))return;for(o=t.length;o--;){i=this.renderRegion(o);if(i)if(e.isArray(i)){s=[];for(u=i.length;u--;)i[u].append(),s.push(i[u].id);r[o]=s}else i.append(),r[o]=i.id;else r[o]=null}n.render()}},e.fn.sparkline.line=w=r(e.fn.sparkline._base,{type:"line",init:function(e,t,n,r,i){w._super.init.call(this,e,t,n,r,i),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(e,t,n){var r,i=this.regionMap;for(r=i.length;r--;)if(i[r]!==null&&t>=i[r][0]&&t<=i[r][1])return i[r][2];return undefined},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.yvalues[e]===null,x:this.xvalues[e],y:this.yvalues[e],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:e}},renderHighlight:function(){var e=this.currentRegion,t=this.target,n=this.vertices[e],r=this.options,i=r.get("spotRadius"),s=r.get("highlightSpotColor"),o=r.get("highlightLineColor"),u,a;if(!n)return;i&&s&&(u=t.drawCircle(n[0],n[1],i,undefined,s),this.highlightSpotId=u.id,t.insertAfterShape(this.lastShapeId,u)),o&&(a=t.drawLine(n[0],this.canvasTop,n[0],this.canvasTop+this.canvasHeight,o),this.highlightLineId=a.id,t.insertAfterShape(this.lastShapeId,a))},removeHighlight:function(){var e=this.target;this.highlightSpotId&&(e.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(e.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var e=this.values,t=e.length,n=this.xvalues,r=this.yvalues,i=this.yminmax,s,o,u,a,f;for(s=0;s<t;s++)o=e[s],u=typeof e[s]=="string",a=typeof e[s]=="object"&&e[s]instanceof Array,f=u&&e[s].split(":"),u&&f.length===2?(n.push(Number(f[0])),r.push(Number(f[1])),i.push(Number(f[1]))):a?(n.push(o[0]),r.push(o[1]),i.push(o[1])):(n.push(s),e[s]===null||e[s]==="null"?r.push(null):(r.push(Number(o)),i.push(Number(o))));this.options.get("xvalues")&&(n=this.options.get("xvalues")),this.maxy=this.maxyorg=Math.max.apply(Math,i),this.miny=this.minyorg=Math.min.apply(Math,i),this.maxx=Math.max.apply(Math,n),this.minx=Math.min.apply(Math,n),this.xvalues=n,this.yvalues=r,this.yminmax=i},processRangeOptions:function(){var e=this.options,t=e.get("normalRangeMin"),n=e.get("normalRangeMax");t!==undefined&&(t<this.miny&&(this.miny=t),n>this.maxy&&(this.maxy=n)),e.get("chartRangeMin")!==undefined&&(e.get("chartRangeClip")||e.get("chartRangeMin")<this.miny)&&(this.miny=e.get("chartRangeMin")),e.get("chartRangeMax")!==undefined&&(e.get("chartRangeClip")||e.get("chartRangeMax")>this.maxy)&&(this.maxy=e.get("chartRangeMax")),e.get("chartRangeMinX")!==undefined&&(e.get("chartRangeClipX")||e.get("chartRangeMinX")<this.minx)&&(this.minx=e.get("chartRangeMinX")),e.get("chartRangeMaxX")!==undefined&&(e.get("chartRangeClipX")||e.get("chartRangeMaxX")>this.maxx)&&(this.maxx=e.get("chartRangeMaxX"))},drawNormalRange:function(e,t,n,r,i){var s=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),u=t+Math.round(n-n*((o-this.miny)/i)),a=Math.round(n*(o-s)/i);this.target.drawRect(e,u,r,a,undefined,this.options.get("normalRangeColor")).append()},render:function(){var t=this.options,n=this.target,r=this.canvasWidth,i=this.canvasHeight,s=this.vertices,o=t.get("spotRadius"),u=this.regionMap,a,f,l,c,h,p,d,v,g,y,b,E,S,x,T,N,C,k,L,A,O,M,_,D,P;if(!w._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),_=this.xvalues,D=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;c=h=0,a=this.maxx-this.minx===0?1:this.maxx-this.minx,f=this.maxy-this.miny===0?1:this.maxy-this.miny,l=this.yvalues.length-1,o&&(r<o*4||i<o*4)&&(o=0);if(o){O=t.get("highlightSpotColor")&&!t.get("disableInteraction");if(O||t.get("minSpotColor")||t.get("spotColor")&&D[l]===this.miny)i-=Math.ceil(o);if(O||t.get("maxSpotColor")||t.get("spotColor")&&D[l]===this.maxy)i-=Math.ceil(o),c+=Math.ceil(o);if(O||(t.get("minSpotColor")||t.get("maxSpotColor"))&&(D[0]===this.miny||D[0]===this.maxy))h+=Math.ceil(o),r-=Math.ceil(o);if(O||t.get("spotColor")||t.get("minSpotColor")||t.get("maxSpotColor")&&(D[l]===this.miny||D[l]===this.maxy))r-=Math.ceil(o)}i--,t.get("normalRangeMin")!==undefined&&!t.get("drawNormalOnTop")&&this.drawNormalRange(h,c,i,r,f),d=[],v=[d],x=T=null,N=D.length;for(P=0;P<N;P++)g=_[P],b=_[P+1],y=D[P],E=h+Math.round((g-this.minx)*(r/a)),S=P<N-1?h+Math.round((b-this.minx)*(r/a)):r,T=E+(S-E)/2,u[P]=[x||0,T,P],x=T,y===null?P&&(D[P-1]!==null&&(d=[],v.push(d)),s.push(null)):(y<this.miny&&(y=this.miny),y>this.maxy&&(y=this.maxy),d.length||d.push([E,c+i]),p=[E,c+Math.round(i-i*((y-this.miny)/f))],d.push(p),s.push(p));C=[],k=[],L=v.length;for(P=0;P<L;P++)d=v[P],d.length&&(t.get("fillColor")&&(d.push([d[d.length-1][0],c+i]),k.push(d.slice(0)),d.pop()),d.length>2&&(d[0]=[d[0][0],d[1][1]]),C.push(d));L=k.length;for(P=0;P<L;P++)n.drawShape(k[P],t.get("fillColor"),t.get("fillColor")).append();t.get("normalRangeMin")!==undefined&&t.get("drawNormalOnTop")&&this.drawNormalRange(h,c,i,r,f),L=C.length;for(P=0;P<L;P++)n.drawShape(C[P],t.get("lineColor"),undefined,t.get("lineWidth")).append();if(o&&t.get("valueSpots")){A=t.get("valueSpots"),A.get===undefined&&(A=new m(A));for(P=0;P<N;P++)M=A.get(D[P]),M&&n.drawCircle(h+Math.round((_[P]-this.minx)*(r/a)),c+Math.round(i-i*((D[P]-this.miny)/f)),o,undefined,M).append()}o&&t.get("spotColor")&&D[l]!==null&&n.drawCircle(h+Math.round((_[_.length-1]-this.minx)*(r/a)),c+Math.round(i-i*((D[l]-this.miny)/f)),o,undefined,t.get("spotColor")).append(),this.maxy!==this.minyorg&&(o&&t.get("minSpotColor")&&(g=_[e.inArray(this.minyorg,D)],n.drawCircle(h+Math.round((g-this.minx)*(r/a)),c+Math.round(i-i*((this.minyorg-this.miny)/f)),o,undefined,t.get("minSpotColor")).append()),o&&t.get("maxSpotColor")&&(g=_[e.inArray(this.maxyorg,D)],n.drawCircle(h+Math.round((g-this.minx)*(r/a)),c+Math.round(i-i*((this.maxyorg-this.miny)/f)),o,undefined,t.get("maxSpotColor")).append())),this.lastShapeId=n.getLastShapeId(),this.canvasTop=c,n.render()}}),!function(){document.namespaces&&!document.namespaces.v?(e.fn.sparkline.hasVML=!0,document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML")):e.fn.sparkline.hasVML=!1;var t=document.createElement("canvas");e.fn.sparkline.hasCanvas=!!t.getContext&&!!t.getContext("2d")}(),A=r({init:function(e,t,n,r){this.target=e,this.id=t,this.type=n,this.args=r},append:function(){return this.target.appendShape(this),this}}),O=r({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,n,r){if(!t)return;this.width=t,this.height=n,this.target=r,this.lastShapeId=null,r[0]&&(r=r[0]),e.data(r,"_jqs_vcanvas",this)},drawLine:function(e,t,n,r,i,s){return this.drawShape([[e,t],[n,r]],i,s)},drawShape:function(e,t,n,r){return this._genShape("Shape",[e,t,n,r])},drawCircle:function(e,t,n,r,i,s){return this._genShape("Circle",[e,t,n,r,i,s])},drawPieSlice:function(e,t,n,r,i,s,o){return this._genShape("PieSlice",[e,t,n,r,i,s,o])},drawRect:function(e,t,n,r,i,s){return this._genShape("Rect",[e,t,n,r,i,s])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,n){e(n).html(t)},_calculatePixelDims:function(t,n,r){var i;i=this._pxregex.exec(n),i?this.pixelHeight=i[1]:this.pixelHeight=e(r).height(),i=this._pxregex.exec(t),i?this.pixelWidth=i[1]:this.pixelWidth=e(r).width()},_genShape:function(e,t){var n=P++;return t.unshift(n),new A(this,n,e,t)},appendShape:function(e){alert("appendShape not implemented")},replaceWithShape:function(e,t){alert("replaceWithShape not implemented")},insertAfterShape:function(e,t){alert("insertAfterShape not implemented")},removeShapeId:function(e){alert("removeShapeId not implemented")},getShapeAt:function(e,t,n){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),M=r(O,{init:function(t,n,r,i){M._super.init.call(this,t,n,r),this.canvas=document.createElement("canvas"),r[0]&&(r=r[0]),e.data(r,"_jqs_vcanvas",this),e(this.canvas).css({display:"inline-block",width:t,height:n,verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=i,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=undefined,e(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(e,t,n){var r=this.canvas.getContext("2d");return e!==undefined&&(r.strokeStyle=e),r.lineWidth=n===undefined?1:n,t!==undefined&&(r.fillStyle=t),r},reset:function(){var e=this._getContext();e.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=undefined},_drawShape:function(e,t,n,r,i){var s=this._getContext(n,r,i),o,u;s.beginPath(),s.moveTo(t[0][0]+.5,t[0][1]+.5);for(o=1,u=t.length;o<u;o++)s.lineTo(t[o][0]+.5,t[o][1]+.5);n!==undefined&&s.stroke(),r!==undefined&&s.fill(),this.targetX!==undefined&&this.targetY!==undefined&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawCircle:function(e,t,n,r,i,s,o){var u=this._getContext(i,s,o);u.beginPath(),u.arc(t,n,r,0,2*Math.PI,!1),this.targetX!==undefined&&this.targetY!==undefined&&u.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e),i!==undefined&&u.stroke(),s!==undefined&&u.fill()},_drawPieSlice:function(e,t,n,r,i,s,o,u){var a=this._getContext(o,u);a.beginPath(),a.moveTo(t,n),a.arc(t,n,r,i,s,!1),a.lineTo(t,n),a.closePath(),o!==undefined&&a.stroke(),u&&a.fill(),this.targetX!==undefined&&this.targetY!==undefined&&a.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawRect:function(e,t,n,r,i,s,o){return this._drawShape(e,[[t,n],[t+r,n],[t+r,n+i],[t,n+i],[t,n]],s,o)},appendShape:function(e){return this.shapes[e.id]=e,this.shapeseq.push(e.id),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n=this.shapeseq,r;this.shapes[t.id]=t;for(r=n.length;r--;)n[r]==e&&(n[r]=t.id);delete this.shapes[e]},replaceWithShapes:function(e,t){var n=this.shapeseq,r={},i,s,o;for(s=e.length;s--;)r[e[s]]=!0;for(s=n.length;s--;)i=n[s],r[i]&&(n.splice(s,1),delete this.shapes[i],o=s);for(s=t.length;s--;)n.splice(o,0,t[s].id),this.shapes[t[s].id]=t[s]},insertAfterShape:function(e,t){var n=this.shapeseq,r;for(r=n.length;r--;)if(n[r]===e){n.splice(r+1,0,t.id),this.shapes[t.id]=t;return}},removeShapeId:function(e){var t=this.shapeseq,n;for(n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}delete this.shapes[e]},getShapeAt:function(e,t,n){return this.targetX=t,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var e=this.shapeseq,t=this.shapes,n=e.length,r=this._getContext(),i,s,o;r.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(o=0;o<n;o++)i=e[o],s=t[i],this["_draw"+s.type].apply(this,s.args);this.interact||(this.shapes={},this.shapeseq=[])}}),_=r(O,{init:function(t,n,r){var i;_._super.init.call(this,t,n,r),r[0]&&(r=r[0]),e.data(r,"_jqs_vcanvas",this),this.canvas=document.createElement("span"),e(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,i='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",i),this.group=e(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(e,t,n,r,i){var s=[],o,u,a,f,l,c,h;for(h=0,c=t.length;h<c;h++)s[h]=""+t[h][0]+","+t[h][1];return o=s.splice(0,1),i=i===undefined?1:i,u=n===undefined?' stroked="false" ':' strokeWeight="'+i+'px" strokeColor="'+n+'" ',a=r===undefined?' filled="false"':' fillColor="'+r+'" filled="true" ',f=s[0]===s[s.length-1]?"x ":"",l='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+e+'" '+u+a+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+o+" l "+s.join(", ")+" "+f+'e">'+" </v:shape>",l},_drawCircle:function(e,t,n,r,i,s,o){var u,a,f;return t-=r,n-=r,u=i===undefined?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+i+'" ',a=s===undefined?' filled="false"':' fillColor="'+s+'" filled="true" ',f='<v:oval  id="jqsshape'+e+'" '+u+a+' style="position:absolute;top:'+n+"px; left:"+t+"px; width:"+r*2+"px; height:"+r*2+'px"></v:oval>',f},_drawPieSlice:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v;if(i===s)return"";s-i===2*Math.PI&&(i=0,s=2*Math.PI),f=t+Math.round(Math.cos(i)*r),l=n+Math.round(Math.sin(i)*r),c=t+Math.round(Math.cos(s)*r),h=n+Math.round(Math.sin(s)*r);if(f===c&&l===h){if(s-i<Math.PI)return"";f=c=t+r,l=h=n}return f===c&&l===h&&s-i<Math.PI?"":(a=[t-r,n-r,t+r,n+r,f,l,c,h],p=o===undefined?' stroked="false" ':' strokeWeight="1px" strokeColor="'+o+'" ',d=u===undefined?' filled="false"':' fillColor="'+u+'" filled="true" ',v='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+e+'" '+p+d+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+t+","+n+" wa "+a.join(", ")+' x e">'+" </v:shape>",v)},_drawRect:function(e,t,n,r,i,s,o){return this._drawShape(e,[[t,n],[t,n+i],[t+r,n+i],[t+r,n],[t,n]],s,o)},reset:function(){this.group.innerHTML=""},appendShape:function(e){var t=this["_draw"+e.type].apply(this,e.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=e.id,e.id},replaceWithShape:function(t,n){var r=e("#jqsshape"+t),i=this["_draw"+n.type].apply(this,n.args);r[0].outerHTML=i},replaceWithShapes:function(t,n){var r=e("#jqsshape"+t[0]),i="",s=n.length,o;for(o=0;o<s;o++)i+=this["_draw"+n[o].type].apply(this,n[o].args);r[0].outerHTML=i;for(o=1;o<t.length;o++)e("#jqsshape"+t[o]).remove()},insertAfterShape:function(t,n){var r=e("#jqsshape"+t),i=this["_draw"+n.type].apply(this,n.args);r[0].insertAdjacentHTML("afterEnd",i)},removeShapeId:function(t){var n=e("#jqsshape"+t);this.group.removeChild(n[0])},getShapeAt:function(e,t,n){var r=e.id.substr(8);return r},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})},"lib/markdown/converter":function(e,t,n){typeof e=="object"&&typeof t=="function"?window.Markdown=e:window.Markdown={},function(){function e(e){return e}function t(e){return!1}function n(){}function r(){}n.prototype={chain:function(t,n){var r=this[t];if(!r)throw new Error("unknown hook "+t);r===e?this[t]=n:this[t]=function(e){return n(r(e))}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(t){this[t]=e},addFalse:function(e){this[e]=t}},Markdown.HookCollection=n,r.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}},Markdown.Converter=function(){function u(e){return e=e.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(e,n,r,s,o,u){return n=n.toLowerCase(),t.set(n,A(r)),o?s:(u&&i.set(n,u.replace(/"/g,"&quot;")),"")}),e=Markdown.sanitizeHtml(e),e=Markdown.balanceTags(e),e}function a(e){var t="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del",n="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,f),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,f),e=e.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,f),e=e.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,f),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,f),e}function f(e,t){var n=t;return n=n.replace(/^\n+/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(s.push(n)-1)+"K\n\n",n}function l(e,t){e=y(e);var n="<hr />\n";return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,n),e=e.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,n),e=e.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,n),e=b(e),e=S(e),e=k(e),e=a(e),e=L(e,t),e}function c(e){return e=T(e),e=h(e),e=O(e),e=v(e),e=p(e),e=M(e),e=e.replace(/~P/g,"://"),e=A(e),e=C(e),e=e.replace(/  +\n/g," <br>\n"),e}function h(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=j(t,e.charAt(1)=="!"?"\\`*_/":"\\`*_"),t}),e}function p(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,d),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,d),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,d),e}function d(e,n,r,s,o,u,a,f){f==undefined&&(f="");var l=n,c=r.replace(/:\/\//g,"~P"),h=s.toLowerCase(),p=o,d=f;if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(t.get(h)!=undefined)p=t.get(h),i.get(h)!=undefined&&(d=i.get(h));else{if(!(l.search(/\(\s*\)$/m)>-1))return l;p=""}}p=B(p),p=j(p,"*_");var v='<a href="'+p+'"';return d!=""&&(d=m(d),d=j(d,"*_"),v+=' title="'+d+'"'),v+=">"+c+"</a>",v}function v(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,g),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,g),e}function m(e){return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function g(e,n,r,s,o,u,a,f){var l=n,c=r,h=s.toLowerCase(),p=o,d=f;d||(d="");if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(t.get(h)==undefined)return l;p=t.get(h),i.get(h)!=undefined&&(d=i.get(h))}c=j(m(c),"*_[]()"),p=j(p,"*_");var v='<img src="'+p+'" alt="'+c+'"';return d=m(d),d=j(d,"*_"),v+=' title="'+d+'"',v+=" />",v}function y(e){return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,t){return"<h1>"+c(t)+"</h1>\n\n"}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,t){return"<h2>"+c(t)+"</h2>\n\n"}),e=e.replace(/^(\#{1,6})[ \t]+(.+?)[ \t]*\#*\n+/gm,function(e,t,n){var r=t.length;return"<h"+r+">"+c(n)+"</h"+r+">\n\n"}),e}function b(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return o?e=e.replace(t,function(e,t,n){var r=t,i=n.search(/[*+-]/g)>-1?"ul":"ol",s=E(r,i);return s=s.replace(/\s+$/,""),s="<"+i+">"+s+"</"+i+">\n",s}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(t,function(e,t,n,r){var i=t,s=n,o=r.search(/[*+-]/g)>-1?"ul":"ol",u=E(s,o);return u=i+"<"+o+">\n"+u+"</"+o+">\n",u})),e=e.replace(/~0/,""),e}function E(e,t){o++,e=e.replace(/\n{2,}$/,"\n"),e+="~0";var n=w[t],r=new RegExp("(^[ \\t]*)("+n+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+n+")[ \\t]+))","gm"),i=!1;return e=e.replace(r,function(e,t,n,r){var s=r,o=t,u=/\n\n$/.test(s),a=u||s.search(/\n{2,}/)>-1;return a||i?s=l(D(s),!0):(s=b(D(s)),s=s.replace(/\n$/,""),s=c(s)),i=u,"<li>"+s+"</li>\n"}),e=e.replace(/~0/g,""),o--,e}function S(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,i=n;return r=N(D(r)),r=P(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>","\n\n"+r+"\n\n"+i}),e=e.replace(/~0/,""),e}function x(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(s.push(e)-1)+"K\n\n"}function T(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r,i){var s=r;return s=s.replace(/^([ \t]*)/g,""),s=s.replace(/[ \t]*$/g,""),s=N(s),s=s.replace(/:\/\//g,"~P"),t+"<code>"+s+"</code>"}),e}function N(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=j(e,"*_{}[]\\",!1),e}function C(e){return e=e.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4"),e=e.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4"),e}function k(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=l(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /mg,"~0"),n=n.replace(/~0/g,""),n}),x("<blockquote>\n"+n+"\n</blockquote>")}),e}function L(e,t){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");var n=e.split(/\n{2,}/g),r=[],i=/~K(\d+)K/,o=n.length;for(var u=0;u<o;u++){var a=n[u];i.test(a)?r.push(a):/\S/.test(a)&&(a=c(a),a=a.replace(/^([ \t]*)/g,"<p>"),a+="</p>",r.push(a))}if(!t){o=r.length;for(var u=0;u<o;u++){var f=!0;while(f)f=!1,r[u]=r[u].replace(/~K(\d+)K/g,function(e,t){return f=!0,s[t]})}}return r.join("\n\n")}function A(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;"),e}function O(e){return e=e.replace(/\\(\\)/g,F),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,F),e}function M(t){t=t.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,"$1<$2$3>$4");var n=function(t,n){return'<a href="'+n+'">'+e.plainLinkText(n)+"</a>"};return t=t.replace(/<((https?|ftp):[^'">\s]+)>/gi,n),t}function _(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)}),e}function D(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,""),e}function P(e){if(!/\t/.test(e))return e;var t=["    ","   ","  "," "],n=0,r;return e.replace(/[\n\t]/g,function(e,i){return e==="\n"?(n=i+1,e):(r=(i-n)%4,n=i+1,t[r])})}function B(e){if(!e)return"";var t=e.length;return e.replace(H,function(n,r){if(n=="~D")return"%24";if(n==":")if(r==t-1||/[0-9\/]/.test(e.charAt(r+1)))return":";return"%"+n.charCodeAt(0).toString(16)})}function j(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,F),e}function F(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}var e=this.hooks=new n;e.addNoop("plainLinkText"),e.addNoop("preConversion"),e.addNoop("postConversion");var t,i,s,o;this.makeHtml=function(n){if(t)throw new Error("Recursive call to converter.makeHtml");return t=new r,i=new r,s=[],o=0,n=e.preConversion(n),n=n.replace(/~/g,"~T"),n=n.replace(/\$/g,"~D"),n=n.replace(/\r\n/g,"\n"),n=n.replace(/\r/g,"\n"),n="\n\n"+n+"\n\n",n=P(n),n=n.replace(/^[ \t]+$/mg,""),n=a(n),n=u(n),n=l(n),n=_(n),n=n.replace(/~D/g,"$$"),n=n.replace(/~T/g,"~"),n=e.postConversion(n),s=i=t=null,n};var w={ol:"\\d+[.]",ul:"[*+-]"},H=/(?:["'*()[\]:]|~D)/g}}()},"lib/markdown/editor":function(e,t,n){(function(){function h(){}function p(e){this.buttonBar=i.getElementById("wmd-button-bar"+e),this.preview=i.getElementById("wmd-preview"+e),this.input=i.getElementById("wmd-input"+e)}function d(t,n){var r=this,i=[],s=0,o="none",u,f,l,c=function(e,t){o!=e&&(o=e,t||p()),!a.isIE||o!="moving"?f=setTimeout(h,1):l=null},h=function(e){l=new v(n,e),f=undefined};this.setCommandMode=function(){o="command",p(),f=setTimeout(h,0)},this.canUndo=function(){return s>1},this.canRedo=function(){return i[s+1]?!0:!1},this.undo=function(){r.canUndo()&&(u?(u.restore(),u=null):(i[s]=new v(n),i[--s].restore(),t&&t())),o="none",n.input.focus(),h()},this.redo=function(){r.canRedo()&&(i[++s].restore(),t&&t()),o="none",n.input.focus(),h()};var p=function(){var e=l||new v(n);if(!e)return!1;if(o=="moving"){u||(u=e);return}u&&(i[s-1].text!=u.text&&(i[s++]=u),u=null),i[s++]=e,i[s+1]=null,t&&t()},d=function(e){var t=!1;if(e.ctrlKey||e.metaKey){var n=e.charCode||e.keyCode,i=String.fromCharCode(n);switch(i.toLowerCase()){case"y":r.redo(),t=!0;break;case"z":e.shiftKey?r.redo():r.undo(),t=!0}}if(t){e.preventDefault&&e.preventDefault(),window.event&&(window.event.returnValue=!1);return}},m=function(e){if(!e.ctrlKey&&!e.metaKey){var t=e.keyCode;t>=33&&t<=40||t>=63232&&t<=63235?c("moving"):t==8||t==46||t==127?c("deleting"):t==13?c("newlines"):t==27?c("escape"):(t<16||t>20)&&t!=91&&c("typing")}},g=function(){e.addEvent(n.input,"keypress",function(e){(e.ctrlKey||e.metaKey)&&(e.keyCode==89||e.keyCode==90)&&e.preventDefault()});var t=function(){(a.isIE||l&&l.text!=n.input.value)&&f==undefined&&(o="paste",p(),h())};e.addEvent(n.input,"keydown",d),e.addEvent(n.input,"keydown",m),e.addEvent(n.input,"mousedown",function(){c("moving")}),n.input.onpaste=t,n.input.ondrop=t},y=function(){g(),h(!0),p()};y()}function v(t,n){var r=this,s=t.input;this.init=function(){if(!e.isVisible(s))return;if(!n&&i.activeElement&&i.activeElement!==s)return;this.setInputAreaSelectionStartEnd(),this.scrollTop=s.scrollTop;if(!this.text&&s.selectionStart||s.selectionStart===0)this.text=s.value},this.setInputAreaSelection=function(){if(!e.isVisible(s))return;if(s.selectionStart!==undefined&&!a.isOpera)s.focus(),s.selectionStart=r.start,s.selectionEnd=r.end,s.scrollTop=r.scrollTop;else if(i.selection){if(i.activeElement&&i.activeElement!==s)return;s.focus();var t=s.createTextRange();t.moveStart("character",-s.value.length),t.moveEnd("character",-s.value.length),t.moveEnd("character",r.end),t.moveStart("character",r.start),t.select()}},this.setInputAreaSelectionStartEnd=function(){if(!t.ieCachedRange&&(s.selectionStart||s.selectionStart===0))r.start=s.selectionStart,r.end=s.selectionEnd;else if(i.selection){r.text=e.fixEolChars(s.value);var n=t.ieCachedRange||i.selection.createRange(),o=e.fixEolChars(n.text),u="",a=u+o+u;n.text=a;var f=e.fixEolChars(s.value);n.moveStart("character",-a.length),n.text=o,r.start=f.indexOf(u),r.end=f.lastIndexOf(u)-u.length;var l=r.text.length-e.fixEolChars(s.value).length;if(l){n.moveStart("character",-o.length);while(l--)o+="\n",r.end+=1;n.text=o}t.ieCachedRange&&(r.scrollTop=t.ieCachedScrollTop),t.ieCachedRange=null,this.setInputAreaSelection()}},this.restore=function(){r.text!=undefined&&r.text!=s.value&&(s.value=r.text),this.setInputAreaSelection(),s.scrollTop=r.scrollTop},this.getChunks=function(){var t=new h;return t.before=e.fixEolChars(r.text.substring(0,r.start)),t.startTag="",t.selection=e.fixEolChars(r.text.substring(r.start,r.end)),t.endTag="",t.after=e.fixEolChars(r.text.substring(r.end)),t.scrollTop=r.scrollTop,t},this.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after,this.scrollTop=e.scrollTop},this.init()}function m(t,r,s){var o=this,u,f,l,c=3e3,h="delayed",p=function(t,n){e.addEvent(t,"input",n),t.onpaste=n,t.ondrop=n,e.addEvent(t,"keypress",n),e.addEvent(t,"keydown",n)},d=function(){var e=0;return window.innerHeight?e=window.pageYOffset:i.documentElement&&i.documentElement.scrollTop?e=i.documentElement.scrollTop:i.body&&(e=i.body.scrollTop),e},v=function(){if(!r.preview)return;var e=r.input.value;if(e&&e==l)return;l=e;var n=(new Date).getTime();e=t.makeHtml(e);var i=(new Date).getTime();f=i-n,T(e)},m=function(){u&&(clearTimeout(u),u=undefined);if(h!=="manual"){var e=0;h==="delayed"&&(e=f),e>c&&(e=c),u=setTimeout(v,e)}},g=function(e){return e.scrollHeight<=e.clientHeight?1:e.scrollTop/(e.scrollHeight-e.clientHeight)},y=function(){r.preview&&(r.preview.scrollTop=(r.preview.scrollHeight-r.preview.clientHeight)*g(r.preview))};this.refresh=function(e){e?(l="",v()):m()},this.processingTime=function(){return f};var b=!0,w=function(e){var t=r.preview,n=t.parentNode,i=t.nextSibling;n.removeChild(t),t.innerHTML=e,i?n.insertBefore(t,i):n.appendChild(t)},E=function(e){r.preview.innerHTML=e},S,x=function(e){if(S)return S(e);try{E(e),S=E}catch(t){S=w,S(e)}},T=function(e){var t=n.getTop(r.input)-d();r.preview&&(x(e),s()),y();if(b){b=!1;return}var i=n.getTop(r.input)-d();a.isIE?setTimeout(function(){window.scrollBy(0,i-t)},0):window.scrollBy(0,i-t)},N=function(){p(r.input,m),v(),r.preview&&(r.preview.scrollTop=0)};N()}function g(t,n,r,s,u,f,l){function d(e){c.focus();if(e.textOp){r&&r.setCommandMode();var t=new v(n);if(!t)return;var i=t.getChunks(),o=function(){c.focus(),i&&t.setChunks(i),t.restore(),s.refresh()},u=e.textOp(i,o);u||o()}e.execute&&e.execute(r)}function m(e,t){var r="0px",s="-20px",o="-40px",u=e.getElementsByTagName("span")[0];t?(u.style.backgroundPosition=e.XShift+" "+r,e.onmouseover=function(){u.style.backgroundPosition=this.XShift+" "+o},e.onmouseout=function(){u.style.backgroundPosition=this.XShift+" "+r},a.isIE&&(e.onmousedown=function(){if(i.activeElement&&i.activeElement!==n.input)return;n.ieCachedRange=document.selection.createRange(),n.ieCachedScrollTop=n.input.scrollTop}),e.isHelp||(e.onclick=function(){return this.onmouseout&&this.onmouseout(),d(this),!1})):(u.style.backgroundPosition=e.XShift+" "+s,e.onmouseover=e.onmouseout=e.onclick=function(){})}function g(e){return typeof e=="string"&&(e=u[e]),function(){e.apply(u,arguments)}}function y(){var e=n.buttonBar,r="0px",i="-20px",s="-40px",u=document.createElement("ul");u.id="wmd-button-row"+t,u.className="wmd-button-row",u=e.appendChild(u);var a=0,c=function(e,n,r,i){var s=document.createElement("li");s.className="wmd-button",s.style.left=a+"px",a+=25;var o=document.createElement("span");return s.id=e+t,s.appendChild(o),s.title=n,s.XShift=r,i&&(s.textOp=i),m(s,!0),u.appendChild(s),s},p=function(e){var n=document.createElement("li");n.className="wmd-spacer wmd-spacer"+e,n.id="wmd-spacer"+e+t,u.appendChild(n),a+=25};h.bold=c("wmd-bold-button",l("bold"),"0px",g("doBold")),h.italic=c("wmd-italic-button",l("italic"),"-20px",g("doItalic")),p(1),h.link=c("wmd-link-button",l("link"),"-40px",g(function(e,t){return this.doLinkOrImage(e,t,!1)})),h.quote=c("wmd-quote-button",l("quote"),"-60px",g("doBlockquote")),h.code=c("wmd-code-button",l("code"),"-80px",g("doCode")),h.image=c("wmd-image-button",l("image"),"-100px",g(function(e,t){return this.doLinkOrImage(e,t,!0)})),p(2),h.olist=c("wmd-olist-button",l("olist"),"-120px",g(function(e,t){this.doList(e,t,!0)})),h.ulist=c("wmd-ulist-button",l("ulist"),"-140px",g(function(e,t){this.doList(e,t,!1)})),h.heading=c("wmd-heading-button",l("heading"),"-160px",g("doHeading")),h.hr=c("wmd-hr-button",l("hr"),"-180px",g("doHorizontalRule"));var d=/win/.test(o.platform.toLowerCase())?l("redo"):l("redomac");if(f){var v=document.createElement("li"),y=document.createElement("span");v.appendChild(y),v.className="wmd-button wmd-help-button",v.id="wmd-help-button"+t,v.XShift="-240px",v.isHelp=!0,v.style.right="0px",v.title=l("help"),v.onclick=f.handler,m(v,!0),u.appendChild(v),h.help=v}b()}function b(){r}var c=n.input,h={};y();var p="keydown";a.isOpera&&(p="keypress"),e.addEvent(c,p,function(e){if((e.ctrlKey||e.metaKey)&&!e.altKey&&!e.shiftKey){var t=e.charCode||e.keyCode,n=String.fromCharCode(t).toLowerCase();switch(n){case"b":d(h.bold);break;case"i":d(h.italic);break;case"l":d(h.link);break;case"q":d(h.quote);break;case"k":d(h.code);break;case"g":d(h.image);break;case"o":d(h.olist);break;case"u":d(h.ulist);break;case"h":d(h.heading);break;case"r":d(h.hr);break;case"y":d(h.redo);break;case"z":e.shiftKey?d(h.redo):d(h.undo);break;default:return}e.preventDefault&&e.preventDefault(),window.event&&(window.event.returnValue=!1)}}),e.addEvent(c,"keyup",function(e){if(e.shiftKey&&!e.ctrlKey&&!e.metaKey){var t=e.charCode||e.keyCode;if(t===13){var n={};n.textOp=g("doAutoindent"),d(n)}}}),a.isIE&&e.addEvent(c,"keydown",function(e){var t=e.keyCode;if(t===27)return!1}),this.setUndoRedoButtonStates=b}function y(e,t){this.hooks=e,this.getString=t}function w(e){return e.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(e,t,n){return t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g," ")}),t=decodeURIComponent(t),t=encodeURI(t).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g,"%2b")}),n&&(n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,""),n=n.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),n?t+' "'+n+'"':t})}Markdown=t("lib/markdown/converter");var e={},n={},r={},i=window.document,s=window.RegExp,o=window.navigator,u={lineLength:72},a={isIE:/msie/.test(o.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(o.userAgent.toLowerCase())||/msie 5/.test(o.userAgent.toLowerCase()),isOpera:/opera/.test(o.userAgent.toLowerCase())},f={bold:"Strong <strong> Ctrl+B",boldexample:"strong text",italic:"Emphasis <em> Ctrl+I",italicexample:"emphasized text",link:"Hyperlink <a> Ctrl+L",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',quote:"Blockquote <blockquote> Ctrl+Q",quoteexample:"Blockquote",code:"Code Sample <pre><code> Ctrl+K",codeexample:"enter code here",image:"Image <img> Ctrl+G",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg</p>",olist:"Numbered List <ol> Ctrl+O",ulist:"Bulleted List <ul> Ctrl+U",litem:"List item",heading:"Heading <h1>/<h2> Ctrl+H",headingexample:"Heading",hr:"Horizontal Rule <hr> Ctrl+R",undo:"Undo - Ctrl+Z",redo:"Redo - Ctrl+Y",redomac:"Redo - Ctrl+Shift+Z",help:"Markdown Editing Help"},l="http://",c="http://";Markdown.Editor=function(e,t,n){n=n||{},typeof n.handler=="function"&&(n={helpButton:n}),n.strings=n.strings||{},n.helpButton&&(n.strings.help=n.strings.help||n.helpButton.title);var r=function(e){return n.strings[e]||f[e]};t=t||"";var s=this.hooks=new Markdown.HookCollection;s.addNoop("onPreviewRefresh"),s.addNoop("postBlockquoteCreation"),s.addFalse("insertImageDialog"),this.getConverter=function(){return e};var o=this,u;this.run=function(){if(u)return;u=new p(t);var a=new y(s,r),f=new m(e,u,function(){s.onPreviewRefresh()}),l,c;/\?noundo/.test(i.location.href)||(l=new d(function(){f.refresh(),c&&c.setUndoRedoButtonStates()},u),this.textOperation=function(e){l.setCommandMode(),e(),o.refreshPreview()}),c=new g(t,u,null,f,a,n.helpButton,r),c.setUndoRedoButtonStates();var h=o.refreshPreview=function(){f.refresh(!0)};h()}},h.prototype.findTags=function(t,n){var r=this,i;t&&(i=e.extendRegExp(t,"","$"),this.before=this.before.replace(i,function(e){return r.startTag=r.startTag+e,""}),i=e.extendRegExp(t,"^",""),this.selection=this.selection.replace(i,function(e){return r.startTag=r.startTag+e,""})),n&&(i=e.extendRegExp(n,"","$"),this.selection=this.selection.replace(i,function(e){return r.endTag=e+r.endTag,""}),i=e.extendRegExp(n,"^",""),this.after=this.after.replace(i,function(e){return r.endTag=e+r.endTag,""}))},h.prototype.trimWhitespace=function(e){var t,n,r=this;e?t=n="":(t=function(e){return r.before+=e,""},n=function(e){return r.after=e+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,n)},h.prototype.skipLines=function(e,t,n){e===undefined&&(e=1),t===undefined&&(t=1),e++,t++;var r,i;navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+s.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+s.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+s.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+s.$1;if(this.before){r=i="";while(e--)r+="\\n?",i+="\n";n&&(r="\\n*"),this.before=this.before.replace(new s(r+"$",""),i)}if(this.after){r=i="";while(t--)r+="\\n?",i+="\n";n&&(r="\\n*"),this.after=this.after.replace(new s(r,""),i)}},e.isVisible=function(e){if(window.getComputedStyle)return window.getComputedStyle(e,null).getPropertyValue("display")!=="none";if(e.currentStyle)return e.currentStyle.display!=="none"},e.addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},e.removeEvent=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},e.fixEolChars=function(e){return e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e},e.extendRegExp=function(e,t,n){if(t===null||t===undefined)t="";if(n===null||n===undefined)n="";var r=e.toString(),i;return r=r.replace(/\/([gim]*)$/,function(e,t){return i=t,""}),r=r.replace(/(^\/|\/$)/g,""),r=t+r+n,new s(r,i)},n.getTop=function(e,t){var n=e.offsetTop;if(!t)while(e=e.offsetParent)n+=e.offsetTop;return n},n.getHeight=function(e){return e.offsetHeight||e.scrollHeight},n.getWidth=function(e){return e.offsetWidth||e.scrollWidth},n.getPageSize=function(){var e,t,n,r;self.innerHeight&&self.scrollMaxY?(e=i.body.scrollWidth,t=self.innerHeight+self.scrollMaxY):i.body.scrollHeight>i.body.offsetHeight?(e=i.body.scrollWidth,t=i.body.scrollHeight):(e=i.body.offsetWidth,t=i.body.offsetHeight),self.innerHeight?(n=self.innerWidth,r=self.innerHeight):i.documentElement&&i.documentElement.clientHeight?(n=i.documentElement.clientWidth,r=i.documentElement.clientHeight):i.body&&(n=i.body.clientWidth,r=i.body.clientHeight);var s=Math.max(e,n),o=Math.max(t,r);return[s,o,n,r]},r.createBackground=function(){var e=i.createElement("div"),t=e.style;e.className="wmd-prompt-background",t.position="absolute",t.top="0",t.zIndex="1000",a.isIE?t.filter="alpha(opacity=50)":t.opacity="0.5";var r=n.getPageSize();return t.height=r[1]+"px",a.isIE?(t.left=i.documentElement.scrollLeft,t.width=i.documentElement.clientWidth):(t.left="0",t.width="100%"),i.body.appendChild(e),e},r.prompt=function(t,r,s){var o,u;r===undefined&&(r="");var f=function(e){var t=e.charCode||e.keyCode;t===27&&l(!0)},l=function(t){e.removeEvent(i.body,"keydown",f);var n=u.value;return t?n=null:(n=n.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(n)||(n="http://"+n)),o.parentNode.removeChild(o),s(n),!1},c=function(){o=i.createElement("div"),o.className="wmd-prompt-dialog",o.style.padding="10px;",o.style.position="fixed",o.style.width="400px",o.style.zIndex="1001";var s=i.createElement("div");s.innerHTML=t,s.style.padding="5px",o.appendChild(s);var c=i.createElement("form"),h=c.style;c.onsubmit=function(){return l(!1)},h.padding="0",h.margin="0",h.cssFloat="left",h.width="100%",h.textAlign="center",h.position="relative",o.appendChild(c),u=i.createElement("input"),u.type="text",u.value=r,h=u.style,h.display="block",h.width="80%",h.marginLeft=h.marginRight="auto",c.appendChild(u);var p=i.createElement("input");p.type="button",p.onclick=function(){return l(!1)},p.value="OK",h=p.style,h.margin="10px",h.display="inline",h.width="7em";var d=i.createElement("input");d.type="button",d.onclick=function(){return l(!0)},d.value="Cancel",h=d.style,h.margin="10px",h.display="inline",h.width="7em",c.appendChild(p),c.appendChild(d),e.addEvent(i.body,"keydown",f),o.style.top="50%",o.style.left="50%",o.style.display="block",a.isIE_5or6&&(o.style.position="absolute",o.style.top=i.documentElement.scrollTop+200+"px",o.style.left="50%"),i.body.appendChild(o),o.style.marginTop=-(n.getHeight(o)/2)+"px",o.style.marginLeft=-(n.getWidth(o)/2)+"px"};setTimeout(function(){c();var e=r.length;if(u.selectionStart!==undefined)u.selectionStart=0,u.selectionEnd=e;else if(u.createTextRange){var t=u.createTextRange();t.collapse(!1),t.moveStart("character",-e),t.moveEnd("character",e),t.select()}u.focus()},0)};var b=y.prototype;b.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",b.unwrap=function(e){var t=new s("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(t,"$1 $2")},b.wrap=function(e,t){this.unwrap(e);var n=new s("(.{1,"+t+"})( +|$\\n?)","gm"),r=this;e.selection=e.selection.replace(n,function(e,t){return(new s("^"+r.prefixes,"")).test(e)?e:t+"\n"}),e.selection=e.selection.replace(/\s+$/,"")},b.doBold=function(e,t){return this.doBorI(e,t,2,this.getString("boldexample"))},b.doItalic=function(e,t){return this.doBorI(e,t,1,this.getString("italicexample"))},b.doBorI=function(e,t,n,r){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var i=/(\**$)/.exec(e.before)[0],o=/(^\**)/.exec(e.after)[0],u=Math.min(i.length,o.length);if(u>=n&&(u!=2||n!=1))e.before=e.before.replace(s("[*]{"+n+"}$",""),""),e.after=e.after.replace(s("^[*]{"+n+"}",""),"");else if(!e.selection&&o){e.after=e.after.replace(/^([*_]*)/,""),e.before=e.before.replace(/(\s?)$/,"");var a=s.$1;e.before=e.before+o+a}else{!e.selection&&!o&&(e.selection=r);var f=n<=1?"*":"**";e.before=e.before+f,e.after=f+e.after}return},b.stripLinkDefs=function(e,t){return e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(e,n,r,i,s){return t[n]=e.replace(/\s*$/,""),i?(t[n]=e.replace(/["(](.+?)[")]$/,""),i+s):""}),e},b.addLinkDef=function(e,t){var n=0,r={};e.before=this.stripLinkDefs(e.before,r),e.selection=this.stripLinkDefs(e.selection,r),e.after=this.stripLinkDefs(e.after,r);var i="",s=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,o=function(e){n++,e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+n+"]:"),i+="\n"+e},u=function(e,t,i,a,f,l){return i=i.replace(s,u),r[f]?(o(r[f]),t+i+a+n+l):e};e.before=e.before.replace(s,u),t?o(t):e.selection=e.selection.replace(s,u);var a=n;return e.after=e.after.replace(s,u),e.after&&(e.after=e.after.replace(/\n*$/,"")),e.after||(e.selection=e.selection.replace(/\n*$/,"")),e.after+="\n\n"+i,a},b.doLinkOrImage=function(e,t,n){e.trimWhitespace(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var i;if(!(e.endTag.length>1&&e.startTag.length>0)){e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="";if(/\n\n/.test(e.selection)){this.addLinkDef(e,null);return}var s=this,o=function(r){i.parentNode.removeChild(i);if(r!==null){e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var o=w(r);e.startTag=n?"![":"[",e.endTag="]("+o+")",e.selection||(n?e.selection=s.getString("imagedescription"):e.selection=s.getString("linkdescription"))}t()};return i=r.createBackground(),n?this.hooks.insertImageDialog(o)||r.prompt(this.getString("imagedialog"),l,o):r.prompt(this.getString("linkdialog"),c,o),!0}e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",this.addLinkDef(e,null)},b.doAutoindent=function(e,t){var n=this,r=!1;e.before=e.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),!e.selection&&!/^[ \t]*(?:\n|$)/.test(e.after)&&(e.after=e.after.replace(/^[^\n]*/,function(t){return e.selection=t,""}),r=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(e.before)&&n.doList&&n.doList(e),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(e.before)&&n.doBlockquote&&n.doBlockquote(e),/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&n.doCode&&n.doCode(e),r&&(e.after=e.selection+e.after,e.selection="")},b.doBlockquote=function(e,t){e.selection=e.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(t,n,r,i){return e.before+=n,e.after=i+e.after,r}),e.before=e.before.replace(/(>[ \t]*)$/,function(t,n){return e.selection=n+e.selection,""}),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||this.getString("quoteexample");var n="",r="",i;if(e.before){var s=e.before.replace(/\n$/,"").split("\n"),o=!1;for(var a=0;a<s.length;a++){var f=!1;i=s[a],o=o&&i.length>0,/^>/.test(i)?(f=!0,!o&&i.length>1&&(o=!0)):/^[ \t]*$/.test(i)?f=!0:f=o,f?n+=i+"\n":(r+=n+i,n="\n")}/(^|\n)>/.test(n)||(r+=n,n="")}e.startTag=n,e.before=r,e.after&&(e.after=e.after.replace(/^\n?/,"\n")),e.after=e.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(t){return e.endTag=t,""});var l=function(t){var n=t?"> ":"";e.startTag&&(e.startTag=e.startTag.replace(/\n((>|\s)*)\n$/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})),e.endTag&&(e.endTag=e.endTag.replace(/^\n((>|\s)*)\n/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}))};/^(?![ ]{0,3}>)/m.test(e.selection)?(this.wrap(e,u.lineLength-2),e.selection=e.selection.replace(/^/gm,"> "),l(!0),e.skipLines()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(e),l(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),e.selection=this.hooks.postBlockquoteCreation(e.selection),/\n/.test(e.selection)||(e.selection=e.selection.replace(/^(> *)/,function(t,n){return e.startTag+=n,""}))},b.doCode=function(e,t){var n=/\S[ ]*$/.test(e.before),r=/^[ ]*\S/.test(e.after);if(!r&&!n||/\n/.test(e.selection)){e.before=e.before.replace(/[ ]{4}$/,function(t){return e.selection=t+e.selection,""});var i=1,s=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&(i=0),/^\n(\t|[ ]{4,})/.test(e.after)&&(s=0),e.skipLines(i,s),e.selection?/^[ ]{0,3}\S/m.test(e.selection)?/\n/.test(e.selection)?e.selection=e.selection.replace(/^/gm,"    "):e.before+="    ":e.selection=e.selection.replace(/^[ ]{4}/gm,""):(e.startTag="    ",e.selection=this.getString("codeexample"))}else e.trimWhitespace(),e.findTags(/`/,/`/),!e.startTag&&!e.endTag?(e.startTag=e.endTag="`",e.selection||(e.selection=this.getString("codeexample"))):e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag=""},b.doList=function(e,t,n){var r=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,i=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,o="-",a=1,f=function(){var e;return n?(e=" "+a+". ",a++):e=" "+o+" ",e},l=function(e){return n===undefined&&(n=/^\s*\d/.test(e)),e=e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(e){return f()}),e};e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),e.before&&!/\n$/.test(e.before)&&!/^\n/.test(e.startTag)&&(e.before+=e.startTag,e.startTag="");if(e.startTag){var c=/\d+[.]/.test(e.startTag);e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(e),e.skipLines(),c&&(e.after=e.after.replace(i,l));if(n==c)return}var h=1;e.before=e.before.replace(r,function(e){return/^\s*([*+-])/.test(e)&&(o=s.$1),h=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.selection||(e.selection=this.getString("litem"));var p=f(),d=1;e.after=e.after.replace(i,function(e){return d=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.trimWhitespace(!0),e.skipLines(h,d,!0),e.startTag=p;var v=p.replace(/./g," ");this.wrap(e,u.lineLength-v.length),e.selection=e.selection.replace(/\n/g,"\n"+v)},b.doHeading=function(e,t){e.selection=e.selection.replace(/\s+/g," "),e.selection=e.selection.replace(/(^\s+|\s+$)/g,"");if(!e.selection){e.startTag="## ",e.selection=this.getString("headingexample"),e.endTag=" ##";return}var n=0;e.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(e.startTag)&&(n=s.lastMatch.length),e.startTag=e.endTag="",e.findTags(null,/\s?(-+|=+)/),/=+/.test(e.endTag)&&(n=1),/-+/.test(e.endTag)&&(n=2),e.startTag=e.endTag="",e.skipLines(1,1);var r=n==0?2:n-1;if(r>0){var i=r>=2?"-":"=",o=e.selection.length;o>u.lineLength&&(o=u.lineLength),e.endTag="\n";while(o--)e.endTag+=i}},b.doHorizontalRule=function(e,t){e.startTag="----------\n",e.selection="",e.skipLines(2,1,!0)}})()},"lib/markdown/sanitizer":function(e,t,n){(function(){t("lib/markdown"),Markdown.sanitizeHtml=function(e){return e.replace(/<[^>]*>?/gi,Markdown.sanitizeTag)},Markdown.basic_tag_whitelist=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,Markdown.a_white=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,Markdown.img_white=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i,Markdown.sanitizeTag=function(e){return e.match(Markdown.basic_tag_whitelist)||e.match(Markdown.a_white)||e.match(Markdown.img_white)?e:""},Markdown.balanceTags=function(e){if(e=="")return"";var t=/<\/?\w+[^>]*(\s|$|>)/g,n=e.toLowerCase().match(t),r=(n||[]).length;if(r==0)return e;var i,s,o="<p><img><br><li><hr>",u,a=[],f=[],l=!1;for(var c=0;c<r;c++){i=n[c].replace(/<\/?(\w+).*/,"$1");if(a[c]||o.search("<"+i+">")>-1)continue;s=n[c],u=-1;if(!/^<\//.test(s))for(var h=c+1;h<r;h++)if(!a[h]&&n[h]=="</"+i+">"){u=h;break}u==-1?l=f[c]=!0:a[u]=!0}if(!l)return e;var c=0;return e=e.replace(t,function(e){var t=f[c]?"":e;return c++,t}),e}})()},"lib/markdown":function(e,t,n){(function(){var e,r,i;i=t("lib/mentions"),e=t("lib/markdown/converter"),t("lib/markdown/sanitizer"),r=new e.Converter,n.exports={runEditor:function(t){return setTimeout(function(){var n;return n=new e.Editor(r,t),n.hooks.chain("onPreviewRefresh",function(){var e,n;n=$("#wmd-preview"+t).html(),e=$("#wmd-preview"+t);if(e.is(":visible")&&n)return e.html(i(n)),e.find("*").emoticonize({animate:!1})}),n.run(),$(".markdown"+t+" .toggle-preview").click(function(e){var t,r;return e.preventDefault(),t=$(e.target),r=t.closest(".field").find(".wmd-preview"),r.toggle(),n.refreshPreview(),r.is(":visible")?t.html("Hide Preview"):t.html("Show Preview")})},20)},convert:function(e){var t;return e==null&&(e=""),t=$("<div>"+r.makeHtml(e)+"</div>"),t.children().emoticonize(),t.html()}}}).call(this)},"lib/mentions":function(e,t,n){(function(){var e,r,i,s,o,u,a,f;u=t("lib/config").prefix,a=/(\s|^)#([-\w\d]{3,40})/g,s=RegExp("(\\s|^)(A"+u+"\\w{7})","g"),i=RegExp("(\\s|^)(G"+u+"\\w{7})","g"),e=RegExp("(\\s|^)(C"+u+"[SL]\\w{6})","g"),r=RegExp("(\\s|^)(D"+u+"\\w{7})","g"),f=/(\s|^)@([^\s$]+)/g,o=function(e,t,n,r){var i,s,u,a,f,l,c;s=$(e)[0],u=s.textContent||s.innerText||s.nodeValue;if(s.nodeType===3&&r&&u.match(t))return r.replaceChild($("<span>"+u.replace(t,n)+"</span>")[0],s);if(s.nodeType===1&&s.nodeName!=="A"){l=s.childNodes,c=[];for(a=0,f=l.length;a<f;a++)i=l[a],c.push(o(i,t,n,s));return c}},n.exports=function(t){return t=$("<div>"+t+"</div>"),o(t,a,'$1<a title="Tag $2" class="mention" href="#/search?tags[$2]=true">#$2</a>'),o(t,s,'$1<a title="Object $2" class="mention" href="#/subjects/$2">$2</a>'),o(t,e,'$1<a title="Collection $2" class="mention" href="#/collections/$2">$2</a>'),o(t,f,function(e,t,n){return""+t+'<a title="User '+n+'" class="mention" href="#/users/'+encodeURIComponent(n)+'">@'+n+"</a>"}),$(t).html()}}).call(this)},"lib/message_counter":function(e,t,n){(function(){var e,n,r,i;e=t("zooniverse/lib/api"),r=t("zooniverse/lib/models/user"),n=t("models/message"),i=function(){n.timer&&clearTimeout(n.timer);if(r.current)return e.get("/talk/messages/count",function(e){return r.trigger("message-count",e),n.timer=setTimeout(i,6e4)})},r.bind("sign-in",function(){return i()})}).call(this)},"lib/moderation_links":function(e,t,n){(function(){var e,n;n=t("lib/config").project,e=t("zooniverse/lib/api"),$(window).on("click",".report-comment",function(t){var r,i,s,o,u,a,f=this;if(u=prompt("Please enter a brief message describing the problem with this comment:"))return o=$(t.target),a=o.data(),i=a.commentId,s=a.discussionId,r={comment_id:i,discussion_id:s,message:u},e.post("/projects/"+n+"/talk/moderation/report_comment",r,function(){return o.replaceWith("<strong>Reported</strong>")})}),$(window).on("click",".show-for-privileged-user.remove-comment",function(t){var r,i,s,o,u,a,f=this;if(u=prompt("Please enter a brief message describing the problem with this comment:"))return o=$(t.target),a=o.data(),i=a.commentId,s=a.discussionId,r={comment_id:i,discussion_id:s,comment:u},e.post("/projects/"+n+"/talk/moderation/delete_comment",r,function(){return o.closest(".comment,.post").remove()})}),$(window).on("click",".remove-own-comment",function(t){var r,i,s,o,u=this;if(confirm("Are you sure you want to remove this comment?\nThere is no undo."))return s=$(t.target),o=s.data(),r=o.commentId,i=o.discussionId,e["delete"]("/projects/"+n+"/talk/discussions/"+i+"/comments/"+r,function(){return s.closest(".comment,.post").remove()})}),$(window).on("click",".report-user",function(t){var r,i,s,o=this;if(i=prompt("Please enter a brief message describing the problem with this user:"))return r=$(t.target),s=r.data("user-name"),e.post("/projects/"+n+"/talk/moderation/report_user",{user_name:s,message:i},function(e){return r.replaceWith("<strong>Reported</strong>")})}),$(window).on("click",".user.page .ban-user",function(r){var i,s,o,u=this;if(s=prompt("Please enter a brief message describing the reason for banning this user:"))return i=$(r.target),o=i.data("user-name"),e.post("/projects/"+n+"/talk/moderation/ban_user",{user_name:o,comment:s},function(e){return i.closest(".user-moderation").replaceWith(t("views/moderation/user")({user:{name:o,state:"banned"}}))})}),$(window).on("click",".user.page .redeem-user",function(r){var i,s,o,u=this;if(s=prompt("Please enter a brief message describing the reason for redeeming this user:"))return i=$(r.target),o=i.data("user-name"),e.post("/projects/"+n+"/talk/moderation/redeem_user",{user_name:o,comment:s},function(e){return i.closest(".user-moderation").replaceWith(t("views/moderation/user")({user:{name:o}}))})})}).call(this)},"lib/pagination":function(e,t,n){jQuery=t("jqueryify"),function(e){var t={init:function(n){var r=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:1,prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",selectOnClick:!0,onPageClick:function(e){},onInit:function(){}},n||{});return this.each(function(){r.pages=r.pages?r.pages:Math.ceil(r.items/r.itemsOnPage)?Math.ceil(r.items/r.itemsOnPage):1,r.currentPage=r.currentPage-1,r.halfDisplayed=r.displayedPages/2,e(this).addClass(r.cssStyle).data("pagination",r),t._draw.call(this),r.onInit()})},selectPage:function(e){t._selectPage.call(this,e-1)},prevPage:function(){var n=e(this).data("pagination");n.currentPage>0&&t._selectPage.call(this,n.currentPage-1)},nextPage:function(){var n=e(this).data("pagination");n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1)},_draw:function(){var n=e(this).empty(),r=n.data("pagination"),i=t._getInterval(r),s;r.prevText&&t._appendItem(this,r.currentPage-1,{text:r.prevText,classes:"prev"});if(i.start>0&&r.edges>0){var o=Math.min(r.edges,i.start);for(s=0;s<o;s++)t._appendItem(this,s);r.edges<i.start&&r.ellipseText&&n.append('<span class="ellipse">'+r.ellipseText+"</span>")}for(s=i.start;s<i.end;s++)t._appendItem(this,s);if(i.end<r.pages&&r.edges>0){r.pages-r.edges>i.end&&r.ellipseText&&n.append('<span class="ellipse">'+r.ellipseText+"</span>");var u=Math.max(r.pages-r.edges,i.end);for(s=u;s<r.pages;s++)t._appendItem(this,s)}r.nextText&&t._appendItem(this,r.currentPage+1,{text:r.nextText,classes:"next"})},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(n,r,i){var s,o,u=e(n).data("pagination");r=r<0?0:r<u.pages?r:u.pages-1,s=e.extend({text:r+1,classes:""},i||{}),r==u.currentPage?o=e('<span class="current">'+s.text+"</span>"):(o=e('<a data-page="'+(r+1)+'" class="page-link">'+s.text+"</a>"),o.click(function(e){t._selectPage.call(n,r,e)})),s.classes&&o.addClass(s.classes),e(n).append(o)},_selectPage:function(n,r){var i=e(this).data("pagination");i.currentPage=n,i.onPageClick(n+1,r),i.selectOnClick&&t._draw.call(this)}};e.fn.pagination=function(n){if(t[n]&&n.charAt(0)!="_")return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.pagination")}}(jQuery)},"lib/params":function(e,t,n){(function(){n.exports={parse:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v;e||(e=document.location.hash),u=e.split("?")[1],o=u?u.replace("?","").split("&"):[],s={};for(c=0,h=o.length;c<h;c++)a=o[c],p=a.split("="),i=p[0],l=p[1],d=i.match(/\[\]$/)||[],f=d[0],t=d[1],v=i.match(/([-\w\d]+)\[([-\w\d]+)\]/)||[],f=v[0],n=v[1],r=v[2],t?(s[t]||(s[t]=[]),s[t].push(l)):n&&r?(s[n]||(s[n]={}),s[n][r]=l):s[i]=l;return s}}}).call(this)},"lib/setup":function(e,t,n){(function(){t("lib/config"),t("json2ify"),t("es5-shimify"),t("jqueryify"),t("spine"),t("spine/lib/local"),t("spine/lib/ajax"),t("spine/lib/manager"),t("spine/lib/route"),t("lib/markdown/converter"),t("lib/markdown/sanitizer"),t("lib/markdown/editor"),t("lib/pagination"),t("lib/autocomplete"),t("lib/emoticons"),t("lib/chosen"),t("lib/jquery.sparkline.min"),window.Spinner=t("lib/spinner.min")}).call(this)},"lib/social":function(e,t,n){(function(){var e,r;r=t("lib/config").socialDefaults,e=function(e){return e.replace("\n","","g")},n.exports={facebook:function(t){return e("https://www.facebook.com/sharer/sharer.php\n?s=100\n&p[url]="+encodeURIComponent(t.href||r.href)+"\n&p[title]="+encodeURIComponent(t.title||r.title)+"\n&p[summary]="+encodeURIComponent(t.summary||r.summary)+"\n&p[images][0]="+encodeURIComponent(t.image||r.image))},twitter:function(t){return e("http://twitter.com/home\n?status="+encodeURIComponent(t.summary||r.summary)+"\n%20"+encodeURIComponent(t.href||r.href)+"\n%20"+encodeURIComponent(t.twitterTags||r.twitterTags))},pinterest:function(t){return e("http://pinterest.com/pin/create/button/\n?url="+encodeURIComponent(t.href||r.href)+"\n&media="+encodeURIComponent(t.image||r.image)+"\n&description="+encodeURIComponent(t.summary||r.summary))}}}).call(this)},"lib/spinner.min":function(e,t,n){!function(t,r){"object"==typeof e?n.exports=r():"function"==typeof define&&define.amd?define(r):t.Spinner=r()}(this,function(){"use strict";function e(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,r){var i=["opacity",t,~~(100*e),n,r].join("-"),s=.01+n/r*100,o=Math.max(1-(1-e)/t*(100-s),e),u=l.substring(0,l.indexOf("Animation")).toLowerCase(),a=u&&"-"+u+"-"||"";return h[i]||(p.insertRule("@"+a+"keyframes "+i+"{0%{opacity:"+o+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}100%{opacity:"+o+"}}",p.cssRules.length),h[i]=1),i}function r(e,t){var n,r,i=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<c.length;r++)if(n=c[r]+t,void 0!==i[n])return n;return void 0!==i[t]?t:void 0}function i(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function o(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function u(e,t){return"string"==typeof e?e:e[t%e.length]}function a(e){return"undefined"==typeof this?new a(e):(this.opts=s(e||{},a.defaults,d),void 0)}function f(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,r){function s(){return i(n("group",{coordsize:l+" "+l,coordorigin:-f+" "+ -f}),{width:l,height:l})}function o(e,o,a){t(h,t(i(s(),{rotation:360/r.lines*e+"deg",left:~~o}),t(i(n("roundrect",{arcsize:r.corners}),{width:f,height:r.width,left:r.radius,top:-r.width>>1,filter:a}),n("fill",{color:u(r.color,e),opacity:r.opacity}),n("stroke",{opacity:0}))))}var a,f=r.length+r.width,l=2*f,c=2*-(r.width+r.length)+"px",h=i(s(),{position:"absolute",top:c,left:c});if(r.shadow)for(a=1;a<=r.lines;a++)o(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=r.lines;a++)o(a);return t(e,h)},a.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var l,c=["webkit","Moz","ms","O"],h={},p=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},s(a.prototype,{spin:function(t){this.stop();var n,r,s=this,u=s.opts,a=s.el=i(e(0,{className:u.className}),{position:u.position,width:0,zIndex:u.zIndex}),f=u.radius+u.length+u.width;if(t&&(t.insertBefore(a,t.firstChild||null),r=o(t),n=o(a),i(a,{left:("auto"==u.left?r.x-n.x+(t.offsetWidth>>1):parseInt(u.left,10)+f)+"px",top:("auto"==u.top?r.y-n.y+(t.offsetHeight>>1):parseInt(u.top,10)+f)+"px"})),a.setAttribute("role","progressbar"),s.lines(a,s.opts),!l){var c,h=0,p=(u.lines-1)*(1-u.direction)/2,d=u.fps,v=d/u.speed,m=(1-u.opacity)/(v*u.trail/100),y=v/u.lines;!function b(){h++;for(var e=0;e<u.lines;e++)c=Math.max(1-(h+(u.lines-e)*y)%v*m,u.opacity),s.opacity(a,e*u.direction+p,c,u);s.timeout=s.el&&setTimeout(b,~~(1e3/d))}()}return s},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,s){function o(t,n){return i(e(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*f+s.rotate)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var a,f=0,c=(s.lines-1)*(1-s.direction)/2;f<s.lines;f++)a=i(e(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:l&&n(s.opacity,s.trail,c+f*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&t(a,i(o("#000","0 0 4px #000"),{top:"2px"})),t(r,t(a,o(u(s.color,f),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var v=i(e("group"),{behavior:"url(#default#VML)"});return!r(v,"transform")&&v.adj?f():l=r(v,"animation"),a})},"lib/sub_stack":function(e,t,n){(function(){var e,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("spine"),r=function(e){function t(){var e,n,r,i,s=this;i=this.routes,r=function(e,t){return s.routes[e]=function(){var e;return s.active(),(e=s[t]).active.apply(e,arguments)}};for(e in i)n=i[e],r(e,n);t.__super__.constructor.apply(this,arguments)}return s(t,e),t}(e.Stack),n.exports=r}).call(this)},"lib/util":function(e,t,n){(function(){var e,r,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s={}.hasOwnProperty;r=t("lib/config"),e=["and","to","the"],n.exports={capitalize:function(e){return e.replace(/^(\w)/,function(e){return e.toUpperCase()})},truther:function(e){return e?"yes":"no"},focusCollectionFor:function(e){if(e==="Board")return"boards";if(/Subject$/.test(e))return"subjects";if(/Group$/.test(e))return"groups";if(e==="SubjectSet"||e==="KeywordSet")return"collections"},singularize:function(e){return e.replace(/s$/,"")},pluralize:function(e,t,n){return e>1||e===0?n:t},truncate:function(e,t){return typeof e!="string"?e:e.length<=t?e:e.substring(0,t).replace(/\s?\w+$/,"")+"..."},titleize:function(t){return t.replace(/([-_ ]|^)(\w)/g,function(e,t,n){return" "+n.toUpperCase()}).trim().split(" ").map(function(t,n){var r;return n===0?t:(r=t.toLowerCase(),i.call(e,r)>=0)?t.toLowerCase():t}).join(" ")},formatNumber:function(e){return e?e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):e},equalObjects:function(e,t){var n,r;for(n in e){if(!s.call(e,n))continue;r=e[n];if(!(n in t))return!1;if(r===Object(r)){if(!arguments.callee(r,t[n]))return!1}else if(t[n]!==r)return!1}for(n in t){if(!s.call(t,n))continue;r=t[n];if(!(n in e))return!1;if(r===Object(r)){if(!arguments.callee(r,e[n]))return!1}else if(e[n]!==r)return!1}return!0},getCategoryLabel:function(e){var t,n;return t=(r!=null?(n=r.app)!=null?n.categoryLabels:void 0:void 0)||{},e in t?t[e]:e}}}).call(this)},"models/focus":function(e,t,n){(function(){var e,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty;i=t("lib/config").project,e=t("zooniverse/lib/api"),r=function(){function t(e){this.focusType=s(this.focusType,this),this.reload=s(this.reload,this),this.url=s(this.url,this);var t,n;for(t in e){if(!o.call(e,t))continue;n=e[t],this[t]=n}}return t.records={},t.findOrFetch=function(e,n){return t.exists(e)?n(t.find(e)):t.fetch(e,n)},t.fetch=function(n,r){return e.get(t.urlFor(n),function(e){return t.records[n]=new t(e),r(e)})},t.exists=function(e){return!!t.records[e]},t.find=function(e){return t.records[e]},t.typeOf=function(e){switch(e[0]){case"A":return"subjects";case"B":return"boards";case"C":return"collections";case"G":return"groups"}},t.urlFor=function(e){return"/projects/"+i+"/talk/"+this.typeOf(e)+"/"+e},t.prototype.url=function(){return t.urlFor(this.zooniverse_id)},t.prototype.reload=function(){var e=this;return t.fetch(this.zooniverse_id,function(e){return t.records[e.zooniverse_id]=e})},t.prototype.focusType=function(){return t.typeOf(this.zooniverse_id)},t}.call(this),n.exports=r}).call(this)},"models/message":function(e,t,n){(function(){var e,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty;e=t("zooniverse/lib/api"),i=t("lib/config").projectName,r=function(){function t(e){this._copy_keys_from=s(this._copy_keys_from,this),this.isTitleBlank=s(this.isTitleBlank,this),this.isRecipient=s(this.isRecipient,this),this.isSender=s(this.isSender,this),this.isUnread=s(this.isUnread,this),this.destroy=s(this.destroy,this),this.sendReply=s(this.sendReply,this),this.reload=s(this.reload,this),this.url=s(this.url,this),this._copy_keys_from(e)}return t.records={},t.fetch=function(n){return e.get(t.url(),function(e){var r,i,s;for(i=0,s=e.length;i<s;i++)r=e[i],t.records[r.id]=new t(r);return typeof n=="function"?n(t.records):void 0})},t.exists=function(e){return!!t.records[e]},t.get=function(n,r){return e.get(t.url(n),function(e){return t.records[e.id]=new t(e),typeof r=="function"?r(t.records[e.id]):void 0})},t.url=function(e){var t;return t="/talk/messages",e&&(t+="/"+e),t},t.start=function(n,r,i,s){var o,u=this;o=e.post(this.url(),{user_name:n,message:r}),o.onSuccess(function(e){return u.records[e.id]=new t(e),typeof i=="function"?i(u.records[e.id]):void 0});if(s)return o.onFailure(s)},t.prototype.url=function(){return t.url(this.id)},t.prototype.reload=function(e){return t.get(id,e)},t.prototype.sendReply=function(n,r){var s=this;return e.post(""+this.url()+"/reply",{message:{body:n,project_name:i}},function(e){return s._copy_keys_from(e),t.records[s.id]=s,typeof r=="function"?r(s):void 0})},t.prototype.destroy=function(n){var r=this;return e["delete"](this.url(),function(){return delete t.records[r.id],typeof n=="function"?n():void 0})},t.prototype.isUnread=function(e){var t;return t=this.isSender(e)?this.last_read_by.user_from:this.last_read_by.user_to,!t||this.updated_at>t},t.prototype.isSender=function(e){return this.user_from.id===e.id},t.prototype.isRecipient=function(e){return this.user_to.id===e.id},t.prototype.isTitleBlank=function(){return/^\s+$/.test(this.title)},t.prototype._copy_keys_from=function(e){var t,n,r;r=[];for(t in e){if(!o.call(e,t))continue;n=e[t],r.push(this[t]=n)}return r},t}.call(this),n.exports=r}).call(this)},"models/roles":function(e,t,n){(function(){var e,r,i,s,o,u,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=t("lib/config"),e=t("zooniverse/lib/api"),s=i.project,o=(i!=null?(u=i.app)!=null?u.roleLabels:void 0:void 0)||{},r=function(){function t(){}return t.roles={},t.url="/projects/"+s+"/talk/users/roles",t.fetch=function(t){var n=this;return e.get(this.url,function(e){var r,i,s,u;for(s=0,u=e.length;s<u;s++)i=e[s],n.roles[i.name]=function(){var e,t,n,s;n=i.roles,s=[];for(e=0,t=n.length;e<t;e++)r=n[e],s.push(r in o?o[r]:r);return s}(),n.roles[i.name]=function(){var e,t,n,s;n=this.roles[i.name],s=[];for(e=0,t=n.length;e<t;e++)r=n[e],r!=="translator"&&s.push(r);return s}.call(n);return typeof t=="function"?t():void 0})},t.hasRole=function(e,n){return t.roles[e]!=null&&a.call(t.roles[e],n)>=0},t}.call(this),n.exports=r}).call(this)},"views/app_header":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o;s=t("zooniverse/lib/models/user").current,n.push("\n"),o=t("lib/config"),r=o.projectName,e=o.classifyUrl,n.push('\n\n<div class="main">\n  <div class="group">\n    <h1><a href="/"><img src="images/logo-white.png" class="logo" /><strong>Talk</strong> '),n.push(i(r)),n.push('</a></h1>\n  </div>\n  \n  <div class="group">\n    <nav>\n      <ul>\n        <li class="hide-without-user"><a href="#/following">Following</a></li>\n        <li><a href="#/recent" class="active">Recent</a></li>\n        <li><a href="#/boards">Discussion boards</a></li>\n        <li><a href="#/search">Search</a></li>\n        <li class="hide-without-user"><a href="#/profile">Profile</a></li>\n        <li class="show-for-privileged-user"><a href="#/moderation">Moderation</a></li>\n      </ul>\n    </nav>\n  </div>\n\n  <div class="return group">\n    <a title="No new messages" class="hide-without-user message-counter" href="#/profile" data-count="0"></a>\n    <nav>\n      <ul>\n        <li>\n          <span class="search button" style="display: none;">Search</span>\n          <div class="right search dropdown" style="display: none;">\n            <form name="search">\n              <div class="field"><input type="text" name="query" /></div>\n              <div class="action"><button type="submit">Search</button></div>\n            </form>\n          </div>\n        </li>\n      </ul>\n    </nav>\n\n    <a href="'),n.push(i(e)),n.push('" class="return">Return to classifying</a>\n  </div>\n</div>\n\n'),s&&n.push('\n  <div class="sign-out"><button name="sign-out">Sign out</button></div>\n'),n.push('\n\n\n<div class="sign-in">\n  <header>Sign in to participate!</header>\n\n  <form name="sign-in">\n    <input type="text" name="username" placeholder="Username" required="required" />\n    <input type="password" name="password" placeholder="Password" required="required" />\n    <button type="submit">Sign in</button>\n  </form>\n\n  <a href="https://www.zooniverse.org/password/reset" class="forgot">Forgot your password?</a>\n\n  <div class="error" style="display: none;"></div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/boards/discussion_list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,i,s,o,u,a;if(this.page===1){n.push("\n  "),u=this.boardFeatured;for(r=0,s=u.length;r<s;r++)e=u[r],n.push("\n    "),e.featured=!0,n.push("\n    "),n.push(t("views/discussions/summary")({discussion:e,followable:!0})),n.push("\n  ");n.push("\n")}n.push("\n\n"),a=this.discussions;for(i=0,o=a.length;i<o;i++)e=a[i],n.push("\n  "),n.push(t("views/discussions/summary")({discussion:e,followable:!0})),n.push("\n");n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/boards/index":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/discussions/featured")({featured:this.featured})),n.push("\n    "),this.tags&&(n.push("\n      <hr />\n      "),n.push(t("views/hashtags/list")({tags:this.tags})),n.push('\n      <hr />\n      <div class="active-users"></div>\n    ')),n.push('\n  </div>\n  \n  <div class="two-thirds column">\n    '),n.push(t("views/boards/list")(this)),n.push("\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/boards/list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d,v;d=t("lib/util"),f=d.titleize,o=d.getCategoryLabel,n.push('\n\n<div class="boards">\n  '),r=["help","science","chat"],n.push("\n\n  ");for(u=l=0,h=r.length;l<h;u=++l){s=r[u],n.push("\n    "),a=o(s),n.push("\n    <h3>\n      "),n.push(i(f(a))),n.push('\n      \n      <div class="aux show-for-privileged-user">\n        <button name="new-board" value="'),n.push(i(s)),n.push('">Start a new '),n.push(i(a)),n.push(" board</button>\n      </div>\n    </h3>\n    \n    "),this[s]||(this[s]=[]),n.push("\n    ");if(this[s].length===0)n.push('\n      <div class="none">There are currently no '),n.push(i(a)),n.push(" boards.</div>\n    ");else{n.push('\n      <div class="board-summaries">\n        '),v=this[s];for(c=0,p=v.length;c<p;c++)e=v[c],n.push("\n          "),n.push(t("views/boards/summary")(e)),n.push("\n        ");n.push("\n      </div>\n    ")}n.push("\n    \n    "),u!==r.length-1&&n.push("\n      <hr />\n    "),n.push("\n  ")}n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/boards/new":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("lib/util").getCategoryLabel,n.push("\n\n<h4>Create a new "),n.push(i(e(this.category))),n.push(' board</h4>\n<form class="new-board boxed">\n  <input type="hidden" name="category" value="'),n.push(i(this.category)),n.push('">\n  \n  <div class="field"><input type="text" name="title" placeholder="Title" required="required" /></div>\n  <div class="field"><textarea name="description" placeholder="Description" required="required"></textarea></div>\n\n  <div class="action">\n    <button type="submit" name="submit">Create Board</button>\n  </div>\n</form>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/boards/show":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s;s=t("lib/util"),r=s.titleize,e=s.getCategoryLabel,n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/discussions/featured")({featured:this.featured,category:this.category})),n.push("\n    <hr />\n    "),n.push(t("views/hashtags/list")({tags:this.tags})),n.push('\n    <hr />\n    <div class="active-users"></div>\n  </div>\n  \n  <div class="two-thirds column">\n    <div class="board">\n      <h3>\n        <span class="category">'),n.push(i(r(e(this.category)))),n.push(' Board</span>\n        /\n        <span class="sub-board">'),n.push(i(this.title)),n.push('</span>\n      </h3>\n      \n      <div class="discussions">\n        '),this.discussions.length===0?n.push('\n          <div class="none">There are curently no discussions.</div>\n        '):(n.push('\n          <div class="discussion-summaries">\n            <div class="list">\n              '),n.push(t("views/boards/discussion_list")({discussions:this.discussions[this.currentPage],boardFeatured:this.boardFeatured,page:this.currentPage})),n.push('\n            </div>\n            <div class="pages"></div>\n          </div>\n        ')),n.push("\n      </div>\n      \n      <hr />\n      "),n.push(t("views/discussions/new_form")(this)),n.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/boards/summary":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u;o=t("views/user_link"),n.push("\n"),u=t("lib/util"),s=u.pluralize,e=u.formatNumber,n.push("\n"),r=t("moment/moment"),n.push('\n\n<div class="board-summary">\n  <div class="info">\n    <div class="title"><a href="#/boards/'),n.push(i(this.zooniverse_id)),n.push('">'),n.push(i(this.title||"(Untitled board)")),n.push('</a></div>\n    <div class="description">'),n.push(i(this.description)),n.push('</div>\n  </div>\n  \n  <div class="stats">\n    <div class="counts">\n      <span class="discussions">'),n.push(i(e(this.discussions))),n.push("</span>\n      "),n.push(i(s(this.discussions,"discussion","discussions"))),n.push(',\n      \n      <span class="posts">'),n.push(i(e(this.comments))),n.push("</span>\n      "),n.push(i(s(this.comments,"post","posts"))),n.push(',\n      \n      <span class="users">'),n.push(i(e(this.users))),n.push("</span>\n      "),n.push(i(s(this.users,"participant","participants"))),n.push('\n      \n      <div class="last">\n        '),this.last_updated&&this.last_comment?(n.push('\n          Last post\n          <span class="last-modified">\n            '),n.push(t("views/timestamp")({timestamp:this.last_comment.created_at})),n.push("\n            "),n.push(o({link:this.last_comment})),n.push("\n          </span>\n        ")):n.push('\n          <span class="last-modified"><em>No posts yet</em></span>\n        '),n.push("\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/collections/discussion_focus":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("views/user_link"),n.push('\n\n<div class="collection discussion-focus">\n  <h3>\n    <a href="#/collections/'),n.push(i(this._id||this.zooniverse_id)),n.push('">'),n.push(i(this.title)),n.push('</a>\n    <span class="aux">\n      '),n.push(e({link:this})),n.push("\n      ("),n.push(i(this.subjectsCount)),n.push(' items)\n    </span>\n  </h3>\n  \n  <div class="subjects">\n    <div class="list">\n      '),n.push(t("views/collections/subjects_for_discussion")({subjects:this.subjects[1]})),n.push("\n    </div>\n    "),this.subjectPages>1&&n.push('<div class="page-wrapper"><div class="pages"></div></div>'),n.push("\n  </div>\n  \n  "),n.push(t("views/focus/comments")({discussionId:this.discussion.zooniverse_id,comments:this.discussion.comments,fromBoard:!0})),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/collections/keyword_field":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<div class="keyword">\n  <select class="operator">\n    <option value="true">include</option>\n    <option value="false" '),this.include===!1&&t.push('selected="selected"'),t.push('>exclude</option>\n  </select>\n  \n  <input type="text" class="tag" placeholder="Tag" value="'),t.push(r(this.keyword)),t.push('" />\n  <button type="button" name="remove-keyword">&times;</button>\n</div>\n')}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/collections/list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p;s=t("lib/util").pluralize,n.push("\n"),r=t("moment/moment"),n.push('\n\n<div class="collection-summaries">\n  '),h=this.collections;for(a=0,l=h.length;a<l;a++){e=h[a],n.push("\n    "),u=(e!=null?e.subjects:void 0)||[],n.push('\n    <div class="collection-summary">\n      <a href="#/collections/'),n.push(i(e.zooniverse_id)),n.push('">\n        <span class="info">\n          '),n.push(i(e.title)),n.push("\n          by "),n.push(i(e.user_name)),n.push("\n          "),this.updatedStats&&(n.push("\n            last updated\n            "),n.push(t("views/timestamp")({timestamp:e.updated_at})),n.push("\n          ")),n.push("\n          "),n.push(i(""+e.subjects_count+" "+s(e.subjects_count,"image","images"))),n.push('\n        </span>\n        \n        <span class="subjects">\n          '),p=u.slice(0,5);for(f=0,c=p.length;f<c;f++)o=p[f],n.push('\n            <span class="subject">\n              <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(o!=null?o.location:void 0))),n.push('" class="thin-frame" />\n            </span>\n          ');n.push("\n        </span>\n      </a>\n    </div>\n  ")}n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/collections/new":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d,v;n.push('<form class="new-collection">\n  '),this.type==="SubjectSet"&&(n.push('\n    <input type="hidden" name="subject_id" value="'),n.push(i(this.subjectId)),n.push('">\n  ')),n.push("\n  \n  "),this.zooniverse_id!=null&&((l=this.keywords)!=null?l.length:void 0)!==0?n.push("\n    <h3>Edit your keyword collection</h3>\n  "):this.zooniverse_id!=null?n.push("\n    <h3>Edit your collection</h3>\n  "):this.subjectId?(n.push('\n    <h3>Start a collection starting with <a href="#/subjects/'),n.push(i(this.subjectId)),n.push('">'),n.push(i(this.subjectId)),n.push("</a></h3>\n  ")):((c=this.keywords)!=null?c.length:void 0)!==0&&n.push("\n    <h3>Create a keyword collection</h3>\n    <p>Keep track of subjects that others have tagged with words that interest you.</p>\n    <p>A keyword collection will update automatically as more subjects are tagged.</p>\n  "),n.push('\n\n  <div class="columns">\n    <div class="one-half column">\n      <div class="field"><input type="text" name="title" required="required" placeholder="Title" value="'),n.push(i(this.title)),n.push('" /></div>\n      <div class="field"><textarea name="description" required="required" placeholder="Description">'),n.push(i(this.description)),n.push('</textarea></div>\n    </div>\n\n    <div class="one-half column">\n      ');if(this.keywords!=null){n.push('\n        <h4>Keywords</h4>\n        <div class="keywords">\n          ');if(this.keywords instanceof Array){n.push("\n            "),h=this.keywords;for(o=0,a=h.length;o<a;o++)r=h[o],n.push("\n              "),n.push(t("views/collections/keyword_field")({keyword:r})),n.push("\n            ");n.push("\n          ")}else{n.push("\n            "),p=this.keywords;for(r in p)e=p[r],n.push("\n              "),n.push(t("views/collections/keyword_field")({keyword:r,include:e==="true"})),n.push("\n            ");n.push("\n          ")}n.push('\n        </div>\n        <button type="button" name="add-keyword">+</button>\n      ')}else if(((d=this.subjects)!=null?d.length:void 0)>0){n.push('\n        <h4>Subjects</h4>\n        <ul class="subjects">\n          '),v=this.subjects;for(u=0,f=v.length;u<f;u++)s=v[u],n.push('\n            <li class="subject">\n              <a href="#/subjects/'),n.push(i(s.zooniverse_id)),n.push('">\n                <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(s!=null?s.location:void 0))),n.push('" />\n              </a>\n              <button type="button" name="remove" value="'),n.push(i(s.zooniverse_id)),n.push('">&times;</button>\n            </li>\n          ');n.push("\n        </ul>\n      ")}n.push('\n    </div>\n  </div>\n\n  <div class="action" style="text-align: center;">\n    <button type="submit">\n      '),this.id?n.push("Save changes"):n.push("Create"),n.push("\n    </button>\n  </div>\n</form>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/collections/show":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h;e=t("zooniverse/lib/models/user"),n.push("\n"),a=t("views/user_link"),n.push("\n\n<header>\n  <h2>\n    Collection "),n.push(i(this.title)),n.push(" - Collection ID: "),n.push(i(this.zooniverse_id)),n.push(" - "),n.push(a({link:this,avatar:!0})),n.push("\n    "),this.user_id===((l=e.current)!=null?l.id:void 0)&&(n.push('\n      <span class="owned">(<a href="#/collections/'),n.push(i(this.zooniverse_id)),n.push('/edit">Edit</a>)</span>\n    ')),n.push('\n    \n    <span class="aux">\n      '),n.push(t("views/follow_button")({id:this.zooniverse_id,type:"subject_sets",follower_ids:this.follower_ids})),n.push("\n      "),n.push(t("views/dashboard_button")({zooId:this.zooniverse_id,type:"collection",name:this.title.replace(" ","-","g")})),n.push("\n      "),this.subjects[1]&&n.push(t("views/share_button")({image:t("controllers/subject_viewer").imageIn((c=this.subjects[1][0])!=null?c.location:void 0),pinterest:!1})),n.push('\n    </span>\n  </h2>\n</header>\n\n<div class="subjects">\n  <h3>Subjects in this collection</span>'),this.subjectPages>1&&n.push('<div class="pages"></div>'),n.push('</h3>\n  <ul class="list">\n    '),this.subjectsCount>0?(n.push("\n      "),n.push(t("views/collections/subject_list")({subjects:this.subjects[1]})),n.push("\n    ")):n.push('\n      <div class="none">This collection is currently empty</div>\n    '),n.push('\n  </ul>\n</div>\n\n<div class="focus">\n  '),n.push(t("views/focus/comment_form")()),n.push("\n  "),n.push(t("views/focus/comments")({discussionId:this.discussion.zooniverse_id,comments:this.discussion.comments,count:this.discussion.comments_count})),n.push('\n</div>\n\n<div class="description">\n  <h3>Description</h3>\n  <p>'),n.push(i(this.description)),n.push("</p>\n  \n  ");if(this.keywords){n.push("\n    "),o=function(){var e,t;e=this.keywords,t=[];for(f in e)s=e[f],s==="true"&&t.push("#"+f);return t}.call(this),n.push("\n    "),r=function(){var e,t;e=this.keywords,t=[];for(f in e)s=e[f],s==="false"&&t.push("<a href='#/search?kind=subject&tags["+f+"]=true'>#"+f+"</a>");return t}.call(this),n.push("\n    "),u={},n.push("\n    "),h=this.keywords;for(f in h)s=h[f],s==="true"&&(u[f]="true");n.push("\n    \n    <p>\n      Includes "),n.push('<a href="#/search?kind=subject&'+decodeURI($.param({tags:u}))+'">'+o.join(" and ")+"</a>"||"every subject"),n.push("\n      "),r.length!==0&&(n.push("but not "),n.push(r.join(" or "))),n.push("\n    </p>\n  ")}n.push('\n</div>\n\n<div class="hashtags">\n  <h3>Hashtags</h3>\n  '),n.push(t("views/hashtags/list")({tags:this.tags})),n.push('\n</div>\n\n<div class="discussions">\n  '),n.push(t("views/focus/discussions")({boards:this.board_discussions,mentions:this.mentions})),n.push("\n</div>")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/collections/subject_list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o;o=this.subjects||[];for(r=0,s=o.length;r<s;r++)e=o[r],n.push('\n  <li>\n    <a href="#/subjects/'),n.push(i(e.zooniverse_id)),n.push('">\n      <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(e!=null?e.location:void 0))),n.push('" />\n      <span class="label">'),n.push(i(e.zooniverse_id)),n.push("</span>\n    </a>\n  </li>\n");n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/collections/subjects_for_discussion":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o;o=this.subjects;for(r=0,s=o.length;r<s;r++)e=o[r],n.push('\n  <a href="#/subjects/'),n.push(i(e.zooniverse_id)),n.push('" class="subject">\n    <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(e!=null?e.location:void 0))),n.push('" class="thin-frame" />\n    <span class="title">'),n.push(i(e.zooniverse_id)),n.push("</span>\n  </a>\n");n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/dashboard_button":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("lib/config"),n.push("\n"),e.dashboard&&(n.push('\n  <div class="dashboard dashboard-link">\n    <a target="_blank" href="http://tools.zooniverse.org/#/project/'),n.push(i(e.project)),n.push("/"),n.push(i(this.type)),n.push("/"),n.push(i(this.zooId)),n.push("/Dashboard-from-"),n.push(i(this.name)),n.push('">Open in Tools</a>\n  </div>\n')),n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/board_categories":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s;s=t("lib/util"),r=s.titleize,e=s.getCategoryLabel,n.push('\n<span class="category">'),n.push(i(r(e(this.board.category)))),n.push(' Board</span>\n/\n<span class="sub-board"><a href="#/boards/'),n.push(i(this.board._id)),n.push('">'),n.push(i(this.board.name)),n.push("</a></span>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/comment":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u;u=t("views/user_link"),n.push("\n"),s=t("moment/moment"),n.push("\n"),e=t("lib/markdown"),n.push("\n"),r=t("lib/mentions"),n.push("\n"),o=t("models/roles").roles[this.comment.user_name],n.push('\n\n<div id="'),n.push(i(this.comment._id)),n.push('" class="post'),o&&n.push(i(" "+o.sort().join(" "))),n.push('">\n  <header>\n    '),n.push(u({link:this.comment,avatar:!0})),n.push("\n    "),this.comment.response_to&&(n.push('\n      <a class="response-to user">in response to\n        <img src="//zooniverse-avatars.s3.amazonaws.com/ouroboros/'),n.push(i(this.comment.response_to.user_zooniverse_id)),n.push('" class="avatar" onerror="window.defaultAvatar(this)" />\n        '),n.push(i(this.comment.response_to.user_name)),n.push("'s comment\n      </a>\n    ")),n.push("\n    "),n.push(t("views/moderation/comment")({discussionId:this.discussionId,comment:this.comment})),n.push('\n  </header>\n  \n  <div class="content">\n    '),n.push(r(e.convert(this.comment.body))),n.push('\n  </div>\n  \n  <footer>\n    <div class="respond-to hide-without-user">\n      <a class="respond-link" data-id="'),n.push(i(this.comment._id)),n.push('">Respond</a>\n    </div>\n    \n    Posted\n    '),n.push(t("views/timestamp")({timestamp:this.comment.created_at})),n.push("\n  </footer>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/comment_form":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="respond hide-without-user">\n  <h4>Leave a post here:<span class="in-response-to"></span></h4>\n\n  <form class="new-comment boxed">\n    <div class="field">\n      '),n.push(t("views/markdown")({"class":"comment",name:"comment",placeholder:"Leave a comment"})),n.push('\n    </div>\n    \n    <input type="hidden" name="response_to_id" value="">\n\n    <div class="action">\n      <button type="submit">Submit</button>\n    </div>\n  </form>\n</div>\n\n<div class="sign-in-prompt hide-with-user">\n  You must be <a href="#" class="scroll-to-top">signed in</a> to reply.\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/comments":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,i,s;n.push('<ul class="posts">\n  '),s=this.comments[this.currentPage];for(r=0,i=s.length;r<i;r++)e=s[r],n.push("\n    <li>\n      "),n.push(t("views/discussions/comment")({discussionId:this.zooniverse_id,comment:e})),n.push("\n    </li>\n  ");n.push('\n</ul>\n<div class="pages"></div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/edit_categories":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d,v,m;p=t("lib/util"),r=p.capitalize,o=p.getCategoryLabel,n.push('\n\n<form class="edit-discussion-categories boxed">\n  <label>Move this discussion to: </label>\n  <div class="field">\n    <select class="category" required="required">\n      '),d=["help","science","chat"];for(u=0,l=d.length;u<l;u++)s=d[u],n.push('\n        <option value="'),n.push(i(s)),n.push('"'),s===this.board.category&&n.push(i(" selected")),n.push(">"),n.push(i(r(o(s)))),n.push("</option>\n      ");n.push('\n    </select>\n  </div>\n  \n  <div class="field">\n    <select class="sub-board" required="required" data-category="'),n.push(i(this.board.category)),n.push('">\n      '),v=["help","science","chat"];for(a=0,c=v.length;a<c;a++){s=v[a],n.push('\n        <optgroup data-category="'),n.push(i(s)),n.push('">\n          '),m=this.boardCategories[s];for(f=0,h=m.length;f<h;f++)e=m[f],n.push('\n            <option data-category="'),n.push(i(s)),n.push('" value="'),n.push(i(e.zooniverse_id)),n.push('"'),e.zooniverse_id===this.board._id&&n.push(i(" selected")),n.push(">"),n.push(i(e.title)),n.push("</option>\n          ");n.push("\n        </optgroup>\n      ")}n.push('\n    </select>\n  </div>\n  \n  <button type="submit" name="submit" style="display: none;">Update</button>\n</form>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/edit_comment_form":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="respond hide-without-user">\n  <h4>Edit your post:</h4>\n  \n  <form class="edit-comment boxed">\n    <div class="field">\n      '),n.push(t("views/markdown")({"class":"comment"+this.comment._id,name:"comment",placeholder:"Leave a comment"})),n.push('\n    </div>\n    \n    <div class="action">\n      <button type="submit" data-discussion-id="'),n.push(i(this.discussionId)),n.push('" data-comment-id="'),n.push(i(this.comment._id)),n.push('">Update</button>\n    </div>\n  </form>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/edit_title":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<form class="edit-discussion-title boxed">\n  <div class="field">\n    <input type="text" name="title" placeholder="Title" required="required" value="'),t.push(r(this.title)),t.push('" />\n  </div>\n  <button type="submit" name="submit" style="display: none;">Update</button>\n</form>\n')}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/discussions/feature_buttons":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=t("lib/util").capitalize,n.push('\n\n<div class="feature feature-link show-for-privileged-user">\n  '),u=["global",this.board.category];for(s=0,o=u.length;s<o;s++)r=u[s],n.push("\n    "),this.featured!=null&&this.featured.scopes!=null&&f.call((a=this.featured)!=null?a.scopes:void 0,r)>=0?(n.push('\n      <button name="unfeature" data-scope="'),n.push(i(r)),n.push('" data-id="'),n.push(i(this.id)),n.push('">Featured in '),n.push(i(e(r))),n.push("</button>\n    ")):(n.push('\n      <button name="feature" data-scope="'),n.push(i(r)),n.push('" data-id="'),n.push(i(this.id)),n.push('">Feature in '),n.push(i(e(r))),n.push("</button>\n    ")),n.push("\n  ");n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/featured":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u;r=t("lib/util").getCategoryLabel,n.push("\n\n<h2>Featured "),this.category&&n.push(i(""+r(this.category)+" ")),n.push('discussions</h2>\n<div class="featured">\n  ');if(this.featured.length===0)n.push('\n    <div class="none">No featured discussions</div>\n  ');else{n.push("\n    "),u=this.featured;for(s=0,o=u.length;s<o;s++)e=u[s],n.push("\n      "),n.push(t("views/discussions/summary")({discussion:e,followable:!1})),n.push("\n    ");n.push("\n  ")}n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,i,s;n.push('<div class="discussion-summaries">\n  '),s=this.discussions;for(r=0,i=s.length;r<i;r++)e=s[r],n.push("\n    "),n.push(t("views/discussions/summary")({discussion:e,followable:!0})),n.push("\n  ");n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/mergable_list":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s;t.push('<select class="discussion chzn-single chzn-default" data-placeholder="Choose a discussion" required="required">\n  '),s=this.boardDiscussions;for(n=0,i=s.length;n<i;n++)e=s[n],t.push('\n    <option value="'),t.push(r(e.zooniverse_id)),t.push('"'),e.zooniverse_id===this.zooniverse_id&&t.push(r(" selected")),t.push(">"),t.push(r(e.title)),t.push("</option>\n  ");t.push("\n</select>\n")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/discussions/merge":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d,v,m;p=t("lib/util"),r=p.capitalize,o=p.getCategoryLabel,n.push('\n\n<form class="merge-discussion boxed">\n  <label>Merge this discussion into: </label>\n  <div class="field">\n    <select class="category" required="required">\n      '),d=["help","science","chat"];for(u=0,l=d.length;u<l;u++)s=d[u],n.push('\n        <option value="'),n.push(i(s)),n.push('"'),s===this.board.category&&n.push(i(" selected")),n.push(">"),n.push(i(r(o(s)))),n.push("</option>\n      ");n.push('\n    </select>\n  </div>\n  \n  <div class="field">\n    <select class="sub-board" required="required" data-category="'),n.push(i(this.board.category)),n.push('">\n      '),v=["help","science","chat"];for(a=0,c=v.length;a<c;a++){s=v[a],n.push('\n        <optgroup data-category="'),n.push(i(s)),n.push('">\n          '),m=this.boardCategories[s];for(f=0,h=m.length;f<h;f++)e=m[f],n.push('\n            <option data-category="'),n.push(i(s)),n.push('" value="'),n.push(i(e.zooniverse_id)),n.push('"'),e.zooniverse_id===this.board._id&&n.push(i(" selected")),n.push(">"),n.push(i(e.title)),n.push("</option>\n          ");n.push("\n        </optgroup>\n      ")}n.push('\n    </select>\n  </div>\n  \n  <div class="field">\n    '),n.push(t("views/discussions/mergable_list")(this)),n.push('\n  </div>\n  \n  <button type="submit" name="submit" style="display: none;">Update</button>\n</form>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/new":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s;s=t("lib/util"),r=s.titleize,e=s.getCategoryLabel,n.push('\n\n<div class="new-discussion columns">\n  <div class="one-third column">\n    '),n.push(t("views/"+this.focusType+"/discussion_focus")(this.focus)),n.push('\n  </div>\n\n  <div class="two-thirds column">\n    <div class="discussion">\n      <h1>Start a new '),n.push(i(r(e(this.category)))),n.push(" Discussion</h1>\n      "),n.push(t("views/discussions/new_form")(this)),n.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/new_form":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u;r=t("lib/util").getCategoryLabel,n.push('\n\n<h4 class="hide-without-user">Begin a new discussion:</h4>\n\n<form class="new-discussion boxed">\n  '),this.category&&(n.push('\n    <input type="hidden" name="category" value="'),n.push(i(this.category)),n.push('" />\n  ')),n.push("\n\n  ");if(this.category&&this.boards&&this.focusType!=="subjects"){n.push('\n    <div class="field">\n      <label for="board_id">\n        <span class="label">Board</span>\n        <span class="input">\n          <select name="board_id" required="required">\n            <option value="">Choose a '),n.push(i(r(this.category))),n.push(" board for this discussion</option>\n            "),u=this.boards[this.category];for(s=0,o=u.length;s<o;s++)e=u[s],n.push('\n              <option value="'),n.push(i(e.zooniverse_id)),n.push('">'),n.push(i(e.title)),n.push("</option>\n            ");n.push("\n          </select>\n        </span>\n      </label>\n    </div>\n  ")}else this.zooniverse_id&&(n.push('\n    <input type="hidden" name="board_id" value="'),n.push(i(this.zooniverse_id)),n.push('">\n  '));n.push('\n\n  <div class="field">\n    <input type="text" name="title" placeholder="Title" required="required" />\n  </div>\n\n  <div class="field">\n    '),n.push(t("views/markdown")({name:"comment",placeholder:"Comment","class":"discussion-comment"})),n.push('\n  </div>\n\n  <div class="action">\n    <button type="submit" name="submit">Create new discussion</button>\n  </div>\n</form>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/response":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="response-post" data-comment-id="'),n.push(i(this.comment._id)),n.push('">\n  '),n.push(t("views/discussions/comment")({comment:this.comment.response_to})),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/show":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s;e=t("zooniverse/lib/models/user").current,n.push("\n"),s=t("views/user_link"),n.push("\n"),r=t("moment/moment"),n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    '),this.focusType==="boards"?(n.push("\n      "),n.push(t("views/discussions/featured")({featured:this.featured})),n.push("\n      <hr />\n      "),n.push(t("views/hashtags/list")({tags:this.tags})),n.push('\n      <hr />\n      <div class="active-users"></div>\n    ')):(n.push("\n      "),n.push(t("views/"+this.focusType+"/discussion_focus")(this.focus)),n.push("\n    ")),n.push('\n  </div>\n\n  <div class="two-thirds column">\n    <div class="discussion-show">\n      <div class="discussion">\n        <div class="actions">\n          '),((e!=null?e.isPrivileged:void 0)||(e!=null?e.id:void 0)===this.user_id&&!this.locked)&&n.push('\n            <a class="edit action">Edit</a>\n            <a class="update action">Update</a>\n            <a class="cancel-update action">Cancel</a>\n          '),n.push("\n          "),this.locked?n.push('\n            <a class="unlock action show-for-privileged-user">Unlock</a>\n          '):n.push('\n            <a class="lock action show-for-privileged-user">Lock</a>\n          '),n.push('\n          \n          <a class="merge action show-for-privileged-user">Merge</a>\n          <a class="update-merge action show-for-privileged-user">Update</a>\n          <a class="cancel-merge action show-for-privileged-user">Cancel</a>\n          <a class="destroy action show-for-privileged-user">Remove</a>\n        </div>\n        \n        <h3 class="board-categories">'),n.push(t("views/discussions/board_categories")(this)),n.push('</h3>\n\n        <div class="discussion-topic">\n          '),n.push(t("views/follow_button")({id:this.zooniverse_id,type:"discussions",follower_ids:this.follower_ids})),n.push("\n          "),n.push(t("views/discussions/feature_buttons")({id:this.zooniverse_id,featured:this.featured_status||this.featured,board:this.board})),n.push('\n          \n          <div class="post">\n            <header>\n              <div class="title">'),n.push(i(this.title)),n.push("</div>\n              Started\n              "),n.push(t("views/timestamp")({timestamp:this.created_at})),n.push("\n              "),n.push(s({link:this})),n.push("\n            </header>\n          </div>\n          \n          "),n.push(t("views/discussions/comments")(this)),n.push('\n          \n          <div class="new-post'),this.locked&&n.push(i(" locked")),n.push('">\n            '),n.push(t("views/discussions/comment_form")(this)),n.push('\n            <div class="lock">\n              <p>This discussion has been locked by a moderator.</p>\n              <p>Comments may not be added, updated, or removed.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/discussions/summary":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h;l=t("views/user_link"),n.push("\n"),c=t("lib/util"),s=c.focusCollectionFor,e=c.capitalize,f=c.singularize,a=c.pluralize,o=c.formatNumber,n.push("\n"),u=t("moment/moment"),n.push('\n\n<div class="'),this.discussion.featured&&n.push("pinned"),n.push(' discussion-summary">\n  <div class="category">\n    '),((h=this.discussion.board)!=null?h.category:void 0)?(n.push("\n      "),n.push(i(e(this.discussion.board.category))),n.push("\n    ")):typeof this.discussion.board=="string"&&(n.push("\n      "),n.push(i(e(this.discussion.board))),n.push("\n    ")),n.push('\n  </div>\n  \n  <div class="info">\n    <div class="title">\n      '),r="",n.push("\n      "),typeof this.discussion.board=="object"?(n.push("\n        "),r="#/boards/"+this.discussion.board._id+"/discussions/"+this.discussion.zooniverse_id,n.push('\n        <a href="'),n.push(i(r)),n.push('">'),n.push(i(this.discussion.title||"Untitled discussion")),n.push("</a>\n      ")):typeof this.discussion.board=="string"?(n.push("\n        "),r="#/boards/"+this.discussion.board_id+"/discussions/"+this.discussion.zooniverse_id,n.push('\n        <a href="'),n.push(i(r)),n.push('">'),n.push(i(this.discussion.title||"Untitled discussion")),n.push("</a>\n      ")):this.discussion.focus&&(n.push("\n        "),r="#/"+s(this.discussion.focus.type)+"/"+this.discussion.focus._id,n.push('\n        <a href="'),n.push(i(r)),n.push('">'),n.push(i(this.discussion.focus.name||"Discussion for @discussion.focus._id")),n.push("</a>\n      ")),n.push('\n    </div>\n    \n    <div class="board-info">\n      '),typeof this.discussion.board=="object"?(n.push("\n        Posted in "),n.push(i(this.discussion.board.name)),n.push("\n      ")):typeof this.discussion.board=="string"?(n.push("\n        Posted in "),n.push(i(this.discussion.board)),n.push("\n      ")):this.discussion.focus&&(n.push("\n        "),n.push(i(f(e(s(this.discussion.focus.type))))),n.push("\n      ")),n.push("\n\n      "),this.discussion.comment!=null&&(n.push("\n        "),n.push(i(u(this.discussion.comment.created_at).fromNow())),n.push("\n      ")),n.push('\n    </div>\n  </div>\n  \n  <div class="stats">\n    <div class="counts">\n      <span class="posts">'),n.push(i(o(this.discussion.comments))),n.push("</span> "),n.push(i(a(this.discussion.comments,"post","posts"))),n.push(' /\n      <span class="users">'),n.push(i(o(this.discussion.users))),n.push("</span> "),n.push(i(a(this.discussion.comments,"participant","participants"))),n.push('\n    </div>\n    \n    <div class="last">\n      '),this.discussion.last_comment?(n.push('\n        <a href="'),n.push(i(""+r+"?page="+Math.ceil(this.discussion.comments/10)+"&comment_id="+this.discussion.last_comment._id)),n.push('">Last post</a>\n        <span class="last-modified">\n          '),n.push(t("views/timestamp")({timestamp:this.discussion.last_updated})),n.push("\n          "),n.push(l({link:this.discussion.last_comment})),n.push("\n        </span>\n      ")):n.push('\n        <span class="last-modified"><em>No posts yet</em></span>\n      '),n.push("\n    </div>\n  </div>\n  \n  "),this.followable&&n.push(t("views/follow_button")({id:this.discussion.zooniverse_id,type:"discussions",follower_ids:this.discussion.follower_ids})),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/focus/comment":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,i,s;s=t("views/user_link"),n.push("\n"),i=t("moment/moment"),n.push("\n"),r=t("lib/mentions"),n.push("\n"),e=t("lib/markdown"),n.push('\n\n<div class="comment">\n  <div class="content">'),n.push(r(e.convert(this.comment.body))),n.push("</div>\n  <footer>\n    "),n.push(s({link:this.comment})),n.push('\n    <span class="right">\n      '),n.push(t("views/timestamp")({timestamp:this.comment.created_at})),n.push("\n    </span>\n    "),this.fromBoard||n.push(t("views/moderation/comment")({discussionId:this.discussionId,comment:this.comment})),n.push("\n  </footer>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/focus/comment_form":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<div class="create-comment">\n  <header>Say something, or mark with a #hashtag</header>\n  \n  <form class="comment-form">\n    <div class="field">\n      <textarea name="comment" required="required"></textarea>\n    </div>\n\n    <div class="action">\n      <span class="characters"><span class="count">140</span> characters</span>\n      <button type="submit">Comment</button>\n    </div>\n  </form>\n</div>\n')}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/focus/comments":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,i,s;n.push('<div class="focus-comments">\n  '),s=this.comments;for(r=0,i=s.length;r<i;r++)e=s[r],n.push("\n    "),n.push(t("views/focus/comment")({discussionId:this.discussionId,comment:e,fromBoard:this.fromBoard})),n.push("\n  ");n.push("\n</div>\n\n"),!this.fromBoard&&this.count&&this.count>10&&n.push('\n  <div class="load-more">\n    <button name="load-more" class="load-more-comments">Load more</button>\n  </div>\n'),n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/focus/discussion_list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o;n.push("<h3>"),n.push(i(this.name)),n.push('</h3>\n\n<ul class="previews">\n  '),o=this.list;for(r=0,s=o.length;r<s;r++)e=o[r],n.push("\n    <li>\n      "),n.push(t("views/discussions/summary")({discussion:e,followable:!0})),n.push("\n    </li>\n  ");n.push("\n  \n  "),this.category&&(n.push('\n    <li>\n      <div class="new-discussion">\n        Want to start a new '),n.push(i(this.category)),n.push(' discussion?\n        <button data-category="'),n.push(i(this.category)),n.push('">Create a New Post</button>\n      </div>\n    </li>\n  ')),n.push("\n</ul>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/focus/discussions":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d;h=t("lib/util"),u=h.titleize,o=h.getCategoryLabel,n.push("\n\n"),p=this.boards;for(e in p){s=p[e],n.push("\n  <h3>"),n.push(i(u(o(e)))),n.push('</h3>\n\n  <div class="discussion-summaries">\n    ');for(a=0,l=s.length;a<l;a++)r=s[a],n.push("\n      "),n.push(t("views/discussions/summary")({discussion:r,followable:!0})),n.push("\n    ");n.push('\n    \n    <div class="new-discussion">\n      Want to start a new '),n.push(i(o(e))),n.push(' discussion?\n      <button data-category="'),n.push(i(e)),n.push('">Create a New Post</button>\n    </div>\n  </div>\n')}n.push("\n\n");if(this.mentions.length>0){n.push("\n  <h3>Discussions Mentioning This</h3>\n\n  "),d=this.mentions;for(f=0,c=d.length;f<c;f++)r=d[f],n.push("\n    "),n.push(t("views/discussions/summary")({discussion:r,followable:!0})),n.push("\n  ");n.push("\n")}n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/focus/edit_comment_form":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;t.push('<div class="edit-comment">\n  <header>Edit your comment</header>\n  \n  <form class="comment-form">\n    <div class="field">\n      <textarea name="comment" required="required">'),t.push(r(this.comment.body)),t.push('</textarea>\n    </div>\n    \n    <div class="action">\n      <span class="characters"><span class="count">'),t.push(r(140-(((e=this.comment.body)!=null?e.length:void 0)||0))),t.push('</span> characters</span>\n      <button type="submit" data-discussion-id="'),t.push(r(this.discussionId)),t.push('" data-comment-id="'),t.push(r(this.comment._id)),t.push('">Update</button>\n    </div>\n  </form>\n</div>\n')}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/follow_button":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=t("zooniverse/lib/models/user").current,n.push("\n\n"),e&&(n.push('\n  <div class="follow follow-link">\n    '),this.followed||this.follower_ids!=null&&(r=e.id,s.call(this.follower_ids,r)>=0)?(n.push('\n      <button name="unfollow" data-type="'),n.push(i(this.type)),n.push('" data-id="'),n.push(i(this.id)),n.push('">Followed</button>\n    ')):(n.push('\n      <button name="follow" data-type="'),n.push(i(this.type)),n.push('" data-id="'),n.push(i(this.id)),n.push('">Follow</button>\n    ')),n.push("\n  </div>\n")),n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/following/index":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r;e=t("lib/util").capitalize,n.push("\n"),r=t("lib/config").grouped,n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/discussions/featured")({featured:this.featured})),n.push("\n    <hr />\n    "),n.push(t("views/hashtags/list")({tags:this.tags})),n.push('\n    <hr />\n    <div class="active-users"></div>\n  </div>\n  \n  <div class="two-thirds column">\n    '),r&&(n.push("\n      <section>\n        <h2>Followed "),n.push(i(t("controllers/group_viewer").groupName())),n.push('s</h2>\n        <div class="groups">\n          <div class="list">\n            '),n.push(t("views/groups/list")({groups:this.groups})),n.push('\n          </div>\n        </div>\n        \n        <div class="load-more">\n          <button name="load-more" data-type="groups">Load more</button>\n        </div>\n      </section>\n      \n      <hr />\n    ')),n.push('\n    <section>\n      <h3>Followed Objects</h3>\n      <div class="subjects">\n        <div class="list">\n          '),n.push(t("views/subjects/list")({subjects:this.subjects})),n.push('\n        </div>\n        \n        <div class="load-more">\n          <button name="load-more" data-type="subjects">Load more</button>\n        </div>\n      </div>\n    </section>\n    \n    <hr />\n    \n    <section>\n      <h3>Followed Discussions</h3>\n      <div class="discussions">\n        <div class="list">\n          '),n.push(t("views/discussions/list")({discussions:this.discussions})),n.push('\n        </div>\n        \n        <div class="load-more">\n          <button name="load-more" data-type="discussions">Load more</button>\n        </div>\n      </div>\n    </section>\n    \n    <hr />\n\n    <section>\n      <h3>Followed Collections</h3>\n      <div class="collections">\n        <div class="list">\n          '),n.push(t("views/collections/list")({collections:this.collections,updatedStats:!0})),n.push('\n        </div>\n        \n        <div class="load-more">\n          <button name="load-more" data-type="collections">Load more</button>\n        </div>\n      </div>\n    </section>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/groups/discussion_focus":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("views/user_link"),n.push('\n\n<div class="collection discussion-focus">\n  <h3>\n    <a href="#/groups/'),n.push(i(this._id||this.zooniverse_id)),n.push('">'),n.push(i(this.name)),n.push('</a>\n  </h3>\n  \n  <div class="subjects">\n    <div class="list">\n      '),n.push(t("views/collections/subjects_for_discussion")({subjects:this.subjects.slice(0,2)})),n.push("\n    </div>\n    "),this.subjectPages>1&&n.push('<div class="page-wrapper"><div class="pages"></div></div>'),n.push("\n  </div>\n  \n  "),n.push(t("views/focus/comments")({discussionId:this.discussion.zooniverse_id,comments:this.discussion.comments,fromBoard:!0})),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/groups/list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d,v,m;o=t("lib/util").pluralize,n.push("\n"),l=t("views/user_link"),n.push("\n"),s=t("moment/moment"),n.push("\n"),r=t("controllers/group_viewer"),n.push("\n"),a=t("controllers/subject_viewer"),n.push("\n\n"),v=this.groups;for(c=0,p=v.length;c<p;c++){e=v[c],n.push('\n  <div class="group">\n    <div class="title">\n      <a href="#/groups/'),n.push(i(e.zooniverse_id)),n.push('">'),n.push(i(r.groupTitle(e))),n.push('</a>\n    </div>\n    \n    <a href="#/groups/'),n.push(i(e.zooniverse_id)),n.push('">\n      <div class="subjects">\n        '),f=e.subjects||[],n.push("\n        ");for(h=0,d=f.length;h<d;h++)u=f[h],n.push('\n          <div class="subject">\n            <img src="'),n.push(i(a.imageIn(u!=null?u.location:void 0))),n.push('" class="thin-frame" />\n          </div>\n        ');n.push('\n      </div>\n    </a>\n    \n    <div class="comment">\n      <div class="content">\n        '),n.push(((m=e.last_comment)!=null?m.body:void 0)||"<em>No comments yet</em>"),n.push("\n      </div>\n      \n      "),e.last_comment!=null?(n.push('\n        <div class="author">\n          '),n.push(l({link:e.last_comment,avatar:!0})),n.push("\n          "),n.push(t("views/timestamp")({timestamp:e.last_comment.created_at})),n.push("\n        </div>\n      ")):n.push('\n        <div class="no-author"></div>\n      '),n.push("\n    </div>\n  </div>\n")}n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/groups/show":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o;r=t("zooniverse/lib/models/user"),n.push("\n"),s=t("views/user_link"),n.push("\n"),e=t("controllers/group_viewer"),n.push("\n\n<header>\n  <h2>\n    "),n.push(i(e.groupTitle(this))),n.push('\n    \n    <span class="aux">\n      '),n.push(t("views/follow_button")({id:this.zooniverse_id,type:"groups",follower_ids:this.follower_ids})),n.push("\n      "),this.subjects[1]&&n.push(t("views/share_button")({image:t("controllers/subject_viewer").imageIn((o=this.subjects[1][0])!=null?o.location:void 0),pinterest:!1})),n.push('\n    </span>\n  </h2>\n</header>\n\n<div class="subjects">\n  <div class="group-viewer">\n    <!--Replace with GroupViewer instance-->\n  </div>\n</div>\n\n<div class="focus">\n  '),n.push(t("views/focus/comment_form")()),n.push("\n  "),n.push(t("views/focus/comments")({discussionId:this.discussion.zooniverse_id,comments:this.discussion.comments,count:this.discussion.comments_count})),n.push('\n</div>\n\n<div class="description">\n  <h3>Description</h3>\n  <p>'),n.push(e.description(this)),n.push('</p>\n</div>\n\n<div class="hashtags">\n  <h3>Hashtags</h3>\n  '),n.push(t("views/hashtags/list")({tags:this.tags})),n.push('\n</div>\n\n<div class="discussions">\n  '),n.push(t("views/focus/discussions")({boards:this.board_discussions,mentions:this.mentions})),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/hashtags/list":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s;n=this.tags.map(function(e){return e._id}),t.push("\n\n<h2>Popular hashtags</h2>\n");if(n.length===0)t.push('\n  <div class="none">No hashtags</div>\n');else{t.push('\n  <ul class="hashtag-links">\n    ');for(i=0,s=n.length;i<s;i++)e=n[i],t.push('\n      <li><a href="#/search?tags['),t.push(r(e)),t.push(']=true">'),t.push(r(e)),t.push("</a></li>\n    ");t.push("\n  </ul>\n")}t.push("\n")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/markdown":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="wmd-panel markdown'),n.push(i(this["class"])),n.push('">\n  <div id="wmd-button-bar'),n.push(i(this["class"])),n.push('"></div>\n    <textarea class="wmd-input '),n.push(i(this["class"])),n.push('" id="wmd-input'),n.push(i(this["class"])),n.push('" name="'),n.push(i(this.name)),n.push('" placeholder= "'),n.push(i(this.placeholder)),n.push('" required="required"></textarea>\n    <a class="toggle-preview">Show Preview</a>\n  </div>\n<div id="wmd-preview'),n.push(i(this["class"])),n.push('" class="wmd-panel wmd-preview" style="display: none;"></div>\n\n'),t("lib/markdown").runEditor(this["class"]),n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/messages/list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c;l=t("zooniverse/lib/models/user").current,n.push("\n"),f=t("models/roles").roles[l.name],n.push("\n"),u=t("moment/moment"),n.push('\n\n<h2>\n  Messages\n  <span class="aux">\n    '),this.viewedUser?(n.push('\n      <a class="compose button" href="#/messages/'),n.push(i(this.viewedUser)),n.push('/new">Send '),n.push(i(this.viewedUser)),n.push(" a Message</a>\n    ")):n.push('\n      <a class="compose button" href="#/messages/new">Compose Message</a>\n    '),n.push('\n  </span>\n</h2>\n\n<div class="list">\n  '),c=this.conversations;for(s in c)e=c[s],n.push("\n    "),a=[e.user_to,e.user_from].filter(function(e){var t;return t=e.id,t!==l.id})[0],n.push("\n    "),e.user_to.id===e.user_from.id&&(a=e.user_to),n.push("\n    "),o=e.messages[e.messages.length-1],n.push("\n    "),r=o.user.id===a.id?"from":"to",n.push('\n    \n    <div class="'),e.isUnread(l)&&n.push(i("unread ")),n.push('message" data-project-name="'),n.push(i(e.project_name)),n.push('">\n      <div class="title">\n        <a href="#/messages/'),n.push(i(s)),n.push('">'),n.push(i(e.isTitleBlank()?"(no title)":e.title)),n.push('</a>\n      </div>\n      \n      <div class="body">'),n.push(i(o.body)),n.push('</div>\n      \n      <footer>\n        <div class="last-message">\n          Last message\n          '),n.push(t("views/timestamp")({timestamp:o.created_at})),n.push("\n          "),n.push(i(r)),n.push("\n          "),n.push(t("views/messages/user_link")({message:{user:a}})),n.push("\n        </div>\n      </footer>\n    </div>\n  ");n.push("\n</ul>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/messages/new":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,i;e=t("zooniverse/lib/models/user").current,n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/users/mini_profile")({user:e})),n.push('\n    <div class="message-list"></div>\n  </div>\n  \n  <div class="two-thirds column">\n    <h3>'),n.push(((r=this.data)!=null?r.id:void 0)?"Send a message to "+this.data.id:"Create a new message"),n.push('</h3>\n    <form class="new-message boxed">\n      '),((i=this.data)!=null?i.id:void 0)?(n.push('\n        <div class="field"><input type="text" required="required" disabled="disabled" name="user_name" class="user-search" value="'),n.push(this.data.id),n.push('"></div>\n      ')):n.push('\n        <div class="field"><input type="text" required="required" name="user_name" class="user-search" placeholder="Search for a user"></div>\n      '),n.push('\n      <div class="field"><input type="text" required="required" name="message[title]" placeholder="Title" /></div>\n      \n      <div class="field">\n        '),n.push(t("views/markdown")({"class":"new-message",name:"message[body]",placeholder:"Write your message here"})),n.push('\n      </div>\n      \n      <div class="action">\n        <button type="submit" name="submit">Send Message</button>\n      </div>\n    </form>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/messages/show":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f;o=t("zooniverse/lib/models/user").current,n.push("\n"),s=t("models/roles").roles[o.name],n.push("\n"),r=t("moment/moment"),n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/users/mini_profile")({user:o})),n.push('\n    <div class="message-list"></div>\n  </div>\n  \n  <div class="two-thirds column">\n    <ul class="posts">\n      '),f=this.messages;for(u=0,a=f.length;u<a;u++)e=f[u],n.push('\n        <li>\n          <div class="post'),s&&n.push(i(" "+s.sort().join(" "))),n.push('" data-project-name="'),n.push(i(e.project_name)),n.push('">\n            <header>\n              '),n.push(t("views/messages/user_link")({message:e})),n.push('\n            </header>\n            \n            <div class="content">\n              '),n.push(t("lib/markdown").convert(e.body)),n.push('\n            </div>\n            \n            <footer>\n              <span class="float-left"><a class="delete-message">Delete this message</a></span>\n              '),n.push(t("views/timestamp")({timestamp:e.created_at})),n.push("\n            </footer>\n          </div>\n        </li>\n      ");n.push('\n    </ul>\n    \n    <h4>Create a new message</h4>\n    <form class="new-message boxed">\n      <div class="field">\n        '),n.push(t("views/markdown")({"class":"reply-message",name:"message[body]",placeholder:"Write your message here"})),n.push('\n      </div>\n      \n      <div class="action">\n        <button type="submit" name="submit">Send Message</button>\n      </div>\n    </form>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/messages/user_link":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s;r=t("zooniverse/lib/models/user").current,n.push("\n"),e=t("models/roles").roles,n.push('\n\n<a href="#/users/'),n.push(i(this.message.user.name)),n.push('" class="user">\n  '),this.message.user.zooniverse_id?(n.push('\n    <img src="//zooniverse-avatars.s3.amazonaws.com/ouroboros/'),n.push(i(this.message.user.zooniverse_id)),n.push('" class="avatar" onerror="window.defaultAvatar(this)" />\n  ')):(n.push("\n    "),n.push(t("views/users/default_avatar")()),n.push("\n  ")),n.push("\n  \n  "),n.push(i(this.message.user.name)),n.push("\n  "),s=e[this.message.user.name],n.push("\n  "),s&&(n.push('\n    <span class="'),n.push(i(s.sort().join(" "))),n.push(' role">'),n.push(i(s.sort().join(", "))),n.push("</span>\n  ")),n.push("\n</a>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/moderation/comment":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("zooniverse/lib/models/user").current,n.push('\n\n<div class="comment-moderation hide-without-user">\n  '),(e!=null?e.id:void 0)===this.comment.user_id?(n.push('\n    <a class="edit-comment" data-comment-id="'),n.push(i(this.comment._id)),n.push('" data-discussion-id="'),n.push(i(this.discussionId)),n.push('">Edit</a>\n    <a class="remove-own-comment" data-comment-id="'),n.push(i(this.comment._id)),n.push('" data-discussion-id="'),n.push(i(this.discussionId)),n.push('">Remove</a>\n  ')):(e!=null?e.admin:void 0)||(e!=null?e.moderator:void 0)?(n.push('\n    <a class="remove-comment show-for-privileged-user" data-comment-id="'),n.push(i(this.comment._id)),n.push('" data-discussion-id="'),n.push(i(this.discussionId)),n.push('">Remove</a>\n  ')):(n.push('\n    <a class="report-comment" data-comment-id="'),n.push(i(this.comment._id)),n.push('" data-discussion-id="'),n.push(i(this.discussionId)),n.push('">Report</a>\n  ')),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/moderation/comments":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c;s=t("lib/util").titleize,n.push("\n\n"),l=this.moderations;for(o=0,a=l.length;o<a;o++){r=l[o],n.push('\n  <div class="moderation-item moderated-comment lined">\n    <a href="#/users/'),n.push(i(r.target.user.name)),n.push('" class="user">'),n.push(i(r.target.user.name)),n.push('</a>\n    <div class="comment-viewer">\n      <a class="off"></a>\n      <span class="on">\n        <div class="comment">\n          '),n.push(i(r.target.comment.body.replace("<","&gt;").replace(">","&gt;"))),n.push('\n        </div>\n        <div class="discussion">\n          '),n.push(i(r.target.comment.title)),n.push("\n        </div>\n      </span>\n    </div>\n    \n    "),n.push(i(s(this.pastTenses[r.type]))),n.push(' by\n    <a href="#/users/'),n.push(i(r.user.name)),n.push('" class="user">'),n.push(i(r.user.name)),n.push("</a>\n    (<em>"),n.push(i(r.message||"no message")),n.push('</em>)\n    \n    <span class="actions">\n      '),c=this.actions;for(u=0,f=c.length;u<f;u++)e=c[u],n.push('\n        <a class="action-link" data-action="'),n.push(i(e)),n.push('" data-id="'),n.push(i(r.id)),n.push('">'),n.push(i(s(e))),n.push(" comment</a>\n      ");n.push("\n    </span>\n  </div>\n")}n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/moderation/index":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="columns">\n  <div class="one-third column">\n    <section class="reported_users">\n      <h2>Reported Users</h2>\n      <div class="list">\n        '),n.push(t("views/moderation/users")({pastTenses:this.pastTenses,moderations:this.reported_users,actions:["ignore","watch","ban"]})),n.push('\n      </div>\n      <div class="load-more">\n        <button '),this.reported_users.length<10&&n.push(i("disabled")),n.push(' data-type="reported_users" data-kind="users" name="load-more">Load more</button>\n      </div>\n    </section>\n    \n    <section class="watched_users">\n      <h2>Watched Users</h2>\n      <div class="list">\n        '),n.push(t("views/moderation/users")({pastTenses:this.pastTenses,moderations:this.watched_users,actions:["unwatch","ban"]})),n.push('\n      </div>\n      <div class="load-more">\n        <button '),this.watched_users.length<10&&n.push(i("disabled")),n.push(' data-type="watched_users" data-kind="users" name="load-more">Load more</button>\n      </div>\n    </section>\n    \n    <section class="banned_users">\n      <h2>Banned Users</h2>\n      <div class="list">\n        '),n.push(t("views/moderation/users")({pastTenses:this.pastTenses,moderations:this.banned_users,actions:["redeem"]})),n.push('\n      </div>\n      <div class="load-more">\n        <button '),this.banned_users.length<10&&n.push(i("disabled")),n.push(' data-type="banned_users" data-kind="users" name="load-more">Load more</button>\n      </div>\n    </section>\n  </div>\n  \n  <div class="two-thirds column">\n    <section class="reported_comments">\n      <h3>Reported Comments</h3>\n      <div class="list">\n        '),n.push(t("views/moderation/comments")({pastTenses:this.pastTenses,moderations:this.reported_comments,actions:["ignore","delete"]})),n.push('\n      </div>\n      <div class="load-more">\n        <button '),this.reported_comments.length<10&&n.push(i("disabled")),n.push(' data-type="reported_comments" data-kind="comments" name="load-more">Load more</button>\n      </div>\n    </section>\n    \n    <section class="log">\n      <h3>Moderation Log</h3>\n      <div class="list">\n        '),n.push(t("views/moderation/log")({pastTenses:this.pastTenses,moderations:this.log})),n.push('\n      </div>\n      <div class="load-more">\n        <button '),this.log.length<10&&n.push(i("disabled")),n.push(' data-type="log" data-kind="log" name="load-more">Load more</button>\n      </div>\n    </section>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/moderation/log":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a;s=t("lib/util").titleize,n.push("\n"),r=t("moment/moment"),n.push("\n\n"),a=this.moderations;for(o=0,u=a.length;o<u;o++)e=a[o],n.push('\n  <div class="moderation-item moderated-log lined">\n    '),e.target.type==="comment"&&(n.push('\n      <div class="comment-viewer">\n        <a class="off"></a>\n        <span class="on">\n          <div class="comment">\n            '),n.push(i(e.target.comment.body.replace("<","&gt;").replace(">","&gt;"))),n.push("\n          </div>\n        </span>\n      </div>\n    ")),n.push("\n    \n    "),e.target.type==="comment"?(n.push("\n      in "),n.push(i(e.target.comment.title)),n.push("\n      by\n    ")):n.push("\n      User\n    "),n.push('\n    <a href="#/users/'),n.push(i(e.target.user.name)),n.push('" class="user">'),n.push(i(e.target.user.name)),n.push("</a>\n    <br />\n    "),n.push(i(s(this.pastTenses[e.type]))),n.push(' by\n    <a href="#/users/'),n.push(i(e.user.name)),n.push('" class="user">'),n.push(i(e.user.name)),n.push("</a>\n    (<em>"),n.push(i(e.message||"no message")),n.push("</em>)\n    \n    <br />\n    <strong>"),n.push(i(s(this.pastTenses[e.action.label]))),n.push('</strong> by\n    <a href="#/users/'),n.push(i(e.action.user.name)),n.push('" class="user">'),n.push(i(e.action.user.name)),n.push("</a>\n    (<em>"),n.push(i(e.action.comment||"no comment")),n.push("</em>)\n    \n    "),n.push(t("views/timestamp")({timestamp:e.actioned_at})),n.push("\n  </div>\n");n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/moderation/user":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("zooniverse/lib/models/user").current,n.push('\n\n<div class="user-moderation hide-without-user">\n  '),((e!=null?e.admin:void 0)||(e!=null?e.moderator:void 0))&&e.name!==this.user.name&&(n.push('\n    <div class="show-for-privileged-user">\n      '),this.user.state==="banned"?(n.push('\n        <a class="redeem-user" data-user-name="'),n.push(i(this.user.name)),n.push('">Redeem User</a>\n      ')):(n.push('\n        <a class="ban-user" data-user-name="'),n.push(i(this.user.name)),n.push('">Ban User</a>\n      ')),n.push("\n    </div>\n  ")),n.push("\n  "),e&&(e!=null?e.name:void 0)!==this.user.name&&(n.push('\n    <a class="report-user" data-user-name="'),n.push(i(this.user.name)),n.push('">Report User</a>\n  ')),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/moderation/users":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c;s=t("lib/util").titleize,n.push("\n\n"),l=this.moderations;for(o=0,a=l.length;o<a;o++){r=l[o],n.push('\n  <div class="moderation-item moderated-user unlined">\n    <a href="#/users/'),n.push(i(r.target.user.name)),n.push('" class="user">'),n.push(i(r.target.user.name)),n.push("</a>\n    "),n.push(i(s(this.pastTenses[r.type]))),n.push(' by\n    <a href="#/users/'),n.push(i(r.user.name)),n.push('" class="user">'),n.push(i(r.user.name)),n.push('</a>\n    <em class="moderation-message">('),n.push(i(r.message||"no message")),n.push(')</em>\n    \n    <span class="actions">\n      '),c=this.actions;for(u=0,f=c.length;u<f;u++)e=c[u],n.push('\n        <a class="action-link" data-user-name="'),n.push(i(r.target.user.name)),n.push('" data-action="'),n.push(i(e)),n.push('" data-id="'),n.push(i(r.id)),n.push('">'),n.push(i(s(e))),n.push("</a>\n      ");n.push("\n    </span>\n  </div>\n")}n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/recents/collections":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d;f=t("views/user_link"),n.push("\n"),s=t("moment/moment"),n.push("\n\n"),d=this.collections;for(o in d){r=d[o],n.push("\n  ");for(l=0,h=r.length;l<h;l++){e=r[l],n.push('\n    <div class="collection" data-link="#/collections/'),n.push(i(e.focus._id)),n.push('">\n      <div class="title">\n        <a>'),n.push(i(e.focus.name||"Untitled Collection")),n.push('</a>\n      </div>\n      \n      <div class="subjects">\n        '),a=e.focus.subjects||[],n.push("\n        ");for(c=0,p=a.length;c<p;c++)u=a[c],n.push('\n          <div class="subject">\n            <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(u!=null?u.location:void 0))),n.push('" class="thin-frame" />\n          </div>\n        ');n.push('\n      </div>\n      \n      <div class="comment">\n        <div class="content">\n          '),n.push(e.comment.body.replace("<","&gt;").replace(">","&gt;")||"&nbsp;"),n.push('\n        </div>\n        \n        <div class="author">\n          '),n.push(f({link:e.comment,avatar:!0})),n.push("\n          "),n.push(t("views/timestamp")({timestamp:e.comment.created_at})),n.push("\n        </div>\n      </div>\n    </div>\n  ")}n.push("\n")}n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/recents/discussions":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d,v,m,g,y;d=t("views/user_link"),n.push("\n"),g=t("lib/util"),u=g.focusCollectionFor,e=g.capitalize,h=g.singularize,c=g.pluralize,a=g.formatNumber,p=g.truncate,n.push("\n"),f=t("moment/moment"),n.push('\n\n<div class="discussion-summaries">\n  '),y=this.discussions;for(l in y){o=y[l],n.push("\n    ");for(v=0,m=o.length;v<m;v++)r=o[v],n.push("\n      "),s="",n.push("\n      "),r.board?(n.push("\n        "),s="/boards/"+r.board._id+"/discussions/"+r.zooniverse_id,n.push("\n      ")):r.focus&&(n.push("\n        "),s="/"+u(r.focus.type)+"/"+r.focus._id,n.push("\n      ")),n.push("\n      \n      "),s=""+s+"?page="+Math.ceil(r.comments/10)+"&comment_id="+r.comment._id,n.push('\n      \n      <div class="discussion-summary" data-link="'),n.push(i(s)),n.push('">\n        <div class="category">\n          '),n.push(i(e(r.board.category))),n.push('\n        </div>\n        \n        <div class="info">\n          <div class="title">\n            '),r.board?(n.push("\n              <a>"),n.push(i(p(r.title||"Untitled discussion",100))),n.push("</a>\n            ")):r.focus&&(n.push("\n              <a>"),n.push(i(p(r.title||"Discussion for "+r.focus._id,100))),n.push("</a>\n            ")),n.push('\n          </div>\n          \n          <div class="board-info">\n            '),typeof r.board=="object"?(n.push("\n              Posted in "),n.push(i(r.board.name)),n.push("\n            ")):typeof r.board=="string"?(n.push("\n              Posted in "),n.push(i(r.board)),n.push("\n            ")):r.focus&&(n.push("\n              "),n.push(i(h(e(u(r.focus.type))))),n.push("\n            ")),n.push('\n          </div>\n          \n          <div class="comment">\n            <div class="content">\n              '),n.push(p(r.comment.body.replace("<","&gt;").replace(">","&gt;"),150)),n.push('\n            </div>\n            \n            <div class="author">\n              '),n.push(d({link:r.comment,avatar:!0})),n.push("\n              "),n.push(t("views/timestamp")({timestamp:r.comment.created_at})),n.push("\n            </div>\n          </div>\n        </div>\n      </div>\n    ");n.push("\n  ")}n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/recents/groups":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d,v;l=t("views/user_link"),n.push("\n"),s=t("moment/moment"),n.push("\n"),a=t("controllers/subject_viewer"),n.push("\n\n"),v=this.groups;for(o in v){r=v[o],n.push("\n  ");for(c=0,p=r.length;c<p;c++){e=r[c],n.push('\n    <div class="group" data-link="#/groups/'),n.push(i(e.focus._id)),n.push('">\n      <div class="title">\n        <a>'),n.push(i(e.focus.search_name||e.focus.name)),n.push('</a>\n      </div>\n      \n      <div class="subjects">\n        '),f=e.focus.subjects||[],n.push("\n        ");for(h=0,d=f.length;h<d;h++)u=f[h],n.push('\n          <div class="subject">\n            <img src="'),n.push(i(a.imageIn(u!=null?u.location:void 0))),n.push('" class="thin-frame" />\n          </div>\n        ');n.push('\n      </div>\n      \n      <div class="comment">\n        <div class="content">\n          '),n.push(e.comment.body.replace("<","&gt;").replace(">","&gt;")||"&nbsp;"),n.push('\n        </div>\n        \n        <div class="author">\n          '),n.push(l({link:e.comment,avatar:!0})),n.push("\n          "),n.push(t("views/timestamp")({timestamp:e.comment.created_at})),n.push("\n        </div>\n      </div>\n    </div>\n  ")}n.push("\n")}n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/recents/index":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c;l=t("lib/util"),u=l.titleize,r=l.getCategoryLabel,n.push("\n"),s=t("lib/config").grouped,n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/discussions/featured")({featured:this.featured})),n.push("\n    <hr />\n    "),n.push(t("views/hashtags/list")({tags:this.tags})),n.push('\n    <hr />\n    <div class="active-users"></div>\n  </div>\n  \n  <div class="two-thirds column">\n    '),s&&(n.push("\n      <section>\n        <h2>Recent "),n.push(i(t("controllers/group_viewer").groupName())),n.push(' Comments...</h2>\n        <div class="groups">\n          <div class="list">\n            '),n.push(t("views/recents/groups")({groups:this.groups})),n.push('\n          </div>\n        </div>\n        \n        <div class="load-more">\n          <button name="load-more" data-type="groups">Load more</button>\n        </div>\n      </section>\n      \n      <hr />\n    ')),n.push('\n    \n    <section>\n      <h2>Recent Object Comments...</h2>\n      <div class="subjects">\n        <div class="list">\n          '),n.push(t("views/recents/subjects")({subjects:this.subjects})),n.push('\n        </div>\n      </div>\n      \n      <div class="load-more">\n        <button name="load-more" data-type="subjects">Load more</button>\n      </div>\n    </section>\n    \n    <hr />\n    \n    <section>\n      <h2>Recent Discussions...</h2>\n      <div class="board discussions">\n        '),c=["help","science","chat"];for(o=a=0,f=c.length;a<f;o=++a)e=c[o],n.push("\n          <h3>"),n.push(i(u(r(e)))),n.push('</h3>\n          \n          <div class="'),n.push(i(e)),n.push(' list">\n            '),n.push(t("views/recents/discussions")({category:e,discussions:this.discussions[e]})),n.push('\n          </div>\n          \n          <div class="load-more">\n            <button name="load-more" data-type="discussions" data-category="'),n.push(i(e)),n.push('">Load more</button>\n          </div>\n          \n        ');n.push('\n      </div>\n    </section>\n    \n    <hr />\n    \n    <section>\n      <h2>Recent Collection Comments...</h2>\n      <div class="collections">\n        <div class="list">\n          '),n.push(t("views/recents/collections")(this)),n.push('\n        </div>\n      </div>\n      \n      <div class="load-more">\n        <button name="load-more" data-type="collections">Load more</button>\n      </div>\n    </section>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/recents/subjects":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c;u=t("lib/util").truncate,n.push("\n"),a=t("views/user_link"),n.push("\n"),s=t("moment/moment"),n.push('\n\n<div class="subject-summaries">\n  '),c=this.subjects;for(o in c){r=c[o],n.push("\n    ");for(f=0,l=r.length;f<l;f++)e=r[f],n.push('\n      <div class="subject-summary" data-link="#/subjects/'),n.push(i(e.focus._id)),n.push('">\n        '),n.push(t("views/subjects/preview")({discussion:e})),n.push('\n        <div class="summary">\n          <div class="title">\n            <a href="#/subjects/'),n.push(i(e.focus._id)),n.push('">'),n.push(i(e.focus._id)),n.push('</a>\n          </div>\n          \n          <div class="last-comment">\n            <div class="content">'),n.push(i(u(e.comment.body.replace("<","&gt;").replace(">","&gt;")||" ",140))),n.push('</div>\n            \n            <div class="author">\n              '),n.push(a({link:e.comment,avatar:!0})),n.push("\n              "),n.push(t("views/timestamp")({timestamp:e.comment.created_at})),n.push("\n            </div>\n          </div>\n        </div>\n      </div>\n    ");n.push("\n  ")}n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/search/collection_result":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a;e=t("controllers/subject_viewer").imageIn,n.push("\n"),s=t("moment/moment"),n.push('\n\n<div class="collection-result">\n  <div class="preview">\n    <a href="#/collections/'),n.push(i(this.id)),n.push('">\n      '),a=this.location;for(o=0,u=a.length;o<u;o++)r=a[o],n.push('\n        <img src="'),n.push(i(e(r))),n.push('" class="thin-frame preview" />\n      ');n.push('\n    </a>\n  </div>\n  \n  <div class="summary">\n    <div class="title">\n      Collection <a href="#/collections/'),n.push(i(this.id)),n.push('">'),n.push(i(this.name)),n.push('</a>\n    </div>\n    <div class="metadata">\n      Last updated\n      '),n.push(t("views/timestamp")({timestamp:this.updated_at})),n.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/search/discussion_result":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o;o=t("lib/util"),e=o.capitalize,s=o.titleize,n.push("\n"),r=t("moment/moment"),n.push('\n\n<div class="discussion-result">\n  <div class="summary">\n    <div class="title">\n      <span class="category">'),n.push(i(e(this.category))),n.push('</span>\n      Discussion\n      <a href="#/boards/'),n.push(i(this.board_id)),n.push("/discussions/"),n.push(i(this.id)),n.push('">'),n.push(i(this.name)),n.push('</a>\n      in\n      <a href="#/boards/'),n.push(i(this.board_id)),n.push('">'),n.push(i(s(this.board_name))),n.push('</a>\n    </div>\n    <div class="metadata">\n      Last updated\n      '),n.push(t("views/timestamp")({timestamp:this.updated_at})),n.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/search/facet":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("lib/util").titleize,n.push('\n\n<div class="facet" data-facet-type="'),n.push(i(this.term)),n.push('">\n  <input id="'),n.push(i(this.term)),n.push('-facet" type="checkbox" name="'),n.push(i(this.term)),n.push('" value="'),n.push(i(this.term)),n.push('" '),this.checked&&n.push(i("checked")),n.push('>\n  <label for="'),n.push(i(this.term)),n.push('-facet">'),n.push(i(e(this.label))),n.push('<em class="facet-count" data-count="'),n.push(i(this.count||0)),n.push('"></em></label>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/search/group_result":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a;e=t("controllers/subject_viewer").imageIn,n.push("\n"),s=t("moment/moment"),n.push('\n\n<div class="collection-result">\n  <div class="preview">\n    <a href="#/collections/'),n.push(i(this.id)),n.push('">\n      '),a=this.location;for(o=0,u=a.length;o<u;o++)r=a[o],n.push('\n        <img src="'),n.push(i(e(r))),n.push('" class="thin-frame preview" />\n      ');n.push('\n    </a>\n  </div>\n  \n  <div class="summary">\n    <div class="title">\n       <a href="#/groups/'),n.push(i(this.id)),n.push('">'),n.push(i(this.name)),n.push('</a>\n    </div>\n    <div class="metadata">\n      Last updated\n      '),n.push(t("views/timestamp")({timestamp:this.updated_at})),n.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/search/index":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o;r=t("lib/util").getCategoryLabel,n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    <form class="search">\n      <section class="text">\n        <h2>Search For</h2>\n        <input type="text" name="text" value="'),n.push(i(this.params.text)),n.push('">\n        <button type="submit">Search</button>\n      </section>\n      \n      <section class="type">\n        <h2>Type</h2>\n        '),n.push(t("views/search/facet")({term:"subject",label:"Objects",count:0,checked:this.params.kind==="subject"})),n.push("\n        "),n.push(t("views/search/facet")({term:"collection",label:"Collections",count:0,checked:this.params.kind==="collection"})),n.push("\n        "),n.push(t("views/search/facet")({term:"discussion",label:"Discussions",count:0,checked:this.params.kind==="discussion"})),n.push('\n      </section>\n      \n      <section class="category">\n        <h2>Category</h2>\n        '),n.push(t("views/search/facet")({term:"help",label:r("help"),count:0,checked:this.params.category==="help"})),n.push("\n        "),n.push(t("views/search/facet")({term:"science",label:r("science"),count:0,checked:this.params.category==="science"})),n.push("\n        "),n.push(t("views/search/facet")({term:"chat",label:r("chat"),count:0,checked:this.params.category==="chat"})),n.push('\n      </section>\n      \n      <section class="tags">\n        <h2>Tags</h2>\n        <div class="facets">\n          <div class="selected">');if(this.queryTags){o=this.queryTags;for(s in o)e=o[s],e&&n.push(t("views/search/facet")({term:s,label:s,count:0,checked:!0}))}n.push('</div>\n          <div class="available"></div>\n        </div>\n      </section>\n    </form>\n  </div>\n  \n  <div class="two-thirds column">\n    <div class="results"><h2>&nbsp;</h2></div>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/search/results":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f;a=t("lib/util"),r=a.pluralize,e=a.formatNumber,n.push("\n<h2>\n  "),this.total>10&&(n.push("\n    "),n.push(i(e((this.page-1)*this.per_page+1))),n.push(" -\n    "),n.push(i(e(Math.min(this.total,this.page*this.per_page)))),n.push(" of\n  ")),n.push("\n  "),n.push(i(e(this.total))),n.push(" "),n.push(i(r(this.total,"result","results"))),n.push("\n  "),this.total>10&&n.push('<div class="pages"></div>'),n.push("\n</h2>\n"),f=this.results;for(o=0,u=f.length;o<u;o++)s=f[o],n.push('\n  <div class="result">\n    '),n.push(t("views/search/"+s.kind+"_result")(s)),n.push("\n  </div>\n");n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/search/subject_result":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("moment/moment"),n.push('\n\n<div class="subject-result">\n  <div class="preview">\n    <a href="#/subjects/'),n.push(i(this.id)),n.push('">\n      <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(this.location))),n.push('" class="thin-frame preview" />\n    </a>\n  </div>\n  \n  <div class="summary">\n    <div class="title">\n      Object <a href="#/subjects/'),n.push(i(this.id)),n.push('">'),n.push(i(this.id)),n.push('</a>\n    </div>\n    <div class="metadata">\n      Last updated\n      '),n.push(t("views/timestamp")({timestamp:this.updated_at})),n.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/share_button":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,i,s;s=t("lib/social"),e=s.facebook,i=s.twitter,r=s.pinterest,n.push('\n\n<div class="share share-link">\n  '),this.facebook!==!1&&(n.push('\n    <a href="'),this.image&&n.push(e({href:location.href,image:this.image})),n.push('" target="_blank">\n      <img src="images/facebook.png" title="Share on Facebook"/>\n    </a>\n  ')),n.push("\n\n  "),this.twitter!==!1&&(n.push('\n    <a href="'),this.image&&n.push(i({href:location.href,image:this.image})),n.push('" target="_blank">\n      <img src="images/twitter.png" title="Share on Twitter"/>\n    </a>\n  ')),n.push("\n\n  "),this.pinterest!==!1&&(n.push('\n    <a href="'),this.image&&n.push(r({href:location.href,image:this.image})),n.push('" target="_blank">\n      <img src="images/pinterest.png" title="Share on Pinterest"/>\n    </a>\n  ')),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/subjects/discussion_focus":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="discussion-focus">\n  '),n.push(t("views/subjects/summary")(this)),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/subjects/list":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,i,s;n.push('<div class="subject-summaries">\n  '),s=this.subjects;for(r=0,i=s.length;r<i;r++)e=s[r],n.push("\n    "),n.push(t("views/subjects/summary")(e)),n.push("\n  ");n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/subjects/preview":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<div class="preview">\n  '),t.push(this.discussion.focus.name),t.push("\n</div>")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/subjects/show":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;n.push("<header>\n  <h2>\n    "),n.push(t("controllers/subject_viewer").subjectTitle(this)),n.push('\n\n    <div class="aux">\n      '),n.push(t("views/follow_button")({id:this.zooniverse_id,type:"subjects",follower_ids:this.follower_ids})),n.push("\n      "),n.push(t("views/dashboard_button")({zooId:this.zooniverse_id,type:"objects",name:this.zooniverse_id})),n.push(" \n      "),n.push(t("views/share_button")({image:t("controllers/subject_viewer").imageIn(this.location)})),n.push('\n    </div>\n  </h2>\n</header>\n\n<div class="focus">\n  <div class="subject-viewer">\n    <!--Replace with SubjectViewer instance-->\n  </div>\n\n  <div class="add-to-collection hide-without-user">\n    <button class="collect-this" data-id="'),n.push(i(this.zooniverse_id)),n.push('">Collect</button>\n    <div class="collection-list"></div>\n  </div>\n  \n  '),n.push(t("views/focus/comment_form")()),n.push("\n\n  "),n.push(t("views/focus/comments")({discussionId:this.discussion.zooniverse_id,comments:this.discussion.comments,count:this.discussion.comments_count})),n.push('\n</div>\n\n<div class="collections">\n  <h3>Collections'),this.collectionPages>1&&n.push('<div class="pages"></div>'),n.push("</h3>\n  "),this.collectionPages>0?(n.push('\n    <div class="list">\n      '),n.push(t("views/collections/list")({collections:this.collections[1]})),n.push("\n    </div>\n  ")):n.push("\n    No collections\n  "),n.push('\n</div>\n\n<div class="hashtags">\n  <h3>Tags</h3>\n  '),n.push(t("views/hashtags/list")({tags:this.tags})),n.push("\n  "),e=this.tags.map(function(e){return e._id}),n.push("\n  "),e.length>0&&(n.push('\n    <div class="collect">\n      <a class="create-keyword-set" href="#/collections/new/keywords/'),n.push(i(e.join("&"))),n.push('">Create a tag group</a>\n    </div>\n  ')),n.push('\n</div>\n\n<div class="discussions">\n  '),n.push(t("views/focus/discussions")({boards:this.board_discussions,mentions:this.mentions})),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/subjects/summary":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u;s=t("lib/util").truncate,n.push("\n"),o=t("views/user_link"),n.push("\n"),e=t("moment/moment"),n.push("\n"),r=t("lib/config").subjectViewerDiscuss,n.push('\n\n<div class="subject-summary" data-id="'),n.push(i(this.zooniverse_id)),n.push('">\n  <div class="preview">\n    '),r?(n.push('\n      <h3><a href="#/subjects/'),n.push(i(this.zooniverse_id)),n.push('">'),n.push(i(this.zooniverse_id)),n.push('</a></h3>\n      <div class="subject-viewer"></div>\n    ')):(n.push('\n      <a href="#/subjects/'),n.push(i(this.zooniverse_id)),n.push('">\n        <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(this.location))),n.push('" class="thin-frame preview" />\n      </a>\n    ')),n.push('\n    <div class="add-to-collection hide-without-user '),r&&n.push("with-subject-viewer"),n.push('">\n      <button class="collect-this" data-id="'),n.push(i(this.zooniverse_id)),n.push('">Collect</button>\n      <div class="collection-list"></div>\n    </div>\n  </div>\n\n  <div class="summary">\n    <div class="title">\n      <a href="#/subjects/'),n.push(i(this.zooniverse_id)),n.push('">'),n.push(i(this.zooniverse_id)),n.push('</a>\n    </div>\n\n    <div class="metadata">\n      <!--'),n.push(t("views/follow_button")({id:this.zooniverse_id,type:"subjects",follower_ids:this.follower_ids})),n.push("-->\n\n      "),this.comments!=null&&this.discussions!=null&&(n.push('\n        <div class="stats">\n          <span class="comments"><span class="count">'),n.push(i(this.comments)),n.push('</span> Comments</span>,\n          <span class="discussions"><span class="count">'),n.push(i(this.discussions)),n.push("</span> Discussions</span>\n        </div>\n      ")),n.push("\n    </div>\n    \n    "),this.last_comment&&(n.push('\n      <div class="last-comment">\n        <div class="content">'),n.push(i(s(this.last_comment.body.replace("<","&gt;").replace(">","&gt;")||" ",140))),n.push('</div>\n\n        <div class="author">\n          '),n.push(o({link:this.last_comment,avatar:!0})),n.push("\n        </div>\n      </div>\n    ")),n.push("\n\n    ");if((u=this.discussion)!=null?u.comments:void 0)n.push("\n      "),n.push(t("views/focus/comments")({discussionId:this.discussion.zooniverse_id,comments:this.discussion.comments,count:this.discussion.comments_count,fromBoard:!0})),n.push("\n    ");n.push("\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/subjects/viewer":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,r,i;t.push('<div class="graph-and-quarters">\n  <div class="canvas-container">\n    <canvas id="graph" width="1024" height="418"></canvas>\n  </div>\n\n  <div class="quarters-and-metadata">\n    <div class="quarters">\n      <div><b>Quarters</b></div>\n      '),i=this.quarterList;for(n=0,r=i.length;n<r;n++)e=i[n],t.push('\n        <div class="quarter" data-quarter="'),t.push(e),t.push('">'),t.push(e),t.push("</div>\n      ");t.push("\n    </div>\n\n    <div class=\"metadata\">\n      <div><b>Metadata</b></div>\n        <p><span class='meta_key'>Type:</span> <span class='meta_val meta_type'></span></p>\n        <p><span class='meta_key'>Mag:</span> <span class='meta_val meta_mag'></span></p>\n        <p><span class='meta_key'>Radius:</span> <span class='meta_val meta_radius'></span></p>\n        <p><span class='meta_key'>Kepler Id:</span> <span class='meta_val meta_kid'></span></p>\n      </div>\n    <a class='old_ph_link' href=''>View on old talk</a></div>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/timestamp":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u;e=t("moment/moment"),n.push("\n"),s=t("zooniverse/lib/models/user").current,n.push("\n"),r=(s!=null?(o=s.preferences)!=null?(u=o.talk)!=null?u.time_format:void 0:void 0:void 0)||"relative",n.push('\n\n<span class="timestamp">\n  '),r==="absolute"?(n.push('\n    <span class="shown">'),n.push(i(e(this.timestamp).format("LLL"))),n.push('</span>\n    <span class="on-hover">'),n.push(i(e(this.timestamp).fromNow())),n.push("</span>\n  ")):(n.push('\n    <span class="shown">'),n.push(i(e(this.timestamp).fromNow())),n.push('</span>\n    <span class="on-hover">'),n.push(i(e(this.timestamp).format("LLL"))),n.push("</span>\n  ")),n.push("\n</span>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/user_link":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("models/roles").roles[this.link.user_name],n.push("\n\n"),this.avatar&&(n.push('\n  <a href="#/users/'),n.push(i(this.link.user_name)),n.push('" class="user">\n    '),this.link.user_zooniverse_id?(n.push('\n      <img src="//zooniverse-avatars.s3.amazonaws.com/ouroboros/'),n.push(i(this.link.user_zooniverse_id)),n.push('" class="avatar" onerror="window.defaultAvatar(this)" />\n    ')):(n.push("\n      "),n.push(t("views/users/default_avatar")()),n.push("\n    ")),n.push("\n  </a>\n")),n.push('\n\nby\n\n<a href="#/users/'),n.push(i(this.link.user_name)),n.push('" class="user">\n  '),n.push(i(this.link.user_name)),n.push("\n  \n  "),e&&(n.push('\n    <span class="'),n.push(i(e.sort().join(" "))),n.push(' role">'),n.push(i(e.sort().join(", "))),n.push("</span>\n  ")),n.push("\n</a>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/active":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s;s=t("lib/util"),e=s.formatNumber,r=s.pluralize,n.push('\n<h2>Currently Online<span class="aux">'),n.push(i(e(this.count))),n.push(" "),n.push(i(r(this.count,"user","users"))),n.push('</span></h2>\n<div class="list">\n  '),n.push(t("views/users/active_list")({users:this.users[1]})),n.push('\n</div>\n<div class="pages"></div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/active_list":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s;s=this.users;for(n=0,i=s.length;n<i;n++)e=s[n],t.push('\n  <div class="active-user">\n    <a href="#/users/'),t.push(r(e.name)),t.push('" class="user">\n      <img src="//zooniverse-avatars.s3.amazonaws.com/ouroboros/'),t.push(r(e.zooniverse_id)),t.push('" class="avatar" onerror="window.defaultAvatar(this)" />\n      '),t.push(r(e.name)),t.push("\n    </a>\n  </div>\n");t.push("\n")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/users/banned":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<div id="banned-user">\n  <h1>\n    You have been banned from Talk by a moderator\n  </h1>\n  \n  <h3>\n    If you believe this is in error, please send an email to\n    <a title="Zooniverse Support" href="mailto:support@zooniverse.org">Zooniverse Support</a>\n  </h3>\n</div>')}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/users/collection_comments":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d;u=t("views/user_link"),n.push("\n"),r=t("moment/moment"),n.push("\n\n"),h=this.collections;for(a=0,l=h.length;a<l;a++){e=h[a],n.push('\n  <div class="collection">\n    <div class="title">\n      <a href="#/collections/'),n.push(i(e.focus.zooniverse_id)),n.push('">'),n.push(i(e.title)),n.push("</a>\n      updated "),n.push(i(r(e.updated_at).fromNow())),n.push('\n    </div>\n    \n    <div class="subjects">\n      '),o=(e!=null?(p=e.focus)!=null?p.subjects:void 0:void 0)||[],n.push("\n      "),d=o.slice(0,5);for(f=0,c=d.length;f<c;f++)s=d[f],n.push('\n        <div class="subject">\n          <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(s!=null?s.location:void 0))),n.push('" class="thin-frame" />\n        </div>\n      ');n.push('\n    </div>\n    \n    <div class="comment">\n      <div class="content">\n        '),n.push(e.comment.body.replace("<","&gt;").replace(">","&gt;")||"&nbsp;"),n.push('\n      </div>\n      \n      <div class="author">\n        '),n.push(u({link:e.comment})),n.push("\n        "),n.push(t("views/timestamp")({timestamp:e.comment.created_at})),n.push("\n      </div>\n    </div>\n  </div>\n")}n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/collection_list":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s;t.push("<ul>\n  "),s=this.collections;for(n=0,i=s.length;n<i;n++)e=s[n],t.push('\n    <li class="collection" data-id="'),t.push(r(e.zooniverse_id)),t.push('">'),t.push(r(e.title)),t.push("</li>\n  ");t.push('\n  <li><a href="#/collections/new/'),t.push(r(this.subject.zooniverse_id)),t.push('">Start a new collection</a></li>\n</ul>\n')}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/users/content":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r;e=t("lib/util").capitalize,n.push("\n"),r=t("lib/config").grouped,n.push("\n\n"),r&&(n.push('\n  <section class="groups">\n    <h2>'),n.push(i(this.label)),n.push(" Recent "),n.push(i(t("controllers/group_viewer").groupName())),n.push(' Comments</h2>\n    <div class="list">\n      '),n.push(t("views/users/group_comments")({groups:this.user.groups})),n.push('\n    </div>\n    \n    <div class="load-more">\n      '),this.user.groups.length===this.user.sections.groups.perPage&&n.push('\n        <button name="load-more" data-type="groups">Load more</button>\n      '),n.push("\n    </div>\n  </section>\n  \n  <hr />\n")),n.push('\n\n<section class="subjects">\n  <h2>'),n.push(i(this.label)),n.push(' Recent Object Comments</h2>\n  <div class="list">\n    '),n.push(t("views/users/subject_comments")({subjects:this.user.subjects})),n.push('\n  </div>\n  \n  <div class="load-more">\n    '),this.user.subjects.length===this.user.sections.subjects.perPage&&n.push('\n      <button name="load-more" data-type="subjects">Load more</button>\n    '),n.push('\n  </div>\n</section>\n\n<hr />\n\n<section class="collections">\n  <h2>'),n.push(i(this.label)),n.push(' Recent Collection Comments</h2>\n  <div class="list">\n    '),n.push(t("views/users/collection_comments")({collections:this.user.collections})),n.push('\n  </div>\n  \n  <div class="load-more">\n    '),this.user.collections.length===this.user.sections.collections.perPage&&n.push('\n      <button name="load-more" data-type="collections">Load more</button>\n    '),n.push('\n  </div>\n</section>\n\n<hr />\n\n<section class="boards">\n  <h3>'),n.push(i(this.label)),n.push(' Recent Discussions</h3>\n  <div class="list">\n    '),n.push(t("views/discussions/list")({discussions:this.user.boards})),n.push('\n  </div>\n  \n  <div class="load-more">\n    '),this.user.boards.length===this.user.sections.boards.perPage&&n.push('\n      <button name="load-more" data-type="boards">Load more</button>\n    '),n.push('\n  </div>\n</section>\n\n<hr />\n\n<section class="my_collections">\n  <h2>'),n.push(i(this.label)),n.push(' Collections</h2>\n  <div class="list">\n    '),n.push(t("views/collections/list")({collections:this.user.my_collections})),n.push('\n  </div>\n  \n  <div class="load-more">\n    '),this.user.my_collections.length===this.user.sections.my_collections.perPage&&n.push('\n      <button name="load-more" data-type="my_collections">Load more</button>\n    '),n.push("\n  </div>\n</section>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/default_avatar":function(e,t,n){n.exports=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<img src="http://zooniverse-avatars.s3.amazonaws.com/default_forum_avatar.png" class="avatar" />\n')}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"views/users/group_comments":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f,l,c,h,p,d;f=t("views/user_link"),n.push("\n"),s=t("moment/moment"),n.push("\n"),r=t("controllers/group_viewer"),n.push("\n"),u=t("controllers/subject_viewer"),n.push("\n\n"),d=this.groups;for(l=0,h=d.length;l<h;l++){e=d[l],n.push('\n  <div class="group">\n    <div class="title">\n      <a href="#/groups/'),n.push(i(e.focus.zooniverse_id)),n.push('">'),n.push(i(e.focus.search_name)),n.push('</a>\n    </div>\n    \n    <a href="#/groups/'),n.push(i(e.focus.zooniverse_id)),n.push('">\n      <div class="subjects">\n        '),a=e.focus.subjects||[],n.push("\n        ");for(c=0,p=a.length;c<p;c++)o=a[c],n.push('\n          <div class="subject">\n            <img src="'),n.push(i(u.imageIn(o!=null?o.location:void 0))),n.push('" class="thin-frame" />\n          </div>\n        ');n.push('\n      </div>\n    </a>\n    \n    <div class="comment">\n      <div class="content">\n        '),n.push(e.comment.body.replace("<","&gt;").replace(">","&gt;")||"&nbsp;"),n.push('\n      </div>\n      \n      <div class="author">\n        '),n.push(f({link:e.comment})),n.push("\n        "),n.push(t("views/timestamp")({timestamp:e.comment.created_at})),n.push("\n      </div>\n    </div>\n  </div>\n")}n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/mini_profile":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("zooniverse/lib/models/user").current,n.push('\n\n<div class="mini-profile">\n  <div class="clearfix">\n    '),(e!=null?e.name:void 0)===this.user.name?(n.push('\n      <a class="change-avatar" href="https://www.zooniverse.org/account/avatar" target="_blank" title="Change your avatar">\n        <img src="//zooniverse-avatars.s3.amazonaws.com/ouroboros/'),n.push(i(this.user.zooniverse_id)),n.push('" class="avatar" onerror="window.defaultAvatar(this)" />\n      </a>\n    ')):(n.push('\n      <img src="//zooniverse-avatars.s3.amazonaws.com/ouroboros/'),n.push(i(this.user.zooniverse_id)),n.push('" class="avatar" onerror="window.defaultAvatar(this)" />\n    ')),n.push('\n    <div class="info">\n      <div class="name">'),n.push(i(this.user.name)),n.push("</div>\n      "),(e!=null?e.name:void 0)===this.user.name&&n.push('\n        <div class="preferences"><a href="#/users/preferences">preferences</a></div>\n      '),n.push("\n    </div>\n  </div>\n  "),n.push(t("views/moderation/user")({user:this.user})),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/preferences":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s;e=t("zooniverse/lib/models/user").current,n.push("\n"),r=(e!=null?(s=e.preferences)!=null?s.talk:void 0:void 0)||{time_format:"relative"},n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/users/mini_profile")({user:e})),n.push('\n    <div class="message-list"></div>\n  </div>\n  \n  <div class="two-thirds column">\n    <section class="preferences">\n      <h2>Preferences</h2>\n      <div class="row">\n        <div class="column">Time format</div>\n        <div class="column">\n          <select class="preference" name="time_format">\n            <option value="relative" '),r.time_format==="relative"&&n.push(i("selected")),n.push('>Relative</option>\n            <option value="absolute" '),r.time_format==="absolute"&&n.push(i("selected")),n.push('>Absolute</option>\n          </select>\n        </div>\n        <div class="column">\n          <span class="description" name="relative" style="'),r.time_format!=="relative"&&n.push(i("display: none;")),n.push('">\n            Show dates and times relative to the current time\n          </span>\n          <span class="description" name="absolute" style="'),r.time_format!=="absolute"&&n.push(i("display: none;")),n.push('">\n            Show full dates and times in your timezone\n          </span>\n        </div>\n      </div>\n    </section>\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/profile":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e;e=t("zooniverse/lib/models/user").current,n.push('\n\n<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/users/mini_profile")({user:e})),n.push('\n    <div class="message-list"></div>\n  </div>\n  \n  <div class="two-thirds column">\n    '),n.push(t("views/users/content")({label:"My",user:this})),n.push("\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/show":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="columns">\n  <div class="one-third column">\n    '),n.push(t("views/users/mini_profile")({user:this.user})),n.push('\n    <div class="message-list"></div>\n  </div>\n  \n  <div class="two-thirds column">\n    '),n.push(t("views/users/content")({label:this.name,user:this})),n.push("\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}},"views/users/subject_comments":function(e,t,n){n.exports=function(e){e||(e={});var n=[],r=function(e){var t=n,r;return n=[],e.call(this),r=n.join(""),n=t,s(r)},i=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?u(e):""},s,o=e.safe,u=e.escape;return s=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},u||(u=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,r,s,o,u,a,f;s=t("views/user_link"),n.push("\n"),e=t("moment/moment"),n.push("\n\n"),a=this.subjects;for(o=0,u=a.length;o<u;o++)r=a[o],n.push('\n  <div class="subject">\n    <div class="preview">\n      <a href="#/subjects/'),n.push(i(r.focus.zooniverse_id)),n.push('">\n        <img src="'),n.push(i(t("controllers/subject_viewer").imageIn(r!=null?(f=r.focus)!=null?f.location:void 0:void 0))),n.push('" class="thin-frame" />\n      </a>\n    </div>\n    \n    <div class="summary">\n      <div class="title">\n        <a href="#/subjects/'),n.push(i(r.focus.zooniverse_id)),n.push('">'),n.push(i(r.focus.zooniverse_id)),n.push('</a>\n      </div>\n      \n      <div class="comment">\n        <div class="content">\n          '),n.push(r.comment.body.replace("<","&gt;").replace(">","&gt;")||"&nbsp;"),n.push('\n        </div>\n        \n        <div class="author">\n          '),n.push(s({link:r.comment})),n.push("\n          "),n.push(t("views/timestamp")({timestamp:r.comment.created_at})),n.push("\n        </div>\n      </div>\n    </div>\n  </div>\n");n.push("\n")}).call(this)}.call(e),e.safe=o,e.escape=u,n.join("")}}})